@class NSString, NSMutableDictionary, NSMutableSet, NSTimer, NSMutableArray;

@interface IMDFileTransferCenter : NSObject <IMFileCopierDelegate> {
    NSMutableDictionary *_guidToCopierMap;
    NSMutableDictionary *_guidToSimpleCopierMap;
    NSMutableDictionary *_guidToTransferMap;
    NSMutableSet *_activeTransfers;
    NSTimer *_transferTimer;
    NSMutableArray *_transferringTransfers;
    NSMutableSet *_activeExplicitlyRequestedTransfers;
}

@property (retain, nonatomic) NSString *contextStamp;
@property (readonly, nonatomic) BOOL hasActiveFileTransfers;

+ (id)sharedInstance;
+ (id)localFileURLRetrievalErrorWithReason:(long long)a0 description:(id)a1;
+ (id)fileTransferErrorWithReason:(long long)a0 description:(id)a1;
+ (id)localFileURLRetrievalErrorWithReason:(long long)a0 underlyingReason:(long long)a1 description:(id)a2;

- (void)_reset;
- (void)_removeActiveTransfer:(id)a0;
- (void)fileCopierDidStart:(id)a0;
- (void)fileCopierDidFinish:(id)a0;
- (id)transferForGUID:(id)a0;
- (id)guidsForStoredAttachmentPayloadData:(id)a0 messageGUID:(id)a1;
- (struct IMPreviewConstraints { double x0; struct CGSize { double x0; double x1; } x1; double x2; BOOL x3; BOOL x4; })_clientPreviewConstraints;
- (id)init;
- (id)guidForNewOutgoingTransferWithLocalURL:(id)a0;
- (void)dealloc;
- (id)_transcodeControllerSharedInstance;
- (id)_statsCollector;
- (void)_addActiveTransfer:(id)a0;
- (BOOL)registerGUID:(id)a0 forNewOutgoingTransferWithLocalURL:(id)a1;
- (BOOL)markAttachment:(id)a0 sender:(id)a1 recipients:(id)a2 isIncoming:(BOOL)a3;
- (id)guidForNewIncomingTransferWithFilename:(id)a0 isDirectory:(BOOL)a1 totalBytes:(unsigned long long)a2 hfsType:(unsigned int)a3 hfsCreator:(unsigned int)a4 hfsFlags:(unsigned short)a5;
- (void)assignTransfer:(id)a0 toAccount:(id)a1 otherPerson:(id)a2;
- (void)acceptTransfer:(id)a0 path:(id)a1;
- (void)startFinalizingTransfer:(id)a0;
- (void)failTransfer:(id)a0 error:(id)a1;
- (void)failTransferPreviewGeneration:(id)a0;
- (void)updateTransfer:(id)a0 withPreviewSize:(id)a1 forConstraints:(struct IMPreviewConstraints { double x0; struct CGSize { double x0; double x1; } x1; double x2; BOOL x3; BOOL x4; })a2;
- (void)startTransfer:(id)a0;
- (void)endTransfer:(id)a0;
- (void)updateTransfer:(id)a0 currentBytes:(unsigned long long)a1 totalBytes:(unsigned long long)a2;
- (void)failTransfer:(id)a0 reason:(long long)a1;
- (void)addDefaultGatekeeperPropertiesToDirectory:(id)a0;
- (id)guidsForStoredAttachmentPayloadDataURLs:(id)a0 messageGUID:(id)a1;
- (void)setRecoverableErrorForTransfer:(id)a0 error:(long long)a1;
- (void)addTransfer:(id)a0 forGUID:(id)a1;
- (void)resetTransferAndPostError:(id)a0 error:(id)a1;
- (void)sizePreviewsForTransferGUIDs:(id)a0;
- (void)makeNewIncomingTransferWithGUID:(id)a0 filename:(id)a1 isDirectory:(BOOL)a2 totalBytes:(unsigned long long)a3 hfsType:(unsigned int)a4 hfsCreator:(unsigned int)a5 hfsFlags:(unsigned short)a6;
- (id)guidForNewOutgoingTransferWithFilename:(id)a0 isDirectory:(BOOL)a1 totalBytes:(unsigned long long)a2 hfsType:(unsigned int)a3 hfsCreator:(unsigned int)a4 hfsFlags:(unsigned short)a5;
- (void)removeTransferForGUID:(id)a0;
- (void)_handleFileTransfer:(id)a0 acceptedWithPath:(id)a1 autoRename:(BOOL)a2 overwrite:(BOOL)a3 options:(long long)a4 postNotification:(BOOL)a5;
- (void)checkAndCompleteExplicitDownloadForTransfer:(id)a0;
- (void)markTransferAsNotSuccessfullyDownloadedFromCloud:(id)a0;
- (BOOL)populateLocalURLsForTransfer:(id)a0 fromCKRecord:(id)a1;
- (void)endTransfer:(id)a0 overrideFinalFileName:(id)a1;
- (void)updateTransferAsWaitingForAccept:(id)a0;
- (id)updateTransfersWithCKRecord:(id)a0 recordWasFetched:(BOOL)a1 downloadAsset:(BOOL *)a2;
- (void)markTransferAsNotSyncedSuccessfully:(id)a0;
- (void)resetSyncStateForRecord:(id)a0 toState:(long long)a1;
- (BOOL)__im_ff_isBlastDoorAttachmentPreviewEnabled;
- (void)_postUpdated:(id)a0 forceNotify:(BOOL)a1;
- (void)_updateContextStamp;
- (void)_completeExplicitDownloadForTransfer:(id)a0 success:(BOOL)a1 error:(id)a2;
- (void)_removeActiveExplicitlyRequestedTransfer:(id)a0;
- (void)_postUpdated:(id)a0;
- (void)_archiveFileTransfer:(id)a0;
- (void)_addGatekeeperProperties:(id)a0 toFileAtPath:(id)a1;
- (void)_addSpotlightPropertiesFromFileTransfer:(id)a0 toDirectory:(id)a1;
- (void)_transferTimerTick:(id)a0;
- (void)makeNewOutgoingTransferWithGUID:(id)a0 filename:(id)a1 isDirectory:(BOOL)a2 totalBytes:(unsigned long long)a3 hfsType:(unsigned int)a4 hfsCreator:(unsigned int)a5 hfsFlags:(unsigned short)a6;
- (void)_addTransfer:(id)a0 forGUID:(id)a1 shouldNotify:(BOOL)a2 forceNotify:(BOOL)a3;
- (void)_updateTransferGUID:(id)a0 toGUID:(id)a1;
- (id)_createWrapperForTransfer:(id)a0;
- (void)resetTransfer:(id)a0 andPostReason:(long long)a1;
- (void)_addTransferringTransfer:(id)a0;
- (id)_attachmentStoreSharedInstance;
- (id)_removeWrapperForTransfer:(id)a0;
- (void)_removeTransferringTransfer:(id)a0;
- (void)_completeProgressForTransferGUID:(id)a0;
- (void)_clearProgressForTransferGUID:(id)a0;
- (id)_dictionaryRepresentationsForFileTransfers:(id)a0 toSave:(BOOL)a1;
- (void)_handleFileTransferStopped:(id)a0;
- (id)_getNewFileTransferForStoredAttachmentPayloadDataWithTransferGUID:(id)a0 messageGUID:(id)a1;
- (void)broadcastTransfersWithGUIDs:(id)a0 atLocalPaths:(id)a1;
- (void)_addActiveExplicitlyRequestedTransfer:(id)a0;
- (BOOL)_transferRequiresPreviewSizing:(id)a0;
- (id)_messageStoreSharedInstance;
- (BOOL)_shouldUpdateSyncStats:(id)a0 originalSyncState:(long long)a1;
- (void)_updateSyncStatsForAttachments:(id)a0 incrementTotalAttachmentCount:(unsigned long long)a1;
- (BOOL)_shouldDownloadAssetForTransfer:(id)a0 forMessageItem:(id)a1;
- (id)_progressForTransferGUID:(id)a0 allowCreate:(BOOL)a1 path:(id)a2;
- (void)archiveFileTransfer:(id)a0;
- (void)_addGatekeeperProperties:(id)a0 toDirectory:(id)a1;
- (BOOL)hasActiveExplicitlyRequestedFileTransfers;
- (void)removeUnassignedTransfers;
- (void)addTransfer:(id)a0 forGUID:(id)a1 forceNotify:(BOOL)a2;
- (void)_addTransfer:(id)a0 forGUID:(id)a1 shouldNotify:(BOOL)a2;
- (void)updateTransferGUID:(id)a0 toGUID:(id)a1;
- (void)updateTransfer:(id)a0;
- (BOOL)isSafeToDeleteTransferAttachmentPath:(id)a0;
- (id)_allFileTransfers;
- (void)_handleSendFileTransfer:(id)a0;
- (void)_handleFileTransfer:(id)a0 createdWithProperties:(id)a1 withAuditToken:(struct { unsigned int x0[8]; })a2;
- (void)_handleFileTransfer:(id)a0 updatedWithProperties:(id)a1;
- (void)_handleFileTransferRemoved:(id)a0;
- (BOOL)initiateHighQualityDownload:(id)a0;
- (BOOL)initiateExplicitDownloadWithGUID:(id)a0;

@end
