@class NSDictionary, WBSWebExtensionLocalization, WBSWebExtensionContextMenuItemManager, NSBundle, WBSWebExtensionToolbarItem, NSMutableArray, NSString, UIImage, NSArray, NSMutableDictionary, NSPointerArray, NSCountedSet, WKContentWorld, NSSet, WBSWebExtensionAlarmState, WBSDispatchSourceTimer, WBSWebExtensionSQLiteStore, WKWebView, NSUUID, NSMutableOrderedSet, NSURL, NSDate, NSMapTable, NSExtension;

@interface WBSWebExtensionData : WBSSafariExtension <WKNavigationDelegate, WKUIDelegate, WBSWebExtensionDataForwarding, NSSecureCoding, NSCopying> {
    NSURL *_resourcesDirectoryURL;
    NSMutableArray *_actionsToPerformAfterBackgroundPageLoads;
    WBSDispatchSourceTimer *_timerToUnloadBackgroundPage;
    NSPointerArray *_relatedWebViewPool;
    NSMutableDictionary *_injectedScriptsPerOriginPattern;
    NSMutableDictionary *_injectedStyleSheetsPerOriginPattern;
    NSMapTable *_temporaryTabPermissionOrigins;
    NSMutableArray *_websiteRequestsPendingApproval;
    NSMutableOrderedSet *_manifestErrors;
    NSBundle *_extensionBundle;
    NSDictionary *_manifestDictionary;
    BOOL _parsedManifestDictionary;
    NSMutableDictionary *_grantedPermissions;
    NSMutableDictionary *_grantedPermissionOrigins;
    NSMutableDictionary *_revokedPermissions;
    NSMutableDictionary *_revokedPermissionOrigins;
    NSSet *_manifestPermissions;
    NSSet *_manifestOptionalPermissions;
    NSSet *_manifestPermissionOrigins;
    NSSet *_manifestOptionalPermissionOrigins;
    BOOL _didPopulatePermissionsAndOriginsPropertiesFromManifest;
    NSArray *_backgroundScriptPaths;
    NSString *_backgroundPagePath;
    NSString *_generatedBackgroundPageContent;
    BOOL _backgroundPageIsPersistent;
    BOOL _parsedBackgroundManifest;
    BOOL _isExtensionBeingLoadedAsPartOfSafariLaunch;
    NSArray *_injectedContentData;
    BOOL _parsedContentScriptsManifest;
    NSArray *_webAccessibleResources;
    BOOL _parsedWebAccessibleResources;
    NSString *_displayName;
    NSString *_displayShortName;
    NSString *_version;
    NSString *_displayVersion;
    NSString *_displayDescription;
    BOOL _parsedManifestDisplayStrings;
    BOOL _hasCachedPreferencesIcon;
    UIImage *_preferencesIcon;
    BOOL _hasCachedIcon;
    UIImage *_icon;
    BOOL _hasCachedToolbarImage;
    UIImage *_toolbarImage;
    NSArray *_commands;
    WBSWebExtensionLocalization *_localization;
    WBSWebExtensionSQLiteStore *_localStorage;
    WBSWebExtensionSQLiteStore *_syncedStorage;
    NSDictionary *_queuedInstallEventDetails;
    BOOL _shouldFireStartupEvent;
    BOOL _hasFirstNativeMessagePort;
    NSMutableArray *_queuedNativeMessages;
    NSArray *_declarativeNetRequestRulesets;
    BOOL _permissionsAreBeingUpdatedDueToAnExternalChange;
    NSDate *_lastBackgroundPageLoadDate;
}

@property (class, readonly) BOOL supportsSecureCoding;

@property (nonatomic) BOOL hasLoadedPermissionsFromStorage;
@property (readonly, nonatomic) NSExtension *extension;
@property (readonly, nonatomic) NSString *composedIdentifier;
@property (readonly, nonatomic) NSString *extensionIdentifier;
@property (readonly, nonatomic) NSUUID *uniqueIdentifier;
@property (readonly, nonatomic) NSString *runtimeIdentifier;
@property (readonly, nonatomic) NSUUID *identifier;
@property (readonly, nonatomic) NSString *containingAppBundleIdentifier;
@property (readonly, nonatomic) NSUUID *baseURIHost;
@property (readonly, nonatomic) BOOL manifestParsedSuccessfully;
@property (readonly, copy, nonatomic) NSDictionary *manifest;
@property (readonly, nonatomic) WBSWebExtensionLocalization *localization;
@property (retain, nonatomic) WBSWebExtensionToolbarItem *toolbarItem;
@property (readonly, copy, nonatomic) NSString *toolbarLabel;
@property (readonly, copy, nonatomic) NSString *toolbarPopupPath;
@property (readonly, nonatomic) NSURL *backgroundPageURL;
@property (readonly, nonatomic) WBSWebExtensionSQLiteStore *localStorage;
@property (readonly, nonatomic) WBSWebExtensionSQLiteStore *syncedStorage;
@property (readonly, nonatomic) WKWebView *backgroundWebView;
@property (readonly, nonatomic) WKWebView *relatedWebView;
@property (readonly, nonatomic) NSArray *allRelatedWebViews;
@property (retain, nonatomic) WKContentWorld *extensionWorldForInjectedContent;
@property (readonly, nonatomic) WBSWebExtensionContextMenuItemManager *contextMenuItemManager;
@property (readonly, nonatomic) WBSWebExtensionAlarmState *alarmState;
@property (readonly, nonatomic) NSArray *declarativeNetRequestRulesets;
@property (readonly, nonatomic) NSURL *optionsPageURL;
@property (readonly, copy, nonatomic) NSArray *corsDisablingPatterns;
@property (readonly, nonatomic) NSDictionary *userVisiblePermissions;
@property (readonly, nonatomic) BOOL shouldShowInWebsitePreferences;
@property (readonly, nonatomic) NSSet *urlsPendingApproval;
@property (readonly, nonatomic) NSSet *apiNamesPendingApproval;
@property (retain, nonatomic) NSCountedSet *backgroundPageEventListeners;
@property (retain, nonatomic) NSDate *dateOfLastMessageSentFromAnyPortInBackgroundPage;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;
@property (readonly, nonatomic) NSString *displayName;
@property (readonly, nonatomic) NSString *displayShortName;
@property (readonly, nonatomic) NSString *displayVersion;
@property (readonly, nonatomic) NSString *displayDescription;
@property (readonly, nonatomic) NSString *processDisplayName;
@property (readonly, nonatomic) NSString *version;
@property (readonly, nonatomic) UIImage *preferencesIcon;
@property (readonly, nonatomic) UIImage *icon;
@property (readonly, nonatomic) UIImage *toolbarImage;
@property (readonly, nonatomic) NSString *generatedBackgroundPageContent;
@property (readonly, nonatomic) BOOL backgroundPageIsPersistent;
@property (readonly, nonatomic) NSArray *injectedContentData;
@property (readonly, nonatomic) NSURL *newTabOverridePageURL;
@property (readonly, nonatomic) BOOL hasBrowserAction;
@property (readonly, nonatomic) BOOL hasPageAction;
@property (readonly, nonatomic) BOOL hasCommands;
@property (readonly, nonatomic) long long manifestVersion;
@property (readonly, nonatomic) BOOL requestsAccessToAllHosts;
@property (nonatomic) BOOL requestedOptionalAccessToAllHosts;
@property (readonly, nonatomic) NSSet *currentPermissions;
@property (readonly, nonatomic) NSSet *currentPermissionOrigins;
@property (readonly, nonatomic) NSSet *currentAccessibleOrigins;
@property (readonly, nonatomic) NSDictionary *configuredPermissions;
@property (readonly, nonatomic) NSDictionary *configuredPermissionOrigins;
@property (readonly, nonatomic) NSSet *requestedPermissionsNotAlreadyConfigured;
@property (readonly, nonatomic) NSSet *requestedPermissionOriginsNotAlreadyConfigured;
@property (copy, nonatomic) NSDictionary *grantedPermissions;
@property (copy, nonatomic) NSDictionary *grantedPermissionOrigins;
@property (copy, nonatomic) NSDictionary *revokedPermissions;
@property (copy, nonatomic) NSDictionary *revokedPermissionOrigins;
@property (readonly, nonatomic) NSSet *manifestPermissions;
@property (readonly, nonatomic) NSSet *manifestOptionalPermissions;
@property (readonly, nonatomic) NSSet *manifestPermissionOrigins;
@property (readonly, nonatomic) NSSet *manifestOptionalPermissionOrigins;
@property (readonly, nonatomic) NSSet *manifestAccessibleOrigins;
@property (readonly, nonatomic) NSString *contentSecurityPolicy;
@property (readonly, nonatomic) NSArray *webAccessibleResources;
@property (readonly, nonatomic) NSArray *commands;
@property (readonly, nonatomic) NSArray *manifestErrors;

+ (id)generatedBackgroundPageFilename;
+ (id)supportedPermissions;
+ (id)supportedWebExtensionPatternSchemes;
+ (id)createWebExtensionError:(long long)a0 customLocalizedDescription:(id)a1;
+ (id)supportedPermissionsForExtensionConverter;
+ (id)createWebExtensionError:(long long)a0 underlyingError:(id)a1;
+ (id)createWebExtensionError:(long long)a0;
+ (id)unlocalizedManifestDictionaryFromData:(id)a0 withExtensionIdentifier:(id)a1 error:(id *)a2;
+ (id /* block */)_originPatternMatchesAnyPatternInAllowedPatterns:(id)a0;
+ (id)_manifestKeySupportForDictionary:(id)a0 withSupportedFeatures:(id)a1 currentSafariShortVersion:(id)a2;
+ (id)_unsupportedKeysFromKeySupportDictionary:(id)a0;
+ (BOOL)_isShortVersion:(id)a0 supportedInSafariVersion:(id)a1;
+ (void)_mergeKeySupportDictionary:(id)a0 intoDictionary:(id)a1;
+ (id)_unsupportedValuesInArray:(id)a0 withSupportedFeatures:(id)a1 currentSafariShortVersion:(id)a2;
+ (id)supportedWebExtensionFeaturesForManifestVersion:(unsigned long long)a0;
+ (id)unsupportedManifestKeysInDictionary:(id)a0 withSupportedFeatures:(id)a1 currentSafariShortVersion:(id)a2;

- (void)unload;
- (void)webView:(id)a0 didFinishNavigation:(id)a1;
- (void)removeListener:(unsigned long long)a0;
- (id)initWithExtension:(id)a0;
- (void)encodeWithCoder:(id)a0;
- (void)addListener:(unsigned long long)a0;
- (id)manifestDictionary;
- (void).cxx_destruct;
- (BOOL)canLoad;
- (id)initWithCoder:(id)a0;
- (id)copyWithZone:(struct _NSZone { } *)a0;
- (BOOL)_applicationIsActive;
- (void)load;
- (void)webViewWebContentProcessDidTerminate:(id)a0;
- (id)_actionDictionary;
- (void)_loadToolbarItem;
- (void)_unloadToolbarItem;
- (void)_validateToolbarItemInAllWindows;
- (void)addWebViewToRelatedWebViewPool:(id)a0;
- (BOOL)shouldShowToolbarItemForTab:(id)a0;
- (BOOL)hasPermissionToAccessURL:(id)a0 inTab:(id)a1;
- (BOOL)hasPendingWebsiteRequests;
- (void)userGesturePerformedInTab:(id)a0;
- (void)prepareToFireEvent:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (BOOL)hasPermission:(id)a0;
- (void)queueStartupEvent;
- (void)setQueuedInstallEventDetails:(id)a0;
- (id)extensionStateWithPreviousState:(id)a0;
- (long long)extensionSupportsCurrentSafariVersion;
- (void)checkPermissionAndPromptIfNecessaryToAccessURL:(id)a0 inTab:(id)a1 callingAPIName:(id)a2 completionHandler:(id /* block */)a3;
- (void)checkPermissionAndPromptIfNecessaryToAccessURLs:(id)a0 inTab:(id)a1 callingAPIName:(id)a2 completionHandler:(id /* block */)a3;
- (void)loadDeclarativeNetRequestRulesetsIfNeededWithCompletionHandler:(id /* block */)a0;
- (void)nativePortConnectionOpened;
- (void)loadBackgroundPageIfNecessaryWithCompletionHandler:(id /* block */)a0;
- (void)scheduleBackgroundPageToUnload;
- (void)removeTemporaryPermissionsForTab:(id)a0;
- (void)updateBackgroundPageClipboardPermission;
- (void)addInjectedContentForGrantedOriginPatterns:(id)a0;
- (void)dispatchPendingWebsiteRequestsMatchingOriginPatterns:(id)a0;
- (void)removeInjectedContentForRemovedOriginPatterns:(id)a0;
- (void)updateInjectedContentForChangedRevokedOriginPatterns:(id)a0;
- (void)grantPermissions:(id)a0 origins:(id)a1 expirationDate:(id)a2;
- (void)removeGrantedPermissions:(id)a0 origins:(id)a1 exactPatternMatchesOnly:(BOOL)a2;
- (void)previouslyGrantedPermissionOriginsMayHaveBeenChangedExternally:(id)a0 previouslyRevokedPermissionOrigins:(id)a1;
- (BOOL)webViewIsDisplayingFullPageExtensionContent:(id)a0;
- (void)checkPermissionAndPromptIfNecessaryToAccessURL:(id)a0 inTab:(id)a1 options:(unsigned long long)a2 callingAPIName:(id)a3 completionHandler:(id /* block */)a4;
- (void)checkPermissionAndPromptIfNecessaryToAccessURLs:(id)a0 inTab:(id)a1 options:(unsigned long long)a2 callingAPIName:(id)a3 completionHandler:(id /* block */)a4;
- (void)fireEvents:(id)a0 completionHandler:(id /* block */)a1;
- (id)bestIconSizeKeyInIconsDictionary:(id)a0 idealPixelSize:(long long)a1;
- (id)imageForBestIconInIconsDictionary:(id)a0 idealPointSize:(long long)a1;
- (BOOL)hasPermissionToAccessAllHosts;
- (BOOL)hasInjectedContentDataForURL:(id)a0;
- (BOOL)hasPermissions:(id)a0 origins:(id)a1;
- (BOOL)hasPermissionToAccessURL:(id)a0;
- (long long)permissionStateForURL:(id)a0;
- (long long)permissionStateForURL:(id)a0 options:(unsigned long long)a1;
- (BOOL)hasPermissionToAccessAllURLs;
- (void)revokePermissions:(id)a0 origins:(id)a1 expirationDate:(id)a2;
- (void)removeRevokedPermissions:(id)a0 origins:(id)a1 exactPatternMatchesOnly:(BOOL)a2;
- (void)removeGrantedAndRevokedPermissions:(id)a0 origins:(id)a1 exactPatternMatchesOnly:(BOOL)a2;
- (BOOL)verifyRequestedPermissions:(id)a0 origins:(id)a1 errorMessage:(id *)a2;
- (void)populateAllPropertiesIfNeededToRecordManifestErrors;
- (long long)permissionStateForURL:(id)a0 inTab:(id)a1;
- (id)initWithExtension:(id)a0 extensionBundle:(id)a1 extensionIdentifier:(id)a2 uniqueIdentifier:(id)a3 baseURIHost:(id)a4;
- (void)_recordManifestErrorIfNecessary:(id)a0;
- (void)_populateDisplayStringsIfNeeded;
- (id /* block */)_validateAndReadResourceBlock;
- (id)extensionIconWithBaseURI:(id)a0 idealPointSize:(long long)a1 validateAndReadResourceHandler:(id /* block */)a2;
- (id)_containingAppIcon;
- (id)toolbarImageWithBaseURI:(id)a0 idealPointSize:(long long)a1 validateAndReadResourceHandler:(id /* block */)a2;
- (void)_populateBackgroundPropertiesIfNeeded;
- (void)_populateContentScriptPropertiesIfNeeded;
- (void)_populateWebAccessibleResources;
- (id)_createDeclarativeNetRequestErrors:(id)a0;
- (void)_populateDeclarativeNetRequestPropertiesIfNeeded;
- (BOOL)canLoadWithErrorString:(id *)a0;
- (void)_loadBackgroundWebViewDuringExtensionLoad;
- (void)_loadContentScriptsAndStyleSheets;
- (void)_addInjectedContentForAllGrantedOrigins;
- (void)_unloadBackgroundWebView;
- (void)_hidePermissionBanner;
- (void)invalidateStorage;
- (void)_applyModificationsToDeclarativeNetRequestRulesetsFromUpdateEnabledRulesets;
- (void)_compileDeclarativeNetRequestRules:(id)a0 completionHandler:(id /* block */)a1;
- (id)imageForBestIconInIconsDictionary:(id)a0 idealPointSize:(long long)a1 withBaseURI:(id)a2 validateAndReadResourceHandler:(id /* block */)a3;
- (id)imageForPath:(id)a0 withBaseURI:(id)a1 validateAndReadResourceHandler:(id /* block */)a2;
- (id)pathForBestIconInIconsDictionary:(id)a0 idealPixelSize:(long long)a1;
- (id)urlForOptionsPageWithBaseURI:(id)a0;
- (id)initWithManifestDictionary:(id)a0 extensionIdentifier:(id)a1 uniqueIdentifier:(id)a2;
- (id)_userInfoDictionaryForPermissionsNotificationWithPermissions:(id)a0 origins:(id)a1;
- (void)_removePermissions:(id)a0 origins:(id)a1 exactPatternMatchesOnly:(BOOL)a2 fromPermissions:(id)a3 fromOrigins:(id)a4 notificationName:(id)a5;
- (id)_configuredDictionaryWithRequested:(id)a0 granted:(id)a1 revoked:(id)a2;
- (void)_populatePermissionsAndOriginsPropertiesIfNeeded;
- (void)_removeExpiredPermissions:(id)a0 origins:(id)a1 notificationName:(id)a2;
- (void)_removeExpiredGrantedPermissionsAndPostNotification:(BOOL)a0;
- (void)_removeExpiredRevokedPermissionsAndPostNotification:(BOOL)a0;
- (long long)extensionSupportsSafariShortVersion:(id)a0;
- (id)_minimumSafariVersionString;
- (id)_maximumSafariVersionString;
- (id)urlForBackgroundPageWithBaseURI:(id)a0;
- (void)_loadBackgroundWebView;
- (id)_backgroundWebViewConfiguration;
- (double)_delayForNonPersistentBackgroundPageBeforeUnloading;
- (void)_queueEventToFireAfterBackgroundPageLoads:(id /* block */)a0;
- (void)_removeInjectedContentForOriginPattern:(id)a0;
- (void)_addInjectedContentForGrantedOriginPattern:(id)a0;
- (void)_updateInjectedContentForRevokedOriginPattern:(id)a0;
- (BOOL)hasActiveUserGestureInTab:(id)a0;
- (long long)permissionStateForURL:(id)a0 inTab:(id)a1 options:(unsigned long long)a2;
- (void)dispatchAllPendingWebsiteRequests;
- (void)_fireStartupAndInstallEventsIfNecessaryForWebView:(id)a0;
- (BOOL)hasPermission:(id)a0 inTab:(id)a1;
- (BOOL)hasMoreThanOneRequestedOriginNotAlreadyConfigured;
- (void)dispatchExpiredPendingWebsiteRequests;
- (void)messageReceivedFromContainingAppWithName:(id)a0 userInfo:(id)a1;

@end
