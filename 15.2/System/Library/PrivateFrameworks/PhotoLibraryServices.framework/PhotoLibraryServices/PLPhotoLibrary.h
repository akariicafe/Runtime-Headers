@class PLGlobalValues, NSPersistentStore, PLGenericAlbum, NSObject, PLPhotoLibraryPathManager, NSMutableArray, PAVideoConversionServiceClient, PLThumbnailManager, NSString, NSSet, PLKeywordManager, PLManagedObjectContext, PLThumbnailIndexes, NSArray, PAImageConversionServiceClient, PLLibraryServicesManager, PLPhotoLibraryOptions, PLPhotoLibraryBundle;
@protocol PLAlbumProtocol;

@interface PLPhotoLibrary : NSObject {
    unsigned long long _pendingTransactions;
    NSMutableArray *_transactionCompletionHandlers;
    PLGenericAlbum *_allImportedPhotosAlbum;
    PLGenericAlbum *_lastImportedPhotosAlbum;
    NSSet *_imageFileExtensions;
    NSSet *_rawImageFileExtensions;
    NSSet *_audioFileExtensions;
    NSSet *_extraVideoExtensions;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _managedObjectContextLock;
    PLManagedObjectContext *_managedObjectContext;
    NSPersistentStore *_loadedPersistentStore;
    PAImageConversionServiceClient *_imageConversionServiceClient;
    PAVideoConversionServiceClient *_videoConversionServiceClient;
}

@property (readonly) PLPhotoLibraryBundle *libraryBundle;
@property (readonly) PLKeywordManager *keywordManager;
@property (readonly, retain, nonatomic) NSArray *syncedAlbums;
@property (readonly, retain, nonatomic) NSObject<PLAlbumProtocol> *syncProgressAlbum;
@property (readonly, retain, nonatomic) NSObject<PLAlbumProtocol> *otaRestoreProgressAlbum;
@property (readonly, retain, nonatomic) NSObject<PLAlbumProtocol> *filesystemImportProgressAlbum;
@property (readonly, nonatomic) PLPhotoLibraryOptions *options;
@property (readonly, nonatomic) PLManagedObjectContext *managedObjectContext;
@property (readonly, nonatomic) PLPhotoLibraryPathManager *pathManager;
@property (readonly, weak, nonatomic) PLLibraryServicesManager *libraryServicesManager;
@property (readonly, copy, nonatomic) NSString *name;
@property (readonly, getter=isCloudPhotoLibraryEnabled) BOOL cloudPhotoLibraryEnabled;
@property (readonly, nonatomic) PAImageConversionServiceClient *imageConversionServiceClient;
@property (readonly, nonatomic) PAVideoConversionServiceClient *videoConversionServiceClient;
@property (readonly, nonatomic) PLThumbnailManager *thumbnailManager;
@property (readonly, nonatomic) PLThumbnailIndexes *thumbnailIndexes;
@property (readonly, copy, nonatomic) NSArray *photoStreamAlbums;
@property (readonly, copy, nonatomic) NSArray *photoStreamAlbumsForPreferences;
@property (readonly, nonatomic) PLGlobalValues *globalValues;

+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_INTERNAL_2_withCode:(int)a0;
+ (void)initialize;
+ (void)_contextSaveFailedWithNoPersistentStores:(id)a0;
+ (id)myPhotoStreamPhotoLibrary;
+ (void)setPhotoStreamEnabled:(BOOL)a0;
+ (struct os_state_data_s { unsigned int x0; union { unsigned int x0 : 32; unsigned int x1; } x1; struct os_state_data_decoder_s { char x0[64]; char x1[64]; } x2; char x3[64]; unsigned char x4[0]; } *)_stateDataWithHints:(struct os_state_hints_s { unsigned int x0; char *x1; unsigned int x2; unsigned int x3; } *)a0;
+ (void)_contextSaveFailedDueToClientRequestedShutdown:(id)a0;
+ (id)photoOutboundSharingTmpDirectoryURL;
+ (id)savedPhotosReferenceMediaSizeWithSizeDataRef:(id)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_RANGE_25_withCode:(int)a0;
+ (BOOL)removeFaceMetadataAtURL:(id)a0 includingPeople:(BOOL)a1;
+ (id)newPhotoLibraryWithName:(const char *)a0 loadedFromURL:(id)a1 options:(id)a2 error:(id *)a3;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_NOLFS_22_withCode:(int)a0;
+ (void)refreshCachedCountsOnAllAssetContainersInContext:(id)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_NOTADB_26_withCode:(int)a0;
+ (id)librarySummarySizeDataRefWithManagedObjectContext:(id)a0;
+ (BOOL)photoLibraryIsObtainable;
+ (BOOL)isRawImageFileExtension:(id)a0;
+ (id)systemMainQueuePhotoLibrary;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_FULL_13_withCode:(int)a0;
+ (id)cmmPhotoLibrary;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_CANTOPEN_14_withCode:(int)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_DONE_101_withCode:(int)a0;
+ (void)_registerStateHandler;
+ (void)refreshCachedCountsAndDates:(BOOL)a0 onAssetsContainerClass:(Class)a1 inContext:(id)a2 withPredicate:(id)a3;
+ (void)configureEnumeratorForLibrarySizeInfo:(id)a0 completion:(id /* block */)a1;
+ (BOOL)isNonRawImageFileExtension:(id)a0;
+ (void)_activateStatusTimer;
+ (BOOL)isImageFileExtension:(id)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_CONSTRAINT_19_withCode:(int)a0;
+ (id)fileReservationForFileAtPath:(id)a0 exclusive:(BOOL)a1;
+ (id)sharedPhotoLibrary;
+ (void)setCloudAlbumSharingEnabled:(BOOL)a0;
+ (id)cameraPhotoLibrary;
+ (void)_loadFileExtensionInformation;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_ERROR_1_withCode:(int)a0;
+ (void)reportLibraryDidInit:(id)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_AUTH_23_withCode:(int)a0;
+ (id)unitTestPhotoLibrary;
+ (id)diagnosticsPhotoLibrary;
+ (id)systemPhotoLibrary;
+ (void)_context:(id)a0 saveFailedWithError:(id)a1;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_ROW_100_withCode:(int)a0;
+ (id)cplPhotoLibrary;
+ (BOOL)isVideoFileExtension:(id)a0;
+ (void)_contextSaveFailedWithSQLiteResultCode:(int)a0;
+ (int)priorityForFileExtension:(id)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_FORMAT_24_withCode:(int)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_TOOBIG_18_withCode:(int)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_NOMEM_7_withCode:(int)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_PROTOCOL_15_withCode:(int)a0;
+ (id)_internalSystemPhotoLibrary;
+ (BOOL)systemPhotoLibraryIsObtainable;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_IOERR_10_withCode:(int)a0;
+ (id)_debugStatisticsDescription;
+ (BOOL)isAudioFileExtension:(id)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_WARNING_28_withCode:(int)a0;
+ (id)_resourcesInfoFromMoc:(id)a0;
+ (BOOL)areOpportunisticTasksDisabled;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_LOCKED_6_withCode:(int)a0;
+ (void)_contextSaveFailedWithError:(id)a0;
+ (BOOL)canSaveVideoToLibrary:(id)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_NOTICE_27_withCode:(int)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_SCHEMA_17_withCode:(int)a0;
+ (void)_contextSaveFailedWithTimeoutError:(id)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_PERM_3_withCode:(int)a0;
+ (id)savedPhotosOriginalsSizeWithSizeDataRef:(id)a0;
+ (id)_stateDictionary;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_ABORT_4_withCode:(int)a0;
+ (void)reportLibraryDidDealloc:(id)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_CORRUPT_11_withCode:(int)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_INTERRUPT_9_withCode:(int)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_READONLY_8_withCode:(int)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_BUSY_5_withCode:(int)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_MISMATCH_20_withCode:(int)a0;
+ (id)newPhotoLibraryWithName:(const char *)a0 loadedFromBundle:(id)a1 options:(id)a2 error:(id *)a3;
+ (id)queueStatusDescription;
+ (void)_contextSaveFailedDueToChangingSPL:(id)a0;
+ (id)opportunisticTaskIsolationQueue;
+ (BOOL)_assetsLibrary_isSharedPhotoStreamsSupportEnabled;
+ (id)cloudSharingPhotoLibrary;
+ (BOOL)shouldTryFastPathWithLibraryBundle:(id)a0;
+ (void)_getResourceData:(id)a0 nonDerivativeSizeOut:(_Atomic unsigned long long *)a1 derivativesSizeOut:(_Atomic unsigned long long *)a2 fileBackedThumbnailsSizeOut:(_Atomic unsigned long long *)a3 tableThumbnailsSizeOut:(_Atomic unsigned long long *)a4;
+ (BOOL)isAdjustmentEnvelopeExtension:(id)a0;
+ (unsigned long long)CloudPhotoLibrarySize;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_NOTFOUND_12_withCode:(int)a0;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_OTHER_withCode:(int)a0;
+ (id)masterURLFromSidecarURLs:(id)a0;
+ (void)_assetsLibrary_disableSharedPhotoStreamsSupport;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_MISUSE_21_withCode:(int)a0;
+ (void)postGlobalPhotoLibraryAvailableIfNecessary;
+ (void)_abortFromMocSaveFail_NSMOC_SQLITE_EMPTY_16_withCode:(int)a0;

- (void)modifyDCIMEntryForPhoto:(id)a0;
- (void)userUntrashAssets:(id)a0;
- (BOOL)getPhotoCount:(unsigned long long *)a0 videoCount:(unsigned long long *)a1 excludeTrashed:(BOOL)a2 excludeInvisible:(BOOL)a3 excludeCloudShared:(BOOL)a4;
- (id)constraintsDirector;
- (void)performTransaction:(id /* block */)a0;
- (id)librarySizes;
- (id)personInfoManager;
- (id)photoOutboundSharingTmpDirectoryURL;
- (id)assetsdClient;
- (void)batchDeleteAssets:(id)a0 withReason:(id)a1;
- (BOOL)hasCompletedMomentAnalysis;
- (void)deleteExpiredTrashedAssetsAndAlbums;
- (void)old_refreshCachedCountsOnAllAssetContainersInContext:(id)a0;
- (BOOL)loadDatabaseWithOptions:(id)a0 error:(id *)a1;
- (void)performTransaction:(id /* block */)a0 completionHandler:(id /* block */)a1 withPriority:(long long)a2;
- (void)updateMemoryPlayShareViewCountsInContext:(id)a0;
- (id)imageForFormat:(unsigned short)a0 forAsset:(id)a1;
- (void)addCompletionHandlerToCurrentTransaction:(id /* block */)a0;
- (id)lastImportedPhotosAlbumCreateIfNeeded:(BOOL)a0;
- (void)performBlock:(id /* block */)a0;
- (void)_userDeleteAssets:(id)a0 withReason:(id)a1 localOnlyDelete:(BOOL)a2;
- (id)eventAlbumContainingPhoto:(id)a0;
- (void)cleanupAfterImportAllDCIMAssets;
- (void)_updateAssetCountKeyPath:(id)a0 withPendingCountKeyPath:(id)a1 inContext:(id)a2;
- (id)newImageForPhoto:(id)a0 format:(unsigned short)a1;
- (BOOL)_hasIncompleteAsset;
- (void)_applySideCarFiles:(id)a0 toAsset:(id)a1 withMainFileURL:(id)a2 mainFileMetadata:(id)a3;
- (id)managedObjectContextStoreUUID;
- (void)userTrashAssets:(id)a0;
- (id)photoFromAssetURL:(id)a0;
- (void)_updateMemoryCountKeyPath:(id)a0 withPendingCountKeyPath:(id)a1 inContext:(id)a2;
- (id)syncedAlbumSubtitleStringFormat;
- (unsigned long long)numberOfUnpushedAssetsOfKind:(short)a0;
- (id)albumListForAlbumOfKind:(int)a0;
- (void)withDispatchGroup:(id)a0 performBlock:(id /* block */)a1;
- (void)_safeSave:(id)a0;
- (id)assetURLForPhoto:(id)a0;
- (void)_recreateItemsFromMetadataAtDirectoryURLs:(id)a0 includeAlbums:(BOOL)a1;
- (void)performTransaction:(id /* block */)a0 withPriority:(long long)a1;
- (id)allImportedPhotosAlbumCreateIfNeeded:(BOOL)a0;
- (id)albumFromGroupURL:(id)a0;
- (void)_inq_createPhotoStreamAlbumStreamID:(id)a0;
- (void)withDispatchGroup:(id)a0 performTransaction:(id /* block */)a1;
- (void)cleanupIncompleteAssetsAfterOTARestore;
- (BOOL)hasITunesSyncedContent;
- (id)iTunesSyncedContentInfo;
- (id)albumListForContentMode:(int)a0;
- (unsigned long long)countOfLocalAlbumsContainingAssets:(id)a0 assetsInSomeAlbumCount:(long long *)a1;
- (void)_userDeleteAlbums:(id)a0;
- (void)_userApplyTrashedState:(short)a0 toAlbums:(id)a1;
- (void)userExpungeAssets:(id)a0 localOnlyDelete:(BOOL)a1;
- (void)resetCachedImportAlbumsIfNeededForAlbum:(id)a0;
- (void)_photoLibraryCorruptNotification;
- (id)incompleteRestoreProcesses;
- (id)_initWithPathManager:(id)a0;
- (unsigned long long)numberOfCPLSupportedAssetsOfKind:(short)a0 includingTrashedSinceDate:(id)a1;
- (void)userUntrashAlbums:(id)a0;
- (void)_photoLibraryForceClientExitNotification;
- (id)estimatedLibrarySizes;
- (unsigned long long)sharedStreamsSize;
- (id)_fetchCompleteAssetIDsWithValidatedSavedAssetTypeMask:(unsigned short)a0 context:(id)a1;
- (void)updateAlbumKeyAssetsInContext:(id)a0 withPredicate:(id)a1;
- (void)countOfReferencedMediaWithCompletionHandler:(id /* block */)a0;
- (void)deleteExpiredTrashedResources;
- (void)dataMigratorSupportCleanupModelForDataMigrationPurgeMissingSharedAndSynced;
- (void)userExpungeAssets:(id)a0;
- (void)_setManagedObjectContext:(id)a0;
- (void)performBlock:(id /* block */)a0 withPriority:(long long)a1;
- (unsigned long long)_dbFileSizes;
- (id)description;
- (id)albumWithUuid:(id)a0;
- (BOOL)hasPendingAssetsIgnoreiTunes:(BOOL)a0;
- (id)assetURLForPhoto:(id)a0 extension:(id)a1;
- (void)invalidateWithReason:(id)a0;
- (void)enableOpportunisticTasks;
- (BOOL)deleteAllDiagnosticFiles:(id *)a0;
- (BOOL)batchDeleteObjectsWithEntity:(id)a0 predicate:(id)a1 error:(id *)a2;
- (void)withDispatchGroup:(id)a0 performTransaction:(id /* block */)a1 completionHandler:(id /* block */)a2;
- (id)_loadClientDatabaseContextWithOptions:(id)a0 error:(id *)a1;
- (void)createPhotoStreamAlbumWithStreamID:(id)a0;
- (void)performTransactionAndWaitWithName:(id)a0 transaction:(id /* block */)a1 completionHandler:(id /* block */)a2;
- (unsigned long long)_fileSizeAtPath:(id)a0;
- (void)performTransactionAndWait:(id /* block */)a0 completionHandler:(id /* block */)a1;
- (void)clientApplicationWillEnterForeground;
- (BOOL)getPhotoCount:(unsigned long long *)a0 videoCount:(unsigned long long *)a1;
- (void)recreateAlbumsAndPersonsFromMetadata;
- (void)userExpungeAlbums:(id)a0;
- (id)_loadServerDatabaseContextWithOptions:(id)a0 error:(id *)a1;
- (void).cxx_destruct;
- (id)assetWithUUID:(id)a0;
- (id)newImageForPhoto:(id)a0 format:(unsigned short)a1 allowPlaceholder:(BOOL)a2 outImageProperties:(const struct __CFDictionary **)a3 outDeliveredPlaceholder:(BOOL *)a4;
- (BOOL)isReadyForCloudPhotoLibrary;
- (void)recreateMemoriesAndPersonsFromMetadata;
- (BOOL)batchDeleteAssetsWithPredicate:(id)a0 reason:(id)a1 error:(id *)a2;
- (id)init;
- (BOOL)safeSave:(id)a0 error:(id *)a1;
- (void)deleteUnusedCameraMetadataPaths;
- (id)lastImportedPhotosAlbum;
- (BOOL)unloadDatabase:(id *)a0;
- (id)initWithName:(const char *)a0 libraryBundle:(id)a1 options:(id)a2;
- (id)_loadClientDatabaseContextFastPath;
- (void)disableOpportunisticTasks;
- (id)cplStatus;
- (void)handlePersistentStoreRemoval:(id)a0;
- (id)libraryID;
- (id)_fetchedObjectsForDeleteWithEntity:(id)a0 predicate:(id)a1 batchSize:(unsigned long long)a2 error:(id *)a3;
- (BOOL)hasCompletedRestorePostProcessing;
- (void)updateAssetPlayShareViewCountsInContext:(id)a0;
- (void)_removeOldFaceMetadataAsync;
- (void)userTrashAlbums:(id)a0;
- (void)performBlock:(id /* block */)a0 completionHandler:(id /* block */)a1;
- (id)duplicatePhotoStreamPhotosForPhotos:(id)a0;
- (void)recreatePersonsFromMetadata;
- (BOOL)isAlbumSynced:(id)a0;
- (void)handlePossibleCoreDataError:(id)a0;
- (id)syncProgressAlbumsIgnoreiTunes:(BOOL)a0;
- (void)deleteUnknownDeferredIntermediates;
- (void)_enumerateFilesAtURL:(id)a0 withBlock:(id /* block */)a1;
- (void)_processPhotoIrisSidecarIfNecessary:(id)a0 forAsset:(id)a1 mainFileMetadata:(id)a2;
- (void)_withDispatchGroup:(id)a0 synchronously:(BOOL)a1 name:(id)a2 shouldSave:(BOOL)a3 performTransaction:(id /* block */)a4 completionHandler:(id /* block */)a5;
- (id)addDCIMEntryAtFileURL:(id)a0 mainFileMetadata:(id)a1 toEvent:(id)a2 sidecarFileInfo:(id)a3 progress:(id)a4 importSessionIdentifier:(id)a5 isImported:(BOOL)a6 previewImage:(id)a7 thumbnailImage:(id)a8 savedAssetType:(short)a9 replacementUUID:(id)a10 publicGlobalUUID:(id)a11 extendedInfo:(id)a12 withUUID:(id)a13 ignoreEmbeddedMetadata:(BOOL)a14 isPlaceholder:(BOOL)a15 placeholderFileURL:(id)a16;
- (void)_enumerateFilesAtURLs:(id)a0 withBlock:(id /* block */)a1;
- (void)_applyAdjustmentFileInfo:(id)a0 renderedContentFileInfo:(id)a1 renderedVideoComplementFileInfo:(id)a2 toAsset:(id)a3 withMainFileURL:(id)a4 mainFileMetadata:(id)a5;
- (void)_deleteEmptyImportAlbumsWithAddedAlbums:(id)a0;
- (void)performTransaction:(id /* block */)a0 completionHandler:(id /* block */)a1;
- (void)performBlock:(id /* block */)a0 completionHandler:(id /* block */)a1 withPriority:(long long)a2;
- (void)dealloc;
- (void)performBlockAndWait:(id /* block */)a0 forceSave:(BOOL)a1;
- (id)_loadDatabaseContextWithOptions:(id)a0 error:(id *)a1;
- (id)photoAnalysisClient;
- (void)performBlockAndWait:(id /* block */)a0 completionHandler:(id /* block */)a1;
- (void)_filterAssets:(id)a0 toTrashableAssets:(id *)a1 deletableAssets:(id *)a2 otherAssets:(id *)a3;
- (void)deleteITunesSyncedContentForEnablingiCPL;
- (void)performTransactionWithName:(id)a0 transaction:(id /* block */)a1 completionHandler:(id /* block */)a2;
- (void)performBlockAndWait:(id /* block */)a0;
- (void)_userApplyTrashedState:(short)a0 toAssets:(id)a1 localOnlyDelete:(BOOL)a2;
- (id)objectWithObjectID:(id)a0;
- (void)repairSingletonObjects;
- (id)allImportedPhotosAlbum;
- (id)librarySizesFromDB;
- (id)eventWithName:(id)a0 andImportSessionIdentifier:(id)a1;
- (void)_filterAlbums:(id)a0 toTrashableAlbums:(id *)a1 deletableAlbums:(id *)a2 otherAlbums:(id *)a3;
- (void)_deleteObsoleteMetadataFiles;
- (id)assetWithUUID:(id)a0 inContainer:(id)a1;
- (void)performTransactionAndWait:(id /* block */)a0;

@end
