@class NSMutableDictionary, MFMessageChangeManager_iOS, EDSearchableIndexScheduler, EDMessageQueryParser, NSObject, MFPersistenceDatabase_iOS, EDPersistence, MFWeakObjectCache, MFFileCompressionQueue, MFMessageAttachmentMigrator, NSString, EDPersistenceHookRegistry, MFAttachmentLibraryDataProvider, MFMessageBodyMigrator, NSMutableSet, MFLibrarySearchableIndex, NSCache;
@protocol OS_os_log, EFScheduler, EFSQLValueExpressable, EFCancelable, OS_dispatch_queue;

@interface MFMailMessageLibrary : NSObject <EDMessageChangeHookResponder, EFSignpostable, EFContentProtectionObserver> {
    NSString *_path;
    MFAttachmentLibraryDataProvider *_attachmentDataProvider;
    MFWeakObjectCache *_libraryMessageCache;
    NSMutableDictionary *_mailboxCache;
    NSObject<OS_dispatch_queue> *_queue;
    NSObject<OS_dispatch_queue> *_statsQueue;
    NSString *_activeAccountClause;
    NSString *_nonLocalAccountClause;
    id<EFSQLValueExpressable> _enabledAccountMailboxesExpression;
    int _protectedDataAvailability;
    NSObject<OS_dispatch_queue> *_keyBagQueue;
    NSObject<OS_dispatch_queue> *_conversationCalculationQueue;
    NSMutableSet *_messagesToThreadAtUnlock;
    MFFileCompressionQueue *_compressionQueue;
    MFLibrarySearchableIndex *_searchableIndex;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _searchableIndexLock;
    _Atomic BOOL _suspendedUnderLock;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _mailboxLock;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _addedMessagesMapLock;
    NSCache *_mailboxURLsToMailboxIDs;
    NSCache *_optionsToQueries;
}

@property (class, readonly, nonatomic) BOOL canUsePersistence;
@property (class, readonly) MFMailMessageLibrary *defaultInstance;
@property (class, readonly) NSObject<OS_os_log> *signpostLog;

@property (retain, nonatomic) EDSearchableIndexScheduler *searchableIndexScheduler;
@property (retain, nonatomic) EDMessageQueryParser *queryParser;
@property (retain, nonatomic) id<EFScheduler> fileRemovalAfterCompactionScheduler;
@property (retain, nonatomic) NSMutableDictionary *currentAddedMessagesMap;
@property (retain) MFMessageBodyMigrator *bodyMigrator;
@property (readonly, nonatomic) id<EFCancelable> stateCaptureCancelable;
@property (readonly, nonatomic) EDPersistenceHookRegistry *hookRegistry;
@property (retain) MFMessageAttachmentMigrator *attachmentMigrator;
@property (readonly) EDPersistence *persistence;
@property (readonly) MFPersistenceDatabase_iOS *database;
@property (readonly) MFMessageChangeManager_iOS *messageChangeManager;
@property (readonly, nonatomic) unsigned long long protectedDataAvailability;
@property (readonly, nonatomic) BOOL allowedToAccessProtectedData;
@property (readonly, nonatomic) unsigned long long pendingIndexItemsCount;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;
@property (readonly) unsigned long long signpostID;

+ (id)propertyMapper;
+ (void)removeLibraryOnNextLaunch;
+ (id)log;
+ (void)_renameLibraryAtPath:(id)a0;
+ (void)test_setDefaultInstance:(id)a0;
+ (id)defaultPath;

- (void)scheduleRecurringActivity;
- (BOOL)migrate;
- (void)contentProtectionStateChanged:(int)a0 previousState:(int)a1;
- (id)enabledAccountMailboxesExpression;
- (BOOL)shouldCancel;
- (id)initWithPath:(id)a0;
- (void)deleteAccount:(id)a0;
- (void)test_tearDown;
- (void)start;
- (void).cxx_destruct;
- (void)invalidateAndWait;
- (id)searchableIndex;
- (id)dataProvider;
- (void)reindexAllSearchableItemsWithAcknowledgementHandler:(id /* block */)a0;
- (void)dealloc;
- (void)persistenceDidAddMessages:(id)a0 generationWindow:(id)a1;
- (void)addPostMigrationStep:(id)a0;
- (id)groupedMessagesCountByMailboxMatchingQuery:(unsigned long long)a0 variable:(id)a1;
- (id)sequenceIdentifierForMailbox:(id)a0;
- (void)setSequenceIdentifier:(id)a0 forMailbox:(id)a1;
- (id)urlForMailboxID:(long long)a0;
- (id)mailboxUidForMessage:(id)a0;
- (void)setMessage:(id)a0 isPartial:(BOOL)a1;
- (BOOL)areMessageContentsLocallyAvailable:(id)a0 fullContentsAvailble:(BOOL *)a1;
- (void)setFlags:(unsigned long long)a0 forMessage:(id)a1;
- (void)setSummary:(id)a0 forMessage:(id)a1;
- (id)dataPathForMessage:(id)a0;
- (id)dataPathForMessage:(id)a0 part:(id)a1;
- (id)accountForMessage:(id)a0;
- (id)setFlagsFromDictionary:(id)a0 forMessages:(id)a1;
- (void)setData:(id)a0 forMessage:(id)a1 isPartial:(BOOL)a2;
- (id)dataConsumerForMessage:(id)a0 part:(id)a1;
- (id)messageBasePathForAccount:(id)a0;
- (id)messageWithLibraryID:(long long)a0 options:(unsigned int)a1 inMailbox:(id)a2;
- (id)fileAttributesForMessage:(id)a0;
- (id)groupedMessagesCountForCriterion:(id)a0 groupBy:(unsigned long long)a1;
- (unsigned int)nonDeletedCountForMailbox:(id)a0 includeServerSearchResults:(BOOL)a1 includeThreadSearchResults:(BOOL)a2;
- (unsigned int)allNonDeleteCountForMailbox:(id)a0 includeServerSearchResults:(BOOL)a1 includeThreadSearchResults:(BOOL)a2;
- (id)messagesWithSummariesForMailbox:(id)a0 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a1;
- (id)messagesMatchingCriterion:(id)a0 options:(unsigned int)a1 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a2;
- (id)copyMessageInfosForMailbox:(id)a0;
- (id)messagesMatchingCriterion:(id)a0 options:(unsigned int)a1;
- (id)copyMessagesWithRemoteIDs:(id)a0 options:(unsigned int)a1 inRemoteMailbox:(id)a2;
- (id)serverSearchResultMessagesForMailbox:(id)a0;
- (id)dateOfOldestNonIndexedNonSearchResultMessageInMailbox:(id)a0;
- (id)dateOfOldestNonSearchResultMessageInMailbox:(id)a0;
- (id)filterContiguousMessages:(id)a0 forCriterion:(id)a1 options:(unsigned int)a2;
- (id)messageWithMessageID:(id)a0 options:(unsigned int)a1 inMailbox:(id)a2;
- (id)headerDataForMessage:(id)a0;
- (id)bodyDataForMessage:(id)a0 andHeaderDataIfReadilyAvailable:(id *)a1;
- (id)dataForMimePart:(id)a0 isComplete:(BOOL *)a1;
- (void)storeRemoteContentLinksFromData:(id)a0 forMessage:(id)a1 mimePart:(id)a2;
- (id)dataConsumerForMessage:(id)a0 part:(id)a1 incomplete:(BOOL)a2;
- (id)fullBodyDataForMessage:(id)a0 andHeaderDataIfReadilyAvailable:(id *)a1;
- (id)bodyDataForMessage:(id)a0 andHeaderDataIfReadilyAvailable:(id *)a1 isComplete:(BOOL *)a2;
- (id)messagesForMailbox:(id)a0 olderThanNumberOfDays:(int)a1;
- (void)compactMessages:(id)a0;
- (void)setFlagsFromDictionary:(id)a0 forMessagesInMailboxURLString:(id)a1;
- (void)setNumberOfAttachments:(unsigned int)a0 isSigned:(BOOL)a1 isEncrypted:(BOOL)a2 forMessage:(id)a3;
- (void)compactMailbox:(id)a0;
- (unsigned int)nonDeletedCountForMailbox:(id)a0;
- (BOOL)hasCompleteDataForMimePart:(id)a0;
- (void)invalidateAccount:(id)a0;
- (void)deleteMailboxes:(id)a0 account:(id)a1;
- (BOOL)renameMailboxes:(id)a0 to:(id)a1;
- (unsigned long long)serverUnreadOnlyOnServerCountForMailbox:(id)a0;
- (unsigned int)unreadCountForMailbox:(id)a0;
- (unsigned int)unreadCountForMailbox:(id)a0 matchingCriterion:(id)a1;
- (long long)statusCountDeltaForMailbox:(id)a0;
- (unsigned long long)mostRecentStatusCountForMailbox:(id)a0;
- (void)setMostRecentStatusCount:(unsigned long long)a0 forMailbox:(id)a1;
- (long long)mailboxIDForURLString:(id)a0;
- (id)loadMeetingExternalIDForMessage:(id)a0;
- (id)loadMeetingDataForMessage:(id)a0;
- (id)loadMeetingMetadataForMessage:(id)a0;
- (void)renameOrRemoveDatabaseIfNeeded;
- (void)_setProtectedDataAvailabilityState:(unsigned long long)a0;
- (id)initWithPath:(id)a0 inMemoryIdentifier:(id)a1 userAgent:(id)a2;
- (void)_cancelPendingJournalReconciliation;
- (void)closeDatabaseConnections;
- (id)storedIntegerPropertyWithName:(id)a0;
- (void)setStoredIntegerPropertyWithName:(id)a0 value:(id)a1;
- (void)postOldFlags:(unsigned long long)a0 newFlags:(unsigned long long)a1 forMessage:(id)a2;
- (void)postFlagsChangedForMessages:(id)a0 flags:(id)a1 oldFlagsByMessage:(id)a2;
- (void)removeSearchableItemsForMessages:(id)a0;
- (id)updateFlagsForMessages:(id)a0 changes:(id)a1 transformer:(id /* block */)a2;
- (id)_recipientsForMessagesWithDatabaseIDs:(id)a0 includeTo:(BOOL)a1 includeCC:(BOOL)a2 includeBCC:(BOOL)a3;
- (BOOL)_insertThreadReferences:(id)a0 toMessageWithLibraryID:(long long)a1 usingDatabaseConnection:(id)a2;
- (BOOL)isProtectedDataAvailable:(id)a0;
- (void)_addMessageToThreadAtUnlock:(long long)a0;
- (id)_addThreadingInfoWithContext:(id)a0 usingDatabaseConnection:(id)a1;
- (id)conversationIDsOfMessagesInSameThreadAsMessageWithLibraryID:(long long)a0 messageIDHash:(long long)a1;
- (long long)_conversationIdForMessageIds:(id)a0;
- (unsigned long long)flagsForConversationId:(long long)a0;
- (void)setFlags:(unsigned long long)a0 forConversationId:(long long)a1;
- (id)addMessages:(id)a0 withMailbox:(id)a1 newMessagesByOldMessage:(id)a2 remoteIDs:(id)a3 setFlags:(unsigned long long)a4 addPOPUIDs:(BOOL)a5 dataSectionsByMessage:(id)a6 generationWindow:(id)a7;
- (id)duplicateMessages:(id)a0 newRemoteIDs:(id)a1 forMailbox:(id)a2 setFlags:(unsigned long long)a3 createNewCacheFiles:(BOOL)a4;
- (id)_recipientsForMessageWithDatabaseID:(long long)a0 connection:(id)a1;
- (id)referencesFromHeaders:(id)a0;
- (long long)_findOrCreateDatabaseIDForAddress:(id)a0 comment:(id)a1 cache:(id)a2 connection:(id)a3;
- (long long)_findOrCreateDatabaseIDForGlobalData:(long long)a0 cache:(id)a1 connection:(id)a2;
- (long long)_findOrCreateDatabaseIDForSubject:(id)a0 cache:(id)a1 connection:(id)a2;
- (long long)_findOrCreateDatabaseIDForSummary:(id)a0 cache:(id)a1 connection:(id)a2;
- (BOOL)_addRecipients:(id)a0 toMessageWithDatabaseID:(long long)a1 cache:(id)a2 connection:(id)a3;
- (long long)addReferenceForContext:(id)a0 usingDatabaseConnection:(id)a1 generationWindow:(id)a2 mergeHandler:(id /* block */)a3;
- (BOOL)_writeEmlxFile:(id)a0 withBodyData:(id)a1 protectionClass:(int)a2;
- (id)_libraryMessageWithLibraryID:(long long)a0 wasCached:(BOOL *)a1;
- (long long)_findOrCreateDatabaseIDForValue:(id)a0 inTable:(id)a1 column:(id)a2 cache:(id)a3 connection:(id)a4 created:(BOOL *)a5;
- (void)_removeDataFilesForGlobalID:(long long)a0;
- (id)_selectExpressionForMessageWithAvailableTables:(unsigned int)a0;
- (void)_iterateStatement:(id)a0 connection:(id)a1 withProgressMonitor:(id)a2 andRowHandler:(void /* function */ *)a3 context:(const struct { id x0; id x1; id x2; unsigned int x3; float x4; unsigned long long x5; double x6; unsigned int x7; unsigned int x8; struct sqlite3 *x9; BOOL x10; id x11; BOOL x12; } *)a4;
- (id)_messagesForMailbox:(id)a0 olderThanNumberOfDays:(int)a1 limit:(unsigned long long)a2;
- (void)sendMessagesMatchingCriterion:(id)a0 to:(id)a1 options:(unsigned int)a2 baseTable:(unsigned int)a3 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a4;
- (void)sendMessagesMatchingCriterion:(id)a0 to:(id)a1 options:(unsigned int)a2 baseTable:(unsigned int)a3;
- (id)_firstDateForQuery:(id)a0 inMailbox:(id)a1;
- (id)queryForCriterion:(id)a0 connection:(id)a1 options:(unsigned int)a2 baseTable:(unsigned int)a3;
- (long long)_int64ForQuery:(id)a0 connection:(id)a1 textArgument:(id)a2;
- (id)queryForCriterion:(id)a0 connection:(id)a1 options:(unsigned int)a2 baseTable:(unsigned int)a3 isSubquery:(BOOL)a4;
- (void)_sendMessagesForStatement:(id)a0 connection:(id)a1 to:(id)a2 options:(unsigned int)a3 timestamp:(unsigned long long)a4;
- (unsigned int)unreadCountForAggregatedMailboxes:(id)a0 matchingCriterion:(id)a1;
- (unsigned int)unreadCountForAggregatedMailboxes:(id)a0;
- (unsigned int)_flaggedCountForAggregatedMailboxes:(id)a0;
- (unsigned int)_attachmentCountForAggregatedMailboxes:(id)a0;
- (unsigned int)_includesMeCountForAggregatedMailboxes:(id)a0;
- (unsigned int)countOfRelatedMessagesMatchingCriterion:(id)a0 forConversationsContainingMessagesMatchingCriterion:(id)a1 forMailboxCriterion:(id)a2;
- (id)queryForCriterion:(id)a0 connection:(id)a1 options:(unsigned int)a2;
- (unsigned int)_computeUnreadCountForMailboxes:(id)a0;
- (id)_queryForMailboxesIDsFromMailboxes:(id)a0;
- (int)_integerForQuery:(id)a0 withTextArgument:(id)a1;
- (unsigned int)flaggedCountForMailbox:(id)a0;
- (unsigned int)attachmentCountForMailbox:(id)a0;
- (unsigned int)includesMeCountForMailbox:(id)a0;
- (unsigned long long)countMessagesMatchingCriterion:(id)a0;
- (unsigned int)nonDeletedCountForAggregatedMailboxes:(id)a0 includeServerSearchResults:(BOOL)a1 includeThreadSearchResults:(BOOL)a2;
- (id)dataPathForMessage:(id)a0 type:(int)a1;
- (id)_selectClauseForOptions:(unsigned int)a0 protectedDataAvailable:(BOOL)a1;
- (id)_messageForRow:(id)a0 options:(unsigned int)a1 timestamp:(unsigned long long)a2 connection:(id)a3 isProtectedDataAvailable:(BOOL)a4;
- (BOOL)_canSelectMessagesWithOptions:(unsigned int)a0 connection:(id)a1;
- (id)messageWithLibraryID:(long long)a0 options:(unsigned int)a1 inMailbox:(id)a2 temporarilyUnavailable:(BOOL *)a3;
- (id)_keyForOptions:(unsigned int)a0 protectedDataAvailable:(BOOL)a1 mailboxAvailable:(BOOL)a2 mailboxCached:(BOOL)a3;
- (id)remoteStoreForMessage:(id)a0;
- (id)_copyReferenceHashesWithoutMessagesForMessageWithConversation:(id)a0;
- (id)_getReferencesForHashesWithOwners:(id)a0;
- (id)stringForQuery:(id)a0 monitor:(id)a1;
- (void)reloadMailboxCacheWithConnection:(id)a0;
- (id)mailboxURLForMessage:(id)a0;
- (void)_schedulePeriodicStatisticsLogging;
- (void)_scheduleIncrementalVacuum;
- (void)compactMessages:(id)a0 permanently:(BOOL)a1;
- (void)_notifyDidCompact:(BOOL)a0 messages:(id)a1 mailboxes:(id)a2;
- (BOOL)_deleteMessages:(id)a0 connection:(id)a1;
- (void)_removeSearchableItemsWithLibraryIDs:(id)a0;
- (BOOL)cleanupProtectedTables;
- (BOOL)_addAddressesFromRecipientsForMessages:(id)a0 toSet:(id)a1 connection:(id)a2;
- (BOOL)_deleteMessages:(id)a0 andCleanUpAddresses:(id)a1 subjects:(id)a2 summaries:(id)a3 connection:(id)a4;
- (void)_removeGlobalDataForMessagesIfNecessary:(id)a0 connection:(id)a1;
- (id)_existingValuesForColumn:(id)a0 table:(id)a1 fromValues:(id)a2 connection:(id)a3;
- (BOOL)_deleteRows:(id)a0 fromTable:(id)a1 connection:(id)a2;
- (long long)_maxRowIDInSet:(id)a0;
- (void)removeAllMessagesFromMailbox:(id)a0 removeMailbox:(BOOL)a1 andNotify:(BOOL)a2;
- (void)removeSearchableItemsForMailbox:(id)a0;
- (void)storeRemoteContentLinksFromFullData:(id)a0 forMessage:(id)a1;
- (id)dataConsumerForMessage:(id)a0 isPartial:(BOOL)a1;
- (BOOL)_setSummary:(id)a0 forMessageWithRowID:(long long)a1 connection:(id)a2;
- (id)loadData:(id)a0 forMessage:(id)a1 usingBlock:(id /* block */)a2;
- (id)bodyDataAtPath:(id)a0 headerData:(id *)a1;
- (id)headerDataAtPath:(id)a0;
- (id)_equalToMailboxIDsFromCriterion:(id)a0;
- (id)_activeAccountsClause;
- (id)queryForCriterion:(id)a0 connection:(id)a1 options:(unsigned int)a2 baseTable:(unsigned int)a3 isSubquery:(BOOL)a4 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a5;
- (void)sendMessagesMatchingCriterion:(id)a0 to:(id)a1 options:(unsigned int)a2 baseTable:(unsigned int)a3 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a4 success:(BOOL *)a5;
- (id)sqlQueryWithConversionLogForQuery:(id)a0;
- (void)iterateMessagesMatchingCriterion:(id)a0 withResultHandler:(id)a1 options:(unsigned int)a2 withMonitor:(id)a3;
- (void)sendMessagesMatchingCriterion:(id)a0 to:(id)a1 options:(unsigned int)a2 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a3;
- (void)sendMessagesMatchingCriterion:(id)a0 to:(id)a1 options:(unsigned int)a2;
- (void)removeSearchableItemsForAccount:(id)a0;
- (void)rebuildActiveAccountMailboxesExpression:(id)a0;
- (void)rebuildActiveAccountsClauseWithActiveAccounts:(id)a0 inactiveAccounts:(id)a1;
- (id)_mailboxesClauseForAccounts:(id)a0;
- (BOOL)_shouldLogDatabaseStats;
- (void)_logStatistics;
- (void)_scheduleJournalReconciliation;
- (void)updateThreadingInfoForMessage:(id)a0 fromHeaders:(id)a1;
- (void)performIncrementalVacuumForSchema:(id)a0;
- (id)_nonLocalAccountsClause;
- (void)removeSearchableItemsForAccount:(id)a0 mailboxID:(long long)a1;
- (id)_stringsForIndexSet:(id)a0;
- (void)reindexSearchableItemsWithIdentifiers:(id)a0 acknowledgementHandler:(id /* block */)a1;
- (BOOL)_shouldStoreRemoteContentForMessage:(id)a0;
- (BOOL)_storeRemoteContentLinksCachedOnMessage:(id)a0 linksToVerify:(id *)a1;
- (void)_storeRemoteContentLinksFromFullData:(id)a0 forMessage:(id)a1 linksToVerify:(id)a2;
- (void)_storeRemoteContentLinksFromHeaderData:(id)a0 bodyData:(id)a1 forMessage:(id)a2 linksToVerify:(id)a3;
- (void)_storeRemoteContentLinksFromData:(id)a0 forMimePart:(id)a1 linksToVerify:(id)a2;
- (void)_setSuspendedUnderLock:(BOOL)a0;
- (void)bodyMigrationFinished;
- (void)attachmentMigrationFinished;
- (void)updateFlagsForMessagesInPlace:(id)a0 success:(BOOL *)a1;
- (void)notifyNewDataAvailableForMessages:(id)a0;
- (id)duplicateMessages:(id)a0 newRemoteIDs:(id)a1 forMailbox:(id)a2 setFlags:(unsigned long long)a3 clearFlags:(unsigned long long)a4 messageFlagsForMessages:(id)a5 createNewCacheFiles:(BOOL)a6;
- (void)willStartPersistenceDidAddMessages:(id)a0;
- (void)didFinishPersistenceDidAddMessages:(id)a0;
- (void)updateAdditionalThreadingInfoForSentMessageWithHeaders:(id)a0 externalConversationID:(long long)a1;
- (void)iterateStatement:(struct sqlite3_stmt { } *)a0 connection:(id)a1 withProgressMonitor:(id)a2 andRowHandler:(void /* function */ *)a3 context:(void *)a4;
- (id)messagesForMailbox:(id)a0 limit:(unsigned long long)a1;
- (long long)_libraryIDForOldestKnownMessageInMailbox:(id)a0;
- (id)orderedBatchOfMessagesEndingAtRowId:(long long)a0 limit:(unsigned int)a1 success:(BOOL *)a2;
- (long long)countDistinctMessagesMatchingCriterion:(id)a0;
- (unsigned int)attachmentCountForMailboxes:(id)a0;
- (unsigned int)nonDeletedCountForAggregatedMailboxes:(id)a0;
- (unsigned int)totalCountForMailbox:(id)a0;
- (unsigned long long)indexedCountForMailbox:(id)a0 limit:(unsigned long long)a1;
- (void)setServerUnreadOnlyOnServerCount:(unsigned long long)a0 forMailbox:(id)a1;
- (void)setLastSyncAndMostRecentStatusCount:(long long)a0 forMailbox:(id)a1;
- (void)increaseProtectionOnFileForMessage:(id)a0;
- (id)messageWithRemoteID:(id)a0 inRemoteMailbox:(id)a1;
- (id)sequenceIdentifierForMessagesWithRemoteIDs:(id)a0 inMailbox:(id)a1;
- (void)setSequenceIdentifier:(id)a0 forMessageWithLibraryID:(long long)a1;
- (void)setSequenceIdentifier:(id)a0 forMessagesWithRemoteIDs:(id)a1 inMailbox:(id)a2;
- (id)messagesWithMessageIDHeader:(id)a0;
- (long long)loadMoreMessagesForThreadContainingMessage:(id)a0 hasNoMoreMessages:(BOOL *)a1;
- (id)stringForQuery:(id)a0;
- (void)reloadMailboxCacheIfNecessaryWithConnection:(id)a0;
- (id)mailboxURLsForIDs:(id)a0;
- (long long)mailboxIDForURLString:(id)a0 createIfNecessary:(BOOL)a1;
- (void)clearServerSearchFlagsForMessagesWithLibraryIDs:(id)a0;
- (void)setConversationInfo:(long long)a0 syncKey:(id)a1 flags:(unsigned long long)a2;
- (long long)deleteAttachmentsForMessage:(id)a0 inMailboxFileURL:(id)a1;
- (void)fileURLForAttachmentPersistentID:(id)a0 messageID:(id)a1 result:(id /* block */)a2;
- (id)dataConsumerForMessage:(id)a0;
- (void)setData:(id)a0 forMessageToAppend:(id)a1;
- (BOOL)_setMessageData:(id)a0 libraryID:(long long)a1 part:(id)a2 partial:(BOOL)a3 complete:(BOOL)a4 connection:(id)a5;
- (id)bodyDataForMessage:(id)a0;
- (id)queryForCriterion:(id)a0 connection:(id)a1 options:(unsigned int)a2 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a3;
- (void)iterateMessagesMatchingQuery:(id)a0 withResultHandler:(id)a1 options:(unsigned int)a2 withMonitor:(id)a3;
- (void)iterateMessagesMatchingCriterion:(id)a0 options:(unsigned int)a1 handler:(id /* block */)a2;
- (id)messagesMatchingCriterion:(id)a0 options:(unsigned int)a1 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a2 success:(BOOL *)a3;
- (id)messagesMatchingCriterion:(id)a0 options:(unsigned int)a1 success:(BOOL *)a2;
- (void)rebuildActiveAccountsClausesAndExpressionsWithAccounts:(id)a0;
- (void)deletePOPUID:(id)a0 inMailbox:(id)a1;
- (id)UIDsToDeleteInMailbox:(id)a0;
- (id)allUIDsInMailbox:(id)a0;
- (id)hiddenPOPUIDsInMailbox:(id)a0;
- (id)_indexSetOfMessagesDeleted;
- (BOOL)_canAccessProtectedData;
- (void)journalWasReconciled;
- (void)journalReconciliationFailed;
- (void)handleFailedMigration;
- (id)indexableMessagesWhere:(id)a0 sortedBy:(id)a1 limit:(long long)a2 options:(unsigned int)a3;
- (id)_libraryMessageCache;
- (id)stringFromAllMailboxUnreadCount;
- (BOOL)messageDataExistsInDatabaseForMessageLibraryID:(long long)a0 part:(id)a1 length:(unsigned long long *)a2;
- (void)storeRemoteContentLinksFromHeaderData:(id)a0 bodyData:(id)a1 forMessage:(id)a2;

@end
