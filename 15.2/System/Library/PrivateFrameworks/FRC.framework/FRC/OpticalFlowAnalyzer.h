@class NSObject, FRCScaler;
@protocol MTLComputePipelineState, OS_os_log;

@interface OpticalFlowAnalyzer : FRCMetalBase {
    id<MTLComputePipelineState> _flowStatisticsKernel;
    id<MTLComputePipelineState> _crossFlowStatisticsKernel;
    id<MTLComputePipelineState> _motionHistogramsKernel;
    NSObject<OS_os_log> *_logger;
    float _consistentFlowRandomness;
    float _signErrFlowRandomness;
    float _signAreaFlowRandomness;
    float _zigzagFlowRandomness;
    float _flowDeformation;
    float _flowDeformationSum;
    float _prevFlowRandomnessErr;
    float _prevFlowRandomnessArea;
    BOOL _prevFlowDeformation;
    BOOL _isLargeRandomnessErr;
    struct { BOOL consistency; BOOL randomness; BOOL deformation; } _safeToInterpolate;
    float jsonConsistencyAreaThreshold;
    float jsonConsistencyAreaPercentageThreshold;
    float jsonConsistencySafeThresholdsForDownsampled[8];
    float jsonConsistencySafeThresholdsForNonDownsampled[8];
    float jsonConsistencySafeThresholdsForDownsampledDelta[8];
    float jsonConsistencySafeThresholdsForNonDownsampledDelta[8];
    float jsonConsistencySafeThresholdsForDownsampledSloMo[12];
    float jsonConsistencySafeThresholdsForNonDownsampledSloMo[12];
    float consistencySafeThresholdsScale;
    float consistencySafeThresholdsScaleForLargeRandomnessErr;
    float jsonRandomnessScoreThreshold;
    float jsonRandomnessScoreThresholdLow;
    float jsonRandomnessAreaThreshold;
    float jsonRandomnessAreaPercentageThresholdHigh;
    float jsonRandomnessAreaPercentageThresholdLow;
    float jsonRandomnessErrThreshold;
    float jsonRandomnessAreaScale;
    float randomnessAreaScale;
    float jsonRandomnessErrorChangeRatioThreshold;
    float jsonRandomnessAreaChangeRatioThreshold;
    float jsonRandomnessErrorChangeRatioThresholdForCameraMotion;
    float jsonRandomnessAreaChangeRatioThresholdForCameraMotion;
    float jsonRandomnessErrorChangeRatioThresholdForStatic;
    float jsonRandomnessAreaChangeRatioThresholdForStatic;
    float randomnessErrorChangeRatioThreshold;
    float randomnessAreaChangeRatioThreshold;
    float jsonConsistentRandomFlowThreshold;
    float jsonConsistentRandomFlowResetAreaChangeRatio;
    float jsonZigzagRandomFlowThreshold;
    float jsonDeformationFlowThreshold;
    float jsonDeformationFlowSumThreshold;
    float jsonHistogramsAnalysisLargeObjectSizeThreshold;
    float jsonHistogramsAnalysisSmallObjectSizeThreshold;
    float jsonSideMotionDominanceThreshold;
    unsigned int jsonSideMotionPixelCountThreshold;
    BOOL _hasCameraMotion;
    BOOL _hasDominantMovingLargeObjects;
    BOOL _hasDominantMovingSmallObjects;
    BOOL _hasStaticBackground;
    struct { BOOL hasStaticBackground; int dominantDirection; int relativeDominantDirection; long long hasSpecialMotion; BOOL hasCameraRotaion; } _motionHistogramsAnalysis;
    struct { BOOL hasStaticBackground; int dominantDirection; int relativeDominantDirection; long long hasSpecialMotion; BOOL hasCameraRotaion; } _prevMotionHistogramsAnalysis;
    struct { unsigned int frameMagnitude[8]; unsigned int frameDirection[8]; unsigned int topLeftDirection[4]; unsigned int topRightDirection[4]; unsigned int bottomLeftDirection[4]; unsigned int bottomRightDirection[4]; unsigned int numLowMotionOppositeDirectionBlocks; unsigned int areaLowMotionOppositeDirectionBlocks; unsigned int leftSideDirection[4]; unsigned int rightSideDirection[4]; unsigned int leftSideAverageMagnitude; unsigned int rightSideAverageMagnitude; unsigned int topSideDirection[4]; unsigned int bottomSideDirection[4]; unsigned int topSideAverageMagnitude; unsigned int bottomSideAverageMagnitude; } _motionHistograms;
    unsigned long long _size;
}

@property (nonatomic) long long usage;
@property (nonatomic) BOOL inputScaling;
@property (nonatomic) long long inputRotation;
@property (nonatomic) BOOL sloMo;
@property (nonatomic) BOOL isSmallDrops;
@property (nonatomic) BOOL isContinuousDrops;
@property (weak, nonatomic) FRCScaler *scaler;
@property (readonly, nonatomic) BOOL isSafeToInterpolate;
@property (nonatomic) BOOL handDetectionEnabled;
@property (nonatomic) BOOL bodyDetectionEnabled;
@property (nonatomic) BOOL humanDetectionEnabled;
@property (nonatomic) long long retimingRecipe;
@property (readonly, nonatomic) unsigned long long gatingCause;
@property (readonly, nonatomic) float flowConsistencyFrameScore;
@property (readonly, nonatomic) float flowConsistencyRegionScore;
@property (nonatomic) char *deformationBinaryMap;
@property (nonatomic) int *deformationBlockRanges;
@property (nonatomic) BOOL visualizationEnabled;

- (void).cxx_destruct;
- (id)init;
- (void)reset;
- (void)setupMetal;
- (void)setDetectorsFromDefaults;
- (struct { struct { long long x0; int x1; unsigned int x2; long long x3; } x0; unsigned long long x1; float x2; float x3; float x4; float x5; float x6; float x7; float x8; float x9; unsigned long long x10; float *x11; unsigned long long x12; float *x13; unsigned long long x14; float *x15; unsigned long long x16; float *x17; unsigned long long x18; float *x19; unsigned long long x20; float *x21; unsigned long long x22; float *x23; unsigned long long x24; float *x25; unsigned long long x26; float *x27; unsigned long long x28; float *x29; })analyzeOpticalFlowForward:(struct __CVBuffer { } *)a0 backward:(struct __CVBuffer { } *)a1 numberOfFrames:(unsigned long long)a2 timeGap:(struct { long long x0; int x1; unsigned int x2; long long x3; })a3 firstFaceHandLegRectangles:(id)a4 secondFaceHandLegRectangles:(id)a5 flowResFrame:(struct __CVBuffer { } *)a6;
- (struct { float x0; float x1; })safeThresholdWithtimeGap:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0 isDownsampled:(BOOL)a1;
- (BOOL)checkSafetyByScoreAndArea:(struct { struct { long long x0; int x1; unsigned int x2; long long x3; } x0; unsigned long long x1; float x2; float x3; float x4; float x5; float x6; float x7; float x8; float x9; unsigned long long x10; float *x11; unsigned long long x12; float *x13; unsigned long long x14; float *x15; unsigned long long x16; float *x17; unsigned long long x18; float *x19; unsigned long long x20; float *x21; unsigned long long x22; float *x23; unsigned long long x24; float *x25; unsigned long long x26; float *x27; unsigned long long x28; float *x29; } *)a0;
- (BOOL)checkSafetyByStripConsistency:(struct { struct { long long x0; int x1; unsigned int x2; long long x3; } x0; unsigned long long x1; float x2; float x3; float x4; float x5; float x6; float x7; float x8; float x9; unsigned long long x10; float *x11; unsigned long long x12; float *x13; unsigned long long x14; float *x15; unsigned long long x16; float *x17; unsigned long long x18; float *x19; unsigned long long x20; float *x21; unsigned long long x22; float *x23; unsigned long long x24; float *x25; unsigned long long x26; float *x27; unsigned long long x28; float *x29; } *)a0;
- (BOOL)checkSafetyByBlockConsistency:(struct { struct { long long x0; int x1; unsigned int x2; long long x3; } x0; unsigned long long x1; float x2; float x3; float x4; float x5; float x6; float x7; float x8; float x9; unsigned long long x10; float *x11; unsigned long long x12; float *x13; unsigned long long x14; float *x15; unsigned long long x16; float *x17; unsigned long long x18; float *x19; unsigned long long x20; float *x21; unsigned long long x22; float *x23; unsigned long long x24; float *x25; unsigned long long x26; float *x27; unsigned long long x28; float *x29; } *)a0;
- (struct { struct { long long x0; int x1; unsigned int x2; long long x3; } x0; unsigned long long x1; float x2; float x3; float x4; float x5; float x6; float x7; float x8; float x9; unsigned long long x10; float *x11; unsigned long long x12; float *x13; unsigned long long x14; float *x15; unsigned long long x16; float *x17; unsigned long long x18; float *x19; unsigned long long x20; float *x21; unsigned long long x22; float *x23; unsigned long long x24; float *x25; unsigned long long x26; float *x27; unsigned long long x28; float *x29; })calcFlowStatisticsForwardFlowTexture:(id)a0 backwardFlowTexture:(id)a1 faceHandLegRectangles:(id)a2 frameTexture:(id)a3;
- (void)analyzeAggregatedStatistics:(struct { struct { long long x0; int x1; unsigned int x2; long long x3; } x0; unsigned long long x1; float x2; float x3; float x4; float x5; float x6; float x7; float x8; float x9; unsigned long long x10; float *x11; unsigned long long x12; float *x13; unsigned long long x14; float *x15; unsigned long long x16; float *x17; unsigned long long x18; float *x19; unsigned long long x20; float *x21; unsigned long long x22; float *x23; unsigned long long x24; float *x25; unsigned long long x26; float *x27; unsigned long long x28; float *x29; } *)a0;
- (id)findFaceHandLegBlocksFromRectangles:(id)a0 blockWidth:(unsigned long long)a1 blockHeight:(unsigned long long)a2;
- (struct { struct { long long x0; int x1; unsigned int x2; long long x3; } x0; unsigned long long x1; float x2; float x3; float x4; float x5; float x6; float x7; float x8; float x9; unsigned long long x10; float *x11; unsigned long long x12; float *x13; unsigned long long x14; float *x15; unsigned long long x16; float *x17; unsigned long long x18; float *x19; unsigned long long x20; float *x21; unsigned long long x22; float *x23; unsigned long long x24; float *x25; unsigned long long x26; float *x27; unsigned long long x28; float *x29; })processGPUOutputs:(struct { float x0; } *)a0 blockWidth:(unsigned long long)a1 blockHeight:(unsigned long long)a2 faceHandLegBoundingBoxBlocks:(id)a3;
- (void)calcStripConsistency:(float *)a0 stripSize:(unsigned long long)a1 numStrips:(unsigned int)a2;
- (void)printStripScores:(struct { struct { long long x0; int x1; unsigned int x2; long long x3; } x0; unsigned long long x1; float x2; float x3; float x4; float x5; float x6; float x7; float x8; float x9; unsigned long long x10; float *x11; unsigned long long x12; float *x13; unsigned long long x14; float *x15; unsigned long long x16; float *x17; unsigned long long x18; float *x19; unsigned long long x20; float *x21; unsigned long long x22; float *x23; unsigned long long x24; float *x25; unsigned long long x26; float *x27; unsigned long long x28; float *x29; } *)a0;
- (void)printFaceHandLegRectangles:(id)a0;
- (struct { float x0; float x1; float x2; })analyzeFlowRandomnessWithPrevFlowBackward:(struct __CVBuffer { } *)a0 forward:(struct __CVBuffer { } *)a1 lastFrameDuration:(struct { long long x0; int x1; unsigned int x2; long long x3; })a2 timeGap:(struct { long long x0; int x1; unsigned int x2; long long x3; })a3 lastNumberOfFrames:(unsigned long long)a4 numberOfFrames:(unsigned long long)a5 flowResFrame:(struct __CVBuffer { } *)a6;
- (struct { float x0; float x1; float x2; })calcCrossFlowStatisticsPrevBackwardFlowTexture:(id)a0 forwardFlowTexture:(id)a1 frameTexture:(id)a2 flowScaleBuffer:(id)a3;
- (struct { float x0; float x1; float x2; })processGPUOutputsRandomness:(struct { float x0; } *)a0 blockWidth:(unsigned long long)a1 blockHeight:(unsigned long long)a2;
- (void)calcMotionHistogramForwardFlowTexture:(id)a0 frameTexture:(id)a1;
- (void)analyzeMotionHistograms;
- (void)analyzeDeformation;
- (void)modulateGatingParametersFromMotionHistogramsAnalysis;
- (void)processGPUOutputsHistograms:(struct { int x0[8]; int x1[8]; } *)a0 blockWidth:(unsigned long long)a1 blockHeight:(unsigned long long)a2;
- (void)processGPUOutputsHistogramsForDeformation:(struct { int x0[8]; int x1[8]; } *)a0 blockWidth:(unsigned long long)a1 blockHeight:(unsigned long long)a2;
- (void)convertOctantDirectionHistogram:(int *)a0 toPerpendicularQuadrantHistogram:(unsigned int *)a1;
- (unsigned int)averageMagnitude:(unsigned int *)a0;
- (BOOL)detectStaticBackground;
- (void)detectDominantDirection;
- (long long)detectSpecialMotion;
- (BOOL)detectCameraRotation;
- (int)detectDominantDirectionInRegion:(unsigned int *)a0;
- (void)printSideHistograms;
- (void)isSafeToInterpolateForConsistencyGatingWithFlowForward:(struct __CVBuffer { } *)a0 flowBackward:(struct __CVBuffer { } *)a1 firstFrameFaceHandLegInfo:(id)a2 secondFrameFaceHandLegInfo:(id)a3 numberOfFrames:(unsigned long long)a4 timeGap:(struct { long long x0; int x1; unsigned int x2; long long x3; })a5 flowResFrame:(struct __CVBuffer { } *)a6;
- (id)extractFaceHandLegInfoFromBuffer:(struct __CVBuffer { } *)a0;
- (void)isSafeToInterpolateForRandomnessGatingWithPrevFlowBackward:(struct __CVBuffer { } *)a0 flowForward:(struct __CVBuffer { } *)a1 lastFrameDuration:(struct { long long x0; int x1; unsigned int x2; long long x3; })a2 timeGap:(struct { long long x0; int x1; unsigned int x2; long long x3; })a3 lastNumberOfFrames:(unsigned long long)a4 numberOfFrames:(unsigned long long)a5 flowResFrame:(struct __CVBuffer { } *)a6;
- (void)modulateGatingParametersWithFlowForward:(struct __CVBuffer { } *)a0 flowResFrame:(struct __CVBuffer { } *)a1;
- (void)isSafeToInterpolateForDeformationGating;
- (void)updateGatingStats;

@end
