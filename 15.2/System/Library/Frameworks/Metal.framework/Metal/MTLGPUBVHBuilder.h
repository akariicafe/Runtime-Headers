@protocol MTLLibrary, MTLDevice;

@interface MTLGPUBVHBuilder : MTLBVHBuilder {
    id<MTLDevice> _device;
    unsigned long long _threadgroupSize;
    id<MTLLibrary> _library;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _pipelineCacheLock;
    struct PipelineCache<PipelineKey> { struct unordered_map<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>, PipelineCache<PipelineKey>::Hasher, std::equal_to<PipelineCache<PipelineKey>::HashKey>, std::allocator<std::pair<const PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>>> { struct __hash_table<std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>, std::__unordered_map_hasher<PipelineCache<PipelineKey>::HashKey, std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>, PipelineCache<PipelineKey>::Hasher, std::equal_to<PipelineCache<PipelineKey>::HashKey>, true>, std::__unordered_map_equal<PipelineCache<PipelineKey>::HashKey, std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>, std::equal_to<PipelineCache<PipelineKey>::HashKey>, PipelineCache<PipelineKey>::Hasher, true>, std::allocator<std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>>> { struct unique_ptr<std::__hash_node_base<std::__hash_node<std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>, void *> *> *[], std::__bucket_list_deallocator<std::allocator<std::__hash_node_base<std::__hash_node<std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>, void *> *> *>>> { struct __compressed_pair<std::__hash_node_base<std::__hash_node<std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>, void *> *> **, std::__bucket_list_deallocator<std::allocator<std::__hash_node_base<std::__hash_node<std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>, void *> *> *>>> { void **__value_; struct __bucket_list_deallocator<std::allocator<std::__hash_node_base<std::__hash_node<std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>, void *> *> *>> { struct __compressed_pair<unsigned long, std::allocator<std::__hash_node_base<std::__hash_node<std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>, void *> *> *>> { unsigned long long __value_; } __data_; } __value_; } __ptr_; } __bucket_list_; struct __compressed_pair<std::__hash_node_base<std::__hash_node<std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>, void *> *>, std::allocator<std::__hash_node<std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>, void *>>> { struct __hash_node_base<std::__hash_node<std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>, void *> *> { void *__next_; } __value_; } __p1_; struct __compressed_pair<unsigned long, std::__unordered_map_hasher<PipelineCache<PipelineKey>::HashKey, std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>, PipelineCache<PipelineKey>::Hasher, std::equal_to<PipelineCache<PipelineKey>::HashKey>, true>> { unsigned long long __value_; } __p2_; struct __compressed_pair<float, std::__unordered_map_equal<PipelineCache<PipelineKey>::HashKey, std::__hash_value_type<PipelineCache<PipelineKey>::HashKey, id<MTLComputePipelineState>>, std::equal_to<PipelineCache<PipelineKey>::HashKey>, PipelineCache<PipelineKey>::Hasher, true>> { float __value_; } __p3_; } __table_; } map; } _pipelineCache;
}

+ (BOOL)supportsDevice:(id)a0;
+ (unsigned long long)getBatchCountForFragmentCapacity:(unsigned long long)a0;
+ (unsigned long long)prefixSumScratchBufferSizeWithCapacity:(unsigned long long)a0;
+ (unsigned long long)breadthFirstLayoutScratchBufferSizeWithLeafNodeCapacity:(unsigned long long)a0;

- (id)initWithDevice:(id)a0;
- (void).cxx_destruct;
- (void)dealloc;
- (id).cxx_construct;
- (id)newPipelineWithKey:(struct PipelineKey { unsigned int x0; unsigned int x1; unsigned int x2; unsigned int x3; BOOL x4; unsigned int x5; unsigned int x6; unsigned int x7; unsigned int x8; float x9; float x10; float x11; BOOL x12; BOOL x13; BOOL x14; unsigned int x15; BOOL x16; })a0;
- (BOOL)useSpatialSplitsForDescriptor:(id)a0;
- (BOOL)useResourceBufferForDescriptor:(id)a0;
- (id)getPipelineWithKey:(struct PipelineKey { unsigned int x0; unsigned int x1; unsigned int x2; unsigned int x3; BOOL x4; unsigned int x5; unsigned int x6; unsigned int x7; unsigned int x8; float x9; float x10; float x11; BOOL x12; BOOL x13; BOOL x14; unsigned int x15; BOOL x16; })a0;
- (unsigned long long)getGenericBVHSizeForDescriptor:(id)a0 nodeOffset:(unsigned long long *)a1 fragmentOffset:(unsigned long long *)a2 fragmentIndexOffset:(unsigned long long *)a3 childIndexOffset:(unsigned long long *)a4;
- (id)getPipeline:(unsigned long long)a0;
- (id)newIndirectBufferWithRetainedResources:(id)a0;
- (void)dispatchIndirect:(id)a0 indirectBuffer:(id)a1 indirectBufferOffset:(unsigned long long)a2 threadCountBuffer:(id)a3 threadCountBufferOffset:(unsigned long long)a4 threadCountIndex:(unsigned long long)a5 threadgroupDivisor:(unsigned long long)a6 encoder:(id)a7;
- (id)getPipeline:(unsigned long long)a0 descriptor:(id)a1;
- (void)dispatchIndirect:(id)a0 indirectBuffer:(id)a1 indirectBufferOffset:(unsigned long long)a2 counterBuffer:(id)a3 counterBufferOffset:(unsigned long long)a4 counterIndex:(unsigned long long)a5 threadgroupDivisor:(unsigned long long)a6 encoder:(id)a7;
- (void)setCounterInBuffer:(id)a0 offset:(unsigned long long)a1 index:(unsigned long long)a2 value:(unsigned long long)a3 encoder:(id)a4;
- (void)swapCountersInBuffer:(id)a0 offset:(unsigned long long)a1 counterIndex1:(unsigned long long)a2 counterIndex2:(unsigned long long)a3 encoder:(id)a4;
- (id)retainedResourcesArrayWithEncoder:(id)a0;
- (id)newResourceBufferWithDescriptor:(id)a0 retainedResources:(id)a1;
- (void)getPolygonFragmentsWithEncoder:(id)a0 descriptor:(id)a1 fragmentBuffer:(id)a2 fragmentBufferOffset:(unsigned long long)a3 fragmentCountBuffer:(id)a4 fragmentCountBufferOffset:(unsigned long long)a5 boundsMinBuffer:(id)a6 boundsMinBufferOffset:(unsigned long long)a7 boundsMaxBuffer:(id)a8 boundsMaxBufferOffset:(unsigned long long)a9 boundsEndMinBuffer:(id)a10 boundsEndMinBufferOffset:(unsigned long long)a11 boundsEndMaxBuffer:(id)a12 boundsEndMaxBufferOffset:(unsigned long long)a13 boundsEndTimeBuffer:(id)a14 boundsEndTimeBufferOffset:(unsigned long long)a15 boundsStartTimeBuffer:(id)a16 boundsStartTimeBufferOffset:(unsigned long long)a17 resourceBuffer:(id)a18;
- (void)getBoundingBoxFragmentsWithEncoder:(id)a0 descriptor:(id)a1 fragmentBuffer:(id)a2 fragmentBufferOffset:(unsigned long long)a3 fragmentCountBuffer:(id)a4 fragmentCountBufferOffset:(unsigned long long)a5 boundsMinBuffer:(id)a6 boundsMinBufferOffset:(unsigned long long)a7 boundsMaxBuffer:(id)a8 boundsMaxBufferOffset:(unsigned long long)a9 boundsEndMinBuffer:(id)a10 boundsEndMinBufferOffset:(unsigned long long)a11 boundsEndMaxBuffer:(id)a12 boundsEndMaxBufferOffset:(unsigned long long)a13 boundsEndTimeBuffer:(id)a14 boundsEndTimeBufferOffset:(unsigned long long)a15 boundsStartTimeBuffer:(id)a16 boundsStartTimeBufferOffset:(unsigned long long)a17 resourceBuffer:(id)a18;
- (void)buildWithEncoder:(id)a0 descriptor:(id)a1 scratchBuffer:(id)a2 scratchBufferOffset:(unsigned long long)a3 fragmentBuffer:(id)a4 fragmentBufferOffset:(unsigned long long)a5 sourceFragmentIndexBuffer:(id)a6 sourceFragmentIndexBufferOffset:(unsigned long long)a7 destinationFragmentIndexBuffer:(id)a8 destinationFragmentIndexBufferOffset:(unsigned long long)a9 nodeBuffer:(id)a10 nodeBufferOffset:(unsigned long long)a11 childIndexBuffer:(id)a12 childIndexBufferOffset:(unsigned long long)a13 counterBuffer:(id)a14 counterBufferOffset:(unsigned long long)a15 fragmentCountBuffer:(id)a16 fragmentCountBufferOffset:(unsigned long long)a17 boundsMinBuffer:(id)a18 boundsMinBufferOffset:(unsigned long long)a19 boundsMaxBuffer:(id)a20 boundsMaxBufferOffset:(unsigned long long)a21 boundsEndMinBuffer:(id)a22 boundsEndMinBufferOffset:(unsigned long long)a23 boundsEndMaxBuffer:(id)a24 boundsEndMaxBufferOffset:(unsigned long long)a25 boundsEndTimeBuffer:(id)a26 boundsEndTimeBufferOffset:(unsigned long long)a27 boundsStartTimeBuffer:(id)a28 boundsStartTimeBufferOffset:(unsigned long long)a29 resourceBuffer:(id)a30;
- (void)writeBVHHeaderWithEncoder:(id)a0 descriptor:(id)a1 tmpCounterBuffer:(id)a2 tmpCounterBufferOffset:(unsigned long long)a3 nodeBuffer:(id)a4 nodeBufferOffset:(unsigned long long)a5 headerBuffer:(id)a6 headerBufferOffset:(unsigned long long)a7 nodeOffset:(unsigned long long)a8 fragmentOffset:(unsigned long long)a9 fragmentIndexOffset:(unsigned long long)a10 childIndexOffset:(unsigned long long)a11 size:(unsigned long long)a12;
- (void)threadgroupPrefixSumWithEncoder:(id)a0 inputBuffer:(id)a1 inputBufferOffset:(unsigned long long)a2 reducedBuffer:(id)a3 reducedBufferOffset:(unsigned long long)a4 countBuffer:(id)a5 countBufferOffset:(unsigned long long)a6 capacity:(unsigned long long)a7;
- (void)prefixSumWithEncoder:(id)a0 inputBuffer:(id)a1 inputBufferOffset:(unsigned long long)a2 reducedBuffer:(id)a3 reducedBufferOffset:(unsigned long long)a4 scratchBuffer:(id)a5 scratchBufferOffset:(unsigned long long)a6 countBuffer:(id)a7 countBufferOffset:(unsigned long long)a8 capacity:(unsigned long long)a9;
- (void)addPrefixSumsWithEncoder:(id)a0 inputBuffer:(id)a1 inputBufferOffset:(unsigned long long)a2 reducedBuffer:(id)a3 reducedBufferOffset:(unsigned long long)a4 countBuffer:(id)a5 countBufferOffset:(unsigned long long)a6 capacity:(unsigned long long)a7;
- (unsigned long long)getMTLSWBVHSizeForDescriptor:(id)a0 innerNodeOffset:(unsigned long long *)a1 leafNodeOffset:(unsigned long long *)a2 primitiveOffset:(unsigned long long *)a3 geometryOffset:(unsigned long long *)a4 primitiveBVHOffset:(unsigned long long *)a5 transformOffset:(unsigned long long *)a6;
- (void)layoutNodesBreadthFirstWithEncoder:(id)a0 descriptor:(id)a1 BVHBuffer:(id)a2 BVHBufferOffset:(unsigned long long)a3 counterBuffer:(id)a4 counterBufferOffset:(unsigned long long)a5 nodeMappingBuffer:(id)a6 nodeMappingBufferOffset:(unsigned long long)a7 scratchBuffer:(id)a8 scratchBufferOffset:(unsigned long long)a9;
- (id)newInstanceBufferWithBVHs:(id)a0 retainedResources:(id)a1 encoder:(id)a2;
- (id)newGeometryBufferWithGeometryDescriptors:(id)a0 retainedResources:(id)a1;
- (void)copyFromBuffer:(id)a0 sourceBufferOffset:(unsigned long long)a1 toBuffer:(id)a2 destinationBufferOffset:(unsigned long long)a3 length:(unsigned long long)a4 encoder:(id)a5;
- (void)copyMTLSWBVHWithEncoder:(id)a0 sourceBuffer:(id)a1 sourceBufferOffset:(unsigned long long)a2 toBuffer:(id)a3 destinationBufferOffset:(unsigned long long)a4 destinationUniqueIdentifier:(unsigned long long)a5 compact:(BOOL)a6;
- (id)getPipeline:(unsigned long long)a0 motion:(BOOL)a1;
- (void)writeDeserializedMTLSWBVHSizeWithEncoder:(id)a0 serializedBuffer:(id)a1 serializedBufferOffset:(unsigned long long)a2 toBuffer:(id)a3 sizeBufferOffset:(unsigned long long)a4;
- (void)dispatchIndirect64:(id)a0 indirectBuffer:(id)a1 indirectBufferOffset:(unsigned long long)a2 threadCountBuffer:(id)a3 threadCountBufferOffset:(unsigned long long)a4 threadCountIndex:(unsigned long long)a5 threadgroupDivisor:(unsigned long long)a6 encoder:(id)a7;
- (void)writeSerializedMTLSWBVHSizeWithEncoder:(id)a0 BVHBuffer:(id)a1 BVHBufferOffset:(unsigned long long)a2 toBuffer:(id)a3 sizeBufferOffset:(unsigned long long)a4;
- (void)writeSerializationDataWithEncoder:(id)a0 BVHBuffer:(id)a1 BVHBufferOffset:(unsigned long long)a2 toBuffer:(id)a3 destinationBufferOffset:(unsigned long long)a4;
- (void)writeSerializedMTLSWBVHRawSizeWithEncoder:(id)a0 BVHBuffer:(id)a1 BVHBufferOffset:(unsigned long long)a2 toBuffer:(id)a3 sizeBufferOffset:(unsigned long long)a4;
- (void)fastIndirectGPUMemcpyWithEncoder:(id)a0 srcBuffer:(id)a1 srcBufferOffset:(unsigned long long)a2 dstBuffer:(id)a3 dstBufferOffset:(unsigned long long)a4 lengthBuffer:(id)a5 lengthOffset:(unsigned long long)a6 retainedResources:(id)a7;
- (void)writeSerializedGeometryPrimitiveCountWithEncoder:(id)a0 BVHBuffer:(id)a1 BVHBufferOffset:(unsigned long long)a2 toBuffer:(id)a3 countBufferOffset:(unsigned long long)a4;
- (unsigned long long)getBuildScratchBufferSizeForDescriptor:(id)a0;
- (unsigned long long)getGenericBVHSizeForDescriptor:(id)a0;
- (void)buildGenericBVHWithEncoder:(id)a0 descriptor:(id)a1 outputBuffer:(id)a2 outputBufferOffset:(unsigned long long)a3 scratchBuffer:(id)a4 scratchBufferOffset:(unsigned long long)a5;
- (unsigned long long)getEncodeMTLSWBVHScratchBufferSizeForDescriptor:(id)a0;
- (unsigned long long)getMTLSWBVHSizeForDescriptor:(id)a0;
- (void)encodeMTLSWBVHWithEncoder:(id)a0 descriptor:(id)a1 outputBuffer:(id)a2 outputBufferOffset:(unsigned long long)a3 genericBVHBuffer:(id)a4 genericBVHBufferOffset:(unsigned long long)a5 scratchBuffer:(id)a6 scratchBufferOffset:(unsigned long long)a7 uniqueIdentifier:(unsigned long long)a8;
- (void)writeMTLSWBVHSizeWithEncoder:(id)a0 BVHBuffer:(id)a1 BVHBufferOffset:(unsigned long long)a2 toBuffer:(id)a3 sizeBufferOffset:(unsigned long long)a4;
- (void)writeCompactedMTLSWBVHSizeWithEncoder:(id)a0 BVHBuffer:(id)a1 BVHBufferOffset:(unsigned long long)a2 toBuffer:(id)a3 sizeBufferOffset:(unsigned long long)a4 sizeDataType:(unsigned long long)a5;
- (void)copyMTLSWBVHWithEncoder:(id)a0 sourceBuffer:(id)a1 sourceBufferOffset:(unsigned long long)a2 toBuffer:(id)a3 destinationBufferOffset:(unsigned long long)a4 destinationUniqueIdentifier:(unsigned long long)a5;
- (void)copyAndCompactMTLSWBVHWithEncoder:(id)a0 sourceBuffer:(id)a1 sourceBufferOffset:(unsigned long long)a2 toBuffer:(id)a3 destinationBufferOffset:(unsigned long long)a4 destinationUniqueIdentifier:(unsigned long long)a5;
- (void)getMTLInstanceBoundingBoxesWithEncoder:(id)a0 descriptor:(id)a1 boundingBoxBuffer:(id)a2 boundingBoxBufferOffset:(unsigned long long)a3;
- (unsigned long long)getRefitScratchBufferSizeForDescriptor:(id)a0;
- (void)refitMTLSWBVHWithEncoder:(id)a0 descriptor:(id)a1 sourceBuffer:(id)a2 sourceBufferOffset:(unsigned long long)a3 destinationBuffer:(id)a4 destinationBufferOffset:(unsigned long long)a5 destinationUniqueIdentifier:(unsigned long long)a6 scratchBuffer:(id)a7 scratchBufferOffset:(unsigned long long)a8;
- (void)writeDeserializedMTLSWPrimitiveBVHSizesWithEncoder:(id)a0 serializedBuffer:(id)a1 serializedBufferOffset:(unsigned long long)a2 toBuffer:(id)a3 sizesBufferOffset:(unsigned long long)a4;
- (void)writeSerializedMTLSWBVHWithEncoder:(id)a0 BVHBuffer:(id)a1 BVHBufferOffset:(unsigned long long)a2 primitiveAccelerationStructures:(id)a3 toBuffer:(id)a4 serializedBufferOffset:(unsigned long long)a5;
- (void)writeDeserializedMTLSWBVHWithEncoder:(id)a0 BVHBuffer:(id)a1 BVHBufferOffset:(unsigned long long)a2 primitiveAccelerationStructures:(id)a3 fromBuffer:(id)a4 serializedBufferOffset:(unsigned long long)a5 uniqueIdentifier:(unsigned long long)a6;
- (void)writeSerializedGeometrySizeWithEncoder:(id)a0 BVHBuffer:(id)a1 BVHBufferOffset:(unsigned long long)a2 toBuffer:(id)a3 sizeBufferOffset:(unsigned long long)a4;
- (void)writeSerializedGeometryWithEncoder:(id)a0 BVHBuffer:(id)a1 BVHBufferOffset:(unsigned long long)a2 toBuffer:(id)a3 geometryBufferOffset:(unsigned long long)a4;
- (void)writeGenericBVHStructureSizesWithEncoder:(id)a0 BVHBuffer:(id)a1 BVHBufferOffset:(unsigned long long)a2 toBuffer:(id)a3 sizesBufferOffset:(unsigned long long)a4;
- (void)writeGenericBVHStructureWithEncoder:(id)a0 BVHBuffer:(id)a1 BVHBufferOffset:(unsigned long long)a2 header:(id)a3 headerBufferOffset:(unsigned long long)a4 innerNodes:(id)a5 innerNodeBufferOffset:(unsigned long long)a6 leafNodes:(id)a7 leafNodeBufferOffset:(unsigned long long)a8 primitives:(id)a9 primitiveBufferOffset:(unsigned long long)a10 geometry:(id)a11 geometryOffset:(unsigned long long)a12 instanceTransform:(id)a13 instanceTransformOffset:(unsigned long long)a14;

@end
