@class NSXPCConnection, NSString, NSURL, NSError, NSMutableDictionary, NSMutableSet, NSMutableArray, NSObject;
@protocol OS_dispatch_queue, NDBackgroundSessionProtocol;

@interface __NSURLBackgroundSession : NSURLSession <NDBackgroundSessionClient, NSURLSessionSubclass> {
    unsigned long long _identSeed;
    id<NDBackgroundSessionProtocol> _remoteSession;
    NSXPCConnection *_xpcConn;
    NSMutableDictionary *_tasks;
    NSMutableArray *_taskIDsToFailOnReconnection;
    NSMutableSet *_taskIDsGettingAuthHeaders;
    NSObject<OS_dispatch_queue> *_invalidateQueue;
    id /* block */ _invalidateCallback;
    struct SmartBlockWithArgs<bool> { struct BlockHolderVar<bool> *__ptr_; struct __shared_weak_count *__cntrl_; } _backgroundSessionDidFinishAppWakeBlock;
    NSURL *_downloadDirectory;
    NSURL *_assetDownloadDirectory;
    BOOL _isPrivileged;
    BOOL _isInvalid;
    BOOL _companionAvailable;
    NSError *_invalidationError;
    BOOL _tryToReconnect;
    BOOL _appWasLaunchedForBackgroundSessionSeen;
    int _notifyToken;
}

@property (copy) NSString *appWakeUUID;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

- (void)credStorage_setDefaultCredential:(id)a0 forProtectionSpace:(id)a1;
- (void)backgroundTask:(unsigned long long)a0 didReceiveChallenge:(id)a1 reply:(id /* block */)a2;
- (id)webSocketTaskForURL:(id)a0 protocols:(id)a1;
- (void)willRetryBackgroundDataTask:(unsigned long long)a0 withError:(id)a1 transactionMetrics:(id)a2;
- (void)appWasLaunchedForBackgroundSession:(id)a0;
- (void)backgroundDownloadTask:(unsigned long long)a0 didWriteData:(long long)a1 totalBytesWritten:(long long)a2 totalBytesExpectedToWrite:(long long)a3;
- (void)cameIntoForeground:(id)a0;
- (void)backgroundTask:(unsigned long long)a0 didReceiveResponse:(id)a1 transactionMetrics:(id)a2 reply:(id /* block */)a3;
- (id)webSocketTaskForRequest:(id)a0;
- (void)backgroundTaskDidResume:(unsigned long long)a0;
- (void).cxx_destruct;
- (void)backgroundTask:(unsigned long long)a0 willPerformHTTPRedirection:(id)a1 withNewRequest:(id)a2 reply:(id /* block */)a3;
- (void)backgroundAVAssetDownloadTask:(unsigned long long)a0 didResolveMediaSelectionProperyList:(id)a1 reply:(id /* block */)a2;
- (void)_onqueue_getTasksWithCompletionHandler:(id /* block */)a0;
- (void)wentToBackground:(id)a0;
- (void)dealloc;
- (id)initWithConfiguration:(id)a0 delegate:(id)a1 delegateQueue:(id)a2 delegateDispatchQueue:(id)a3;
- (void)backgroundAVAssetDownloadTask:(unsigned long long)a0 willDownloadToURL:(id)a1;
- (void)backgroundAVAssetDownloadTaskDidUpdateProgress:(unsigned long long)a0 totalBytesWritten:(unsigned long long)a1 totalBytesExpectedToWrite:(unsigned long long)a2;
- (void)_onqueue_resetStorageWithCompletionHandler:(id /* block */)a0;
- (void)backgroundAVAssetDownloadTask:(unsigned long long)a0 didFinishDownloadForMediaSelectionPropertyList:(id)a1;
- (void)credStorage_allCredentialsWithReply:(id /* block */)a0;
- (void)openFileAtPath:(id)a0 mode:(int)a1 withReply:(id /* block */)a2;
- (void)backgroundTask:(unsigned long long)a0 didSendBodyData:(long long)a1 totalBytesSent:(long long)a2 totalBytesExpectedToSend:(long long)a3;
- (void)backgroundTask:(unsigned long long)a0 getAuthHeadersForResponse:(id)a1 reply:(id /* block */)a2;
- (void)backgroundTaskHasConnectionWaiting:(unsigned long long)a0;
- (void)_useTLSSessionCacheFromSession:(id)a0;
- (void)backgroundDownloadTask:(unsigned long long)a0 didResumeAtOffset:(long long)a1 expectedTotalBytes:(long long)a2;
- (void)credStorage_getInitialCredentialDictionariesWithReply:(id /* block */)a0;
- (void)backgroundTask:(unsigned long long)a0 didReceiveResponse:(id)a1 transactionMetrics:(id)a2;
- (void)backgroundTask:(unsigned long long)a0 willBeginDelayedRequest:(id)a1 reply:(id /* block */)a2;
- (void)backgroundTask:(unsigned long long)a0 hasConnectionWaitingWithReason:(long long)a1;
- (void)backgroundTask:(unsigned long long)a0 needNewBodyStream:(BOOL)a1 withReply:(id /* block */)a2;
- (id)AVAssetDownloadTaskForURLAsset:(id)a0 destinationURL:(id)a1 options:(id)a2;
- (void)backgroundDataTaskDidBecomeDownloadTask:(unsigned long long)a0;
- (void)credStorage_removeCredential:(id)a0 forProtectionSpace:(id)a1;
- (void)backgroundTask:(unsigned long long)a0 didCompleteWithError:(id)a1 taskMetrics:(id)a2 info:(id)a3 reply:(id /* block */)a4;
- (id)AVAggregateAssetDownloadTaskForURLAsset:(id)a0 mediaSelections:(id)a1 assetTitle:(id)a2 assetArtworkData:(id)a3 options:(id)a4;
- (id).cxx_construct;
- (void)credStorage_setCredential:(id)a0 forProtectionSpace:(id)a1;
- (void)backgroundAVAssetDownloadTask:(unsigned long long)a0 didLoadTimeRange:(id)a1 totalTimeRangesLoaded:(id)a2 timeRangeExpectedToLoad:(id)a3 forMediaSelectionPropertyList:(id)a4;
- (void)credStorage_defaultCredentialForProtectionSpace:(id)a0 reply:(id /* block */)a1;
- (void)backgroundTaskDidSuspend:(unsigned long long)a0;
- (void)backgroundTask:(unsigned long long)a0 _willSendRequestForEstablishedConnection:(id)a1 reply:(id /* block */)a2;
- (void)backgroundSessionDidStartAppWake:(id)a0 reply:(id /* block */)a1;
- (void)backgroundDownloadTask:(unsigned long long)a0 didFinishDownloadingToURL:(id)a1 reply:(id /* block */)a2;
- (void)backgroundTask:(unsigned long long)a0 hasConnectionWaitingWithError:(id)a1;
- (id)_downloadTaskWithTaskForClass:(id)a0;
- (void)credStorage_credentialsForProtectionSpace:(id)a0 reply:(id /* block */)a1;
- (void)backgroundAVAssetDownloadTask:(unsigned long long)a0 didReceiveDownloadToken:(unsigned long long)a1;
- (id)_AVAssetDownloadTaskForURL:(id)a0 destinationURL:(id)a1 options:(id)a2;
- (void)backgroundSessionDidFinishAppWake:(id)a0 reply:(id /* block */)a1;
- (void)backgroundDataTask:(unsigned long long)a0 didReceiveData:(id)a1 withReply:(id /* block */)a2;
- (id)AVAssetDownloadTaskForURLAsset:(id)a0 assetTitle:(id)a1 assetArtworkData:(id)a2 options:(id)a3;
- (id)_dataTaskWithTaskForClass:(id)a0;
- (void)_onqueue_completeInvalidation:(BOOL)a0;
- (id)_uploadTaskWithTaskForClass:(id)a0;
- (void)_onqueue_flushWithCompletionHandler:(id /* block */)a0;

@end
