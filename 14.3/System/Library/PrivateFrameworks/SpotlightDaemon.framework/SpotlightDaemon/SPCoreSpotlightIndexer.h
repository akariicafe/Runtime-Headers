@class NSString, NSURL, SPCoreSpotlightTask, NSSet, NSArray, SPCoreSpotlightInteractionHandler, NSDictionary, NSMutableSet, NSObject;
@protocol CSIndexExtensionDelegate, SPCoreSpotlightIndexerDelegate, OS_dispatch_source, OS_dispatch_queue, NSObject;

@interface SPCoreSpotlightIndexer : NSObject <UMUserPersonaUpdateObserver, MDIndexer> {
    int cancelFlags[4];
    double _lastUpdateTime;
    NSMutableSet *_bundlesWithIndexedCoreSpotlightItems;
    NSSet *_bundlesWithRemoteSearchSupport;
    NSObject<OS_dispatch_queue> *_appScopingQueue;
    NSString *_serviceName;
    NSArray *_reindexIndexers;
}

@property (retain, nonatomic) SPCoreSpotlightInteractionHandler *interactionHandler;
@property (retain) NSDictionary *concreteIndexers;
@property (retain, nonatomic) NSObject<OS_dispatch_source> *prefsChangeSource;
@property (retain, nonatomic) id<NSObject> dataMigrationStartObserver;
@property (retain, nonatomic) id<NSObject> dataMigrationFinishObserver;
@property (retain, nonatomic) NSSet *dataMigrationBundleIDs;
@property (retain, nonatomic) NSSet *prefsDisabledBundleIDs;
@property (retain, nonatomic) NSObject<OS_dispatch_source> *reindexAllItemsSource;
@property (retain, nonatomic) NSObject<OS_dispatch_source> *reindexAllItemsWithIdentifiersSource;
@property (retain) SPCoreSpotlightTask *reindexAllItemsTask;
@property (readonly, nonatomic) NSDictionary *fileProviderAppToExtensionBundleMap;
@property (readonly, nonatomic) NSDictionary *fileProviderExtensionToAppBundleMap;
@property (retain, nonatomic) NSMutableSet *knownPersonas;
@property (nonatomic) BOOL updatePersonas;
@property (readonly) NSURL *personaListURL;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *indexQueue;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *firstUnlockQueue;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *reindexAllQueue;
@property (nonatomic) unsigned long long dataMigrationStage;
@property (readonly, nonatomic) long long transactionCount;
@property (weak) id<CSIndexExtensionDelegate> extensionDelegate;
@property (weak) id<SPCoreSpotlightIndexerDelegate> indexerDelegate;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)sharedInstance;
+ (void)initialize;
+ (void)shrink:(unsigned long long)a0;
+ (void)cooldown;
+ (void)setIndexerDelegate:(id)a0;
+ (void)preheat;
+ (void)sync;
+ (void)shutdown;
+ (void)unlock;
+ (id)allProtectionClasses;
+ (id)_filterReindexAllExtensions:(id)a0;
+ (void)setPrivate:(BOOL)a0;
+ (void)setMemoryPressureStatus:(unsigned long long)a0;
+ (BOOL)writeDiagnostic:(id)a0 bundleID:(id)a1 identifier:(id)a2;
+ (id)sharedInstanceWithDelegate:(id)a0;
+ (void)deactivate;

- (void)shrink:(unsigned long long)a0;
- (void)migrateForced:(BOOL)a0;
- (void)preheat;
- (void)fileProviderInfoSetup;
- (id)startQueryWithQueryString:(id)a0 queryContext:(id)a1 eventHandler:(id /* block */)a2 resultsHandler:(id /* block */)a3 completionHandler:(id /* block */)a4;
- (void)mergeWithProtectionClasses:(id)a0 completionHandler:(id /* block */)a1;
- (void)extensionsChanged:(id)a0;
- (void)shutdown;
- (void)unlock;
- (void)writeFileProviderBundleMap:(id)a0;
- (id)queryForWord:(id)a0 matchingAttributes:(id)a1 prefixMatch:(BOOL)a2;
- (void)issueDuplicateOidCheck:(id)a0;
- (void)deleteActionsBeforeTime:(double)a0 completionHandler:(id /* block */)a1;
- (void)_enumerateIndexersWithBlock:(id /* block */)a0;
- (id)taskForTopHitQueryWithQueryString:(id)a0 queryContext:(id)a1 eventHandler:(id /* block */)a2 resultsHandler:(id /* block */)a3 completionHandler:(id /* block */)a4;
- (void)clientDidCheckin:(id)a0 protectionClass:(id)a1 service:(id)a2 completionHandler:(id /* block */)a3;
- (void)personaListDidUpdate;
- (void)_reindexAllItemsWithExtensionsAndCompletionBlock:(id /* block */)a0;
- (void).cxx_destruct;
- (id)searchServiceName;
- (void)queryPreheat:(id)a0;
- (void)fetchAttributesForProtectionClass:(id)a0 attributes:(id)a1 bundleID:(id)a2 identifiers:(id)a3 completion:(id /* block */)a4;
- (void)deleteAllSearchableItemsWithProtectionClass:(id)a0 forBundleID:(id)a1 options:(long long)a2 completionHandler:(id /* block */)a3;
- (void)willModifySearchableItemsWithIdentifiers:(id)a0 protectionClass:(id)a1 forBundleID:(id)a2 options:(long long)a3 completionHandler:(id /* block */)a4;
- (BOOL)writeData:(id)a0 toFile:(id)a1;
- (void)dealloc;
- (void)_enumerateIndexersWithProtectionClasses:(id)a0 block:(id /* block */)a1;
- (void)performIndexerTask:(id)a0 withIndexExtensionsAndCompletionHandler:(id /* block */)a1;
- (void)locked;
- (double)lastUpdateTime;
- (void)_issueCommand:(id)a0 searchContext:(id)a1 completionHandler:(id /* block */)a2;
- (void)cancelQuery:(id)a0;
- (void)issueRepair:(id)a0;
- (void)setServiceName:(id)a0;
- (void)getDBLogsWithCompletionHandler:(id /* block */)a0;
- (void)_closeIndexWithIndexers:(id)a0;
- (id)indexServiceName;
- (void)indexSearchableItems:(id)a0 deleteSearchableItemsWithIdentifiers:(id)a1 clientState:(id)a2 protectionClass:(id)a3 forBundleID:(id)a4 options:(long long)a5 completionHandler:(id /* block */)a6;
- (id)taskForQueryWithQueryString:(id)a0 queryContext:(id)a1 eventHandler:(id /* block */)a2 resultsHandler:(id /* block */)a3 completionHandler:(id /* block */)a4;
- (void)issueDefrag:(id)a0 group:(id)a1;
- (void)addCompletedBundleIDs:(id)a0 forIndexerTask:(id)a1;
- (void)deleteAllInteractionsWithBundleID:(id)a0 completionHandler:(id /* block */)a1;
- (void)powerStateChanged;
- (void)issueSplit:(id)a0;
- (void)commitUpdates;
- (void)deleteAllUserActivities:(id)a0 completionHandler:(id /* block */)a1;
- (void)indexSearchableItems:(id)a0 deleteSearchableItemsWithIdentifiers:(id)a1 clientState:(id)a2 clientStateName:(id)a3 protectionClass:(id)a4 forBundleID:(id)a5 options:(long long)a6 completionHandler:(id /* block */)a7;
- (void)recordEngagementForBundleID:(id)a0 uniqueIdentifier:(id)a1 protectionClass:(id)a2 userQuery:(id)a3 date:(id)a4;
- (void)flush;
- (void)deleteSearchableItemsSinceDate:(id)a0 protectionClass:(id)a1 forBundleID:(id)a2 options:(long long)a3 completionHandler:(id /* block */)a4;
- (void)locking;
- (void)mergeWithProtectionClasses:(id)a0 power:(BOOL)a1;
- (int)_openIndex:(BOOL)a0;
- (void)indexFromBundle:(id)a0 protectionClass:(id)a1 personaID:(id)a2 options:(long long)a3 items:(id)a4 itemsText:(id)a5 itemsHTML:(id)a6 clientState:(id)a7 clientStateName:(id)a8 deletes:(id)a9 completionHandler:(id /* block */)a10;
- (void)userPerformedAction:(id)a0 withItem:(id)a1 protectionClass:(id)a2 forBundleID:(id)a3 personaID:(id)a4;
- (void)checkIfExtensionsNeedToBeLoaded;
- (void)issueConsistencyCheck:(id)a0;
- (int)openIndex:(BOOL)a0;
- (void)issuePathFixup:(id)a0;
- (void)commitUpdatesWithCompletionHandler:(id /* block */)a0;
- (void)deleteSearchableItemsWithDomainIdentifiers:(id)a0 protectionClass:(id)a1 forBundleID:(id)a2 options:(long long)a3 completionHandler:(id /* block */)a4;
- (id)_taskForQueryWithQueryString:(id)a0 queryContext:(id)a1 eventHandler:(id /* block */)a2 resultsHandler:(id /* block */)a3 completionHandler:(id /* block */)a4;
- (void)revokeExpiredItems:(id)a0 protected:(BOOL)a1;
- (void)coolDown;
- (void)reindexAllItemsWithIndexers:(id)a0 completionHandler:(id /* block */)a1;
- (void)performIndexerTask:(id)a0 completionHandler:(id /* block */)a1;
- (void)deleteAllSearchableItemsWithBundleID:(id)a0 protectionClass:(id)a1 shouldGC:(BOOL)a2 completionHandler:(id /* block */)a3;
- (void)provideFileURLForBundle:(id)a0 identifier:(id)a1 type:(id)a2 completionHandler:(id /* block */)a3;
- (id)initWithDelegate:(id)a0;
- (void)_fetchAccumulatedStorageSizeForBundleId:(id)a0 completionHandler:(id /* block */)a1;
- (void)start;
- (void)mergeWithProtectionClasses:(id)a0 power:(BOOL)a1 completionHandler:(id /* block */)a2;
- (void)_migrateIndexExtensionsWithEnumerator:(id)a0 forced:(BOOL)a1 migratedBundleIds:(id)a2 completionHandler:(id /* block */)a3;
- (void)resume;
- (id)startQuery:(id)a0 withContext:(id)a1 handler:(id /* block */)a2;
- (void)runMigration;
- (void)issueCleanup:(id)a0 flags:(int)a1;
- (void)fetchLastClientStateWithProtectionClass:(id)a0 forBundleID:(id)a1 clientStateName:(id)a2 options:(long long)a3 completionHandler:(id /* block */)a4;
- (void)provideDataForBundle:(id)a0 identifier:(id)a1 type:(id)a2 completionHandler:(id /* block */)a3;
- (void)_reindexAllItemsForBundleIDs:(id)a0 reason:(id)a1 completionHandler:(id /* block */)a2;
- (id)_startQueryWithQueryString:(id)a0 queryContext:(id)a1 eventHandler:(id /* block */)a2 resultsHandler:(id /* block */)a3 completionHandler:(id /* block */)a4;
- (void)changeStateOfSearchableItemsWithUIDs:(id)a0 toState:(long long)a1 protectionClass:(id)a2 forBundleID:(id)a3 forUTIType:(id)a4 options:(long long)a5;
- (void)_reindexAllItemsOnPrefsChanges;
- (void)issueDumpForward:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (void)shutdownForced;
- (void)deleteSearchableItemsWithPersonaIds:(id)a0 completionHandler:(id /* block */)a1;
- (id)delegateServiceName;
- (void)issueResolveFPItemForURL:(id)a0 completionHandler:(id /* block */)a1;
- (void)startQueryTask:(id)a0;
- (void)issueDumpReverse:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (void)addInteraction:(id)a0 bundleID:(id)a1 protectionClass:(id)a2;
- (void)_reindexAllItemsWithExtensionsAndIdentifiersAndCompletionBlock:(id /* block */)a0;
- (void)handleRankingCommand:(id)a0 completion:(id /* block */)a1;
- (void)issueResolveFPItemForBundle:(id)a0 domain:(id)a1 identifier:(id)a2 completionHandler:(id /* block */)a3;
- (void)deleteActionsWithIdentifiers:(id)a0 completionHandler:(id /* block */)a1;
- (void)closeIndex;
- (void)_registerForPrefsChanges;
- (void)_reindexAllIdentifiersWithExtension:(id)a0 completionBlock:(id /* block */)a1;
- (void)cleanupStringsWithProtectionClasses:(id)a0 completionHandler:(id /* block */)a1;
- (void)fetchAttributes:(id)a0 protectionClass:(id)a1 bundleID:(id)a2 identifiers:(id)a3 includeParents:(BOOL)a4 completionHandler:(id /* block */)a5;
- (void)issueResolveFPItem:(id)a0 completionHandler:(id /* block */)a1;
- (id)startQuery:(id)a0 withContext:(id)a1 eventHandler:(id /* block */)a2 handler:(id /* block */)a3;

@end
