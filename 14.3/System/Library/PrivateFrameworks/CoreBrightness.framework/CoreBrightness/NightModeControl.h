@class NSMutableDictionary, NSDictionary, SunriseSunsetProvider, NSString, NSMutableArray, NSObject;
@protocol OS_dispatch_queue, OS_dispatch_source;

@interface NightModeControl : NSObject {
    NSMutableDictionary *_properties;
    SunriseSunsetProvider *_sunriseSunsetProvider;
    int _sunriseSunsetInfoQueryTimeout;
    NSDictionary *_sunriseSunsetInfo;
    NSMutableArray *_supportObjs;
    NSObject<OS_dispatch_queue> *_queue;
    NSObject<OS_dispatch_source> *_nextTransitionTimer;
    NSObject<OS_dispatch_source> *_transitionTimer;
    NSObject<OS_dispatch_source> *_aggdUpdateTimer;
    struct BLRAggdInfo { float manualModeTime; float sunModeTime; float scheduleModeTime; int turnOnForNowCount; int turnOffForNowCount; int turnOnUntilTomorrowCount; int turnOffUntilTomorrowCount; double _aggdModeChangeTimestamp; } _aggdKeysInfo;
    int _algoState;
    float _transitionLength;
    float _transitionLengthActual;
    float _transitionsTimesCoeff;
    float _transitionRate;
    float _minFactor;
    float _maxFactor;
    struct NMFactorState { double rampStartTime; float factor; float target; float start; float rampLength; } _factorState;
    struct __CFTimeZone { } *_currentTimeZone;
    double _sunsetAbsolute;
    double _sunsetPreviousAbsolute;
    double _sunriseAbsolute;
    double _sunrisePreviousAbsolute;
    double _offTransitionTimeAbsoluteUnrestricted;
    double _offTransitionTimeAbsoluteUnrestrictedPrev;
    BOOL _transitionTimesValid;
    BOOL _isDaylight;
    int _currentScheduledTransitionType;
    double _displayOffTimestamp;
    double _untilNexTransitionTimestamp;
    float _inactivityTimeout;
    BOOL _checkInactivity;
    BOOL _displayOff;
    int _logLevel;
    id /* block */ _callbackBlock;
    struct { BOOL active; BOOL enabled; BOOL sunSchedulePermitted; int mode; struct { struct { int hour; int minute; } fromTime; struct { int hour; int minute; } toTime; } schedule; unsigned long long disableFlags; BOOL available; } _status;
    struct { struct { int hour; int minute; } fromTime; struct { int hour; int minute; } toTime; } _backupSchedule;
    BOOL _statusUpdated;
    NSString *_currentSunriseKey;
    NSString *_currentSunsetKey;
    NSString *_previousSunriseKey;
    NSString *_previousSunsetKey;
    NSString *_nextSunriseKey;
    NSString *_nextSunsetKey;
    NSString *_isDaylightKey;
    int _notifyUserAboutScheduleCounter;
    struct __CFUserNotification { } *_enableNotification;
    BOOL _notificationInProgress;
    BOOL _revertToSunriseSunset;
}

- (BOOL)updateTransitionTimesFromSunriseSunset:(double)a0;
- (void)cancelTransition;
- (void)setMode:(int)a0;
- (void)clockChanged;
- (void)setNightShiftFactorDictionary:(id)a0;
- (void)initiateTransitionTo:(float)a0 andRampLength:(float)a1;
- (void)retrieveSunriseSunsetTimesFromBackup:(double)a0;
- (void)initiateFullMaxTransition;
- (void)setSchedule:(id)a0;
- (id)copyDictionaryFromStatus:(struct { BOOL x0; BOOL x1; BOOL x2; int x3; struct { struct { int x0; int x1; } x0; struct { int x0; int x1; } x1; } x4; unsigned long long x5; BOOL x6; } *)a0;
- (void)setPreference:(id)a0 forKey:(id)a1 user:(id)a2;
- (void)dealloc;
- (void)saveStatusToPrefs:(id)a0;
- (id)copyPreferenceForKey:(id)a0 user:(id)a1;
- (BOOL)parseStatusDictionary:(id)a0 intoStruct:(struct { BOOL x0; BOOL x1; BOOL x2; int x3; struct { struct { int x0; int x1; } x0; struct { int x0; int x1; } x1; } x4; unsigned long long x5; BOOL x6; } *)a1 shouldUpdatePrefs:(BOOL *)a2;
- (void)updateSunriseSunsetInfo:(id)a0;
- (id)copyStatusDictionaryFromPrefs;
- (void)removeSupportObject:(id)a0;
- (void)cancelAggdPeriodicUpdate;
- (id)copyTimeStringWithHour:(int)a0 minute:(int)a1 second:(int)a2;
- (void)reevaluateCurrentStateWithFactorFadeOption:(float)a0;
- (void)reevaluateCurrentState;
- (void)cancelSchedule;
- (void)scheduleNextTransition:(double)a0 withType:(int)a1;
- (void)timeZoneChanged;
- (void)updateSunriseSunsetBackup;
- (void)updateTransitionTimes:(double)a0;
- (void)setNightModeFactor:(float)a0;
- (void)addSupportObject:(id)a0;
- (BOOL)updateTransitionTimesFromSchedule:(double)a0;
- (void)initiateRestrictedMaxTransition;
- (void)setSunPermitted:(BOOL)a0;
- (void)enableBlueLightReduction:(BOOL)a0 withOption:(int)a1;
- (void)displayAlertInteractive:(BOOL)a0;
- (id)initWithSupportObject:(id)a0 queue:(id)a1 callback:(id /* block */)a2;
- (void)setNightModeFactor:(float)a0 withFadePeriod:(float)a1;
- (void)tearDownAllTimers;
- (void)transitionTimerHandler;
- (id)getPropertyForKey:(id)a0;
- (id)copyLowPowerModeState;
- (void)setAlgoState:(int)a0;
- (void)scheduleAggdKeysUpdate;
- (void)updateOptionTimestamp:(double)a0;
- (BOOL)setProperty:(id)a0 forKey:(id)a1;
- (void)updateStatusDictionaryWithValue:(id)a0 forKey:(id)a1;
- (void)initiateFullMinTransition;
- (void)aggdKeysUpdate;
- (void)updateLowPowerModeState:(id)a0;

@end
