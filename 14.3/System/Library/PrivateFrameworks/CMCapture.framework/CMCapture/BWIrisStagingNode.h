@class BWLimitedGMErrorLogger, NSString, FigIrisAutoTrimmer, BWIntermediateJPEGCompressor, NSURL, NSDictionary, BWStats, BWIrisSequenceAdjuster, BWMotionDataTimeMachine, NSMutableArray, BWMotionDataPreserver, NSObject;
@protocol OS_dispatch_group, BWIrisStagingNodeIrisRequestDelegate;

@interface BWIrisStagingNode : BWNode {
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _bufferingTime;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _targetFrameDuration;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _beginIrisMovieCaptureTime;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _endIrisMovieCaptureTime;
    BOOL _compressSynchronizedSlaveAttachedMedia;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _frameGovernorNextFrameThreshold;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _frameGovernorReferenceTime;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _readyToEmitPTS;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _lastProcessedVideoPTS;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _masterMovieStartPTS;
    NSURL *_temporaryMovieDirectoryURL;
    NSURL *_masterMovieURL;
    NSURL *_spatialOverCaptureMasterMovieURL;
    NSMutableArray *_stagingQueues;
    NSMutableArray *_lastEmittedBuffers;
    BOOL _valveOpen;
    BOOL _finishingAllEnqueuedRequests;
    BOOL _valveDraining;
    BOOL _emittedFirstAudio;
    long long _valveOpenerSettingsID;
    NSMutableArray *_irisRequestsInFlight;
    NSMutableArray *_irisRequestsSoonToBeEmitted;
    int _emittedIrisRequestCount;
    struct OpaqueFigSimpleMutex { } *_stateMutex;
    struct { long long x0; int x1; unsigned int x2; long long x3; } *_firstEmittedPTSArray;
    struct OpaqueCMClock { } *_masterClock;
    int _trimMethod;
    BOOL _vitalityScoringEnabled;
    struct { unsigned short major; unsigned short minor; unsigned short patch; } _vitalityScoringSmartCameraPipelineVersion;
    FigIrisAutoTrimmer *_trimmer;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _firstTrimStartPTS;
    unsigned long long _inferencesInputIndex;
    BWMotionDataPreserver *_motionDataPreserver;
    BWIrisSequenceAdjuster *_sequenceAdjusterBackingStore;
    BWIrisSequenceAdjuster *_sequenceAdjuster;
    BWMotionDataTimeMachine *_motionDataTimeMachine;
    int _visMotionMetadataPreloadingMode;
    int _numEODMessagesReceived;
    id<BWIrisStagingNodeIrisRequestDelegate> _delegate;
    unsigned long long _compressedBufferPoolAllocationTimeoutMS;
    float _intermediateJPEGCompressionQuality;
    float _intermediateJPEGCompressionRate;
    int _intermediateJPEGDownstreamRetainedBufferCount;
    int _intermediateJPEGSurfaceLocalRetainedBufferCount;
    int _additionalCompressedBufferCount;
    BWIntermediateJPEGCompressor *_intermediateJPEGCompressor;
    BWIntermediateJPEGCompressor *_synchronizedSlaveJPEGCompressor;
    BOOL _doingJPEGCompression;
    NSDictionary *_cameraInfoByPortType;
    BOOL _haveSeenFirstAudioSampleBuffer;
    BOOL _haveSeenFirstVideoSampleBuffer;
    BOOL _readyToReceiveRequests;
    NSObject<OS_dispatch_group> *_readyToReceiveRequestsGroup;
    float _videoStabilizationOverscanOverride;
    BOOL _captureDeviceHasOverCaptureEnabled;
    float _spatialOverCapturePercentageToApply;
    NSString *_recommendedMasterPortType;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _lastReceivedVideoTime;
    BWStats *_overallVideoFrameReceptionStats;
    BWStats *_valveActiveVideoFrameReceptionStats;
    BWLimitedGMErrorLogger *_limitedGMErrorLogger;
}

@property (readonly) NSURL *temporaryMovieDirectoryURL;
@property (readonly) BWMotionDataTimeMachine *motionDataTimeMachine;
@property struct { long long x0; int x1; unsigned int x2; long long x3; } beginIrisMovieCaptureTime;
@property struct { long long x0; int x1; unsigned int x2; long long x3; } endIrisMovieCaptureTime;

+ (void)initialize;

- (void)handleDroppedSample:(id)a0 forInput:(id)a1;
- (void)prepareForCurrentConfigurationToBecomeLive;
- (struct { unsigned short x0; unsigned short x1; unsigned short x2; })vitalityScoringSmartCameraPipelineVersion;
- (void)didSelectFormat:(id)a0 forInput:(id)a1 forAttachedMediaKey:(id)a2;
- (void)prepareToFinishAllEnqueuedIrisRequestsWithEndTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0;
- (BOOL)_haveEnoughVideoStagedToStartFirstIrisRecording:(id)a0 currentTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a1;
- (void)configurationWithID:(long long)a0 updatedFormat:(id)a1 didBecomeLiveForInput:(id)a2;
- (BOOL)valveIsOpen;
- (int)_emitBuffersThroughPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0 forInputIndex:(unsigned long long)a1 inOutBufferIndex:(unsigned long long *)a2 bufferCount:(unsigned long long)a3;
- (void)_feedTrimmerWithInferencesSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0;
- (unsigned long long)_indexOfBufferBeforeOrEqualToHostPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0 inputIndex:(unsigned long long)a1 tolerance:(struct { long long x0; int x1; unsigned int x2; long long x3; })a2;
- (struct OpaqueCMClock { } *)masterClock;
- (void)didReachEndOfDataForInput:(id)a0;
- (void)_feedTrimmerWithVideoSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0;
- (void)closeValve;
- (void)renderSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0 forInput:(id)a1;
- (void)_updateRetainedBufferCount;
- (void)handleNodeError:(id)a0 forInput:(id)a1;
- (BOOL)_fillInRefMovieStartAndTrimTimesForStillImageTimesBeforeTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0;
- (int)intermediateJPEGDownstreamRetainedBufferCount;
- (void)dealloc;
- (void)setTargetFrameDuration:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0;
- (BOOL)waitUntilReadyToReceiveRequestsWithTimeout:(float)a0;
- (void)_informDelegateOfSoonToBeEmittedIrisRequestsForTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0;
- (struct { long long x0; int x1; unsigned int x2; long long x3; })bufferingTime;
- (unsigned long long)_emittingInputsCount;
- (struct { long long x0; int x1; unsigned int x2; long long x3; })movieStopPTSForIrisRequest:(id)a0;
- (void)_emitIrisRequestsOlderThanTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0 withEndTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a1;
- (BOOL)_fillInStartAndTrimTimesForMasterMovieWithInfo:(id)a0;
- (void)_enqueueIrisRequest:(id)a0;
- (struct { long long x0; int x1; unsigned int x2; long long x3; })_earliestAllowedStillHostPTS;
- (void)_emitSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0 forInputIndex:(unsigned long long)a1;
- (void)setBufferingTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0;
- (void)setStagingQueues:(id)a0;
- (void)setMomentCaptureMovieRecordingMasterEndTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0 forRequestWithSettingsID:(long long)a1;
- (void)_setupDepthMediaConfigurationForInput:(id)a0 attachedMediaKey:(id)a1;
- (void)_tagStillImageVISKeyFrames;
- (int)openValveWithIrisRequest:(id)a0;
- (void)_emitIrisMovieRequestWithInfo:(id)a0;
- (void)_trimQueueForInputIndex:(unsigned long long)a0;
- (BOOL)_spatialOverCaptureRecordingInProgress;
- (void)_setupDepthMediaConfigurationForOutput:(id)a0 attachedMediaKey:(id)a1;
- (void)setMasterClock:(struct OpaqueCMClock { } *)a0;
- (unsigned long long)_indexOfBufferBeforeOrEqualToPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0 inputIndex:(unsigned long long)a1 applyFrameDropsMitigation:(BOOL)a2;
- (struct { long long x0; int x1; unsigned int x2; long long x3; })_maxPTSForIrisRequest:(id)a0;
- (int)_emissionStatusForSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0;
- (id)_temporaryURLForIrisWithSettingsID:(long long)a0 isOriginalRecording:(BOOL)a1;
- (BOOL)_momentCaptureMovieRecordingInProgress;
- (void)_processQueuedVideoFrames;
- (void)_prepareToEmitFramesFromStartTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0 throughEndTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a1;
- (void)_emitIrisRequest:(id)a0 withEndTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a1;
- (id)initWithNumberOfVideoInputs:(unsigned long long)a0 numberOfAudioInputs:(unsigned long long)a1 numberOfMetadataInputs:(unsigned long long)a2 autoTrimMethod:(int)a3 vitalityScoringEnabled:(BOOL)a4 captureDeviceHasOverCaptureEnabled:(BOOL)a5 overCaptureEnabled:(BOOL)a6 depthEnabled:(BOOL)a7 videoStabilizationOverscanOverride:(float)a8 sequenceAdjusterEnabled:(BOOL)a9 visMotionMetadataPreloadingMode:(int)a10 intermediateJPEGCompressionQuality:(float)a11 intermediateJPEGCompressionRate:(float)a12 temporaryMovieDirectoryURL:(id)a13 cameraInfoByPortType:(id)a14 irisRequestDelegate:(id)a15;
- (void)_emitBuffersThroughPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0;
- (void)setIntermediateJPEGDownstreamRetainedBufferCount:(int)a0;
- (struct { long long x0; int x1; unsigned int x2; long long x3; })targetFrameDuration;
- (struct { long long x0; int x1; unsigned int x2; long long x3; })_hostPTSForSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0;
- (void)setVitalityScoringSmartCameraPipelineVersion:(struct { unsigned short x0; unsigned short x1; unsigned short x2; })a0;
- (void)_serviceIrisRequestsForCurrentTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0 emitBuffers:(BOOL)a1 ensureStillImageTimesAreStaged:(BOOL)a2;
- (struct { long long x0; int x1; unsigned int x2; long long x3; })_adjustedStartTimeForTrimmedStartTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0 ensuringAtLeast3FramesBeforeStillTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a1 ensuringFrameIsAfterTrimmedStartTime:(BOOL)a2 butNotEarlierThanOriginalStartTime:(struct { long long x0; int x1; unsigned int x2; long long x3; })a3;
- (int)enqueueIrisRequest:(id)a0;
- (float)_appliedZoomFromSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0;

@end
