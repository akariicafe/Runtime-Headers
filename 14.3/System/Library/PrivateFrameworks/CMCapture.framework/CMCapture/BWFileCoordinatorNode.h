@class FigCaptureRecordingSettings, NSArray, NSDictionary, BWNodeInput, BWPhotoDecompressor, NSMutableArray, BWMotionDataTimeMachine;
@protocol BWAudioSourceRecordingReadinessDelegate, BWNodeFileCoordinatorStatusDelegate;

@interface BWFileCoordinatorNode : BWNode {
    NSArray *_stagingQueues;
    NSMutableArray *_pendingIrisRequestMarkerBuffers;
    FigCaptureRecordingSettings *_settings;
    long long _currSettingsID;
    BOOL _currSettingsPrefersNoInterruptionsByRingtonesAndAlerts;
    BOOL _currSettingsIsIris;
    NSDictionary *_videoSettings;
    float _maxFrameRate;
    int _recordingState;
    BWNodeInput *_masterInput;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _inputOffset;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _lastMasterPTS;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _lastMasterDuration;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _lastMasterEndingPTS;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _masterStartingPTS;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _largestStagedSupportingAudioVideoStagedPTS;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _largestAudioPTS;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _largestMetadataPTS;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _masterStoppingPTS;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _stopRecordingPTS;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _stopRecordingAudioOffset;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _stopRecordingObservedEndingPTS;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _focusWaitTimeStart;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _torchWaitTimeStart;
    double _focusWaitTime;
    double _torchWaitTime;
    double _maxFocusWaitTime;
    int _firstFrameFocusingMethod;
    int _firstFrameAFStatus;
    int _numberOfFocusWaitBuffersDropped;
    int _numberOfTorchWaitBuffersDropped;
    BOOL _focusWaitTimedOut;
    BOOL _sendFlushMarkerWhenStopping;
    BOOL _haveSeenAudioWhenStarting;
    BOOL _lowLatencyCanTransitionEarlyToRecording;
    BOOL _lowLatencyCanTossExtraVideoWhenStopping;
    BOOL _firstAudioHasBeenProcessed;
    int _terminationErrorCode;
    struct OpaqueCMBlockBuffer { } *_emptyMetadataSampleData;
    const struct opaqueCMFormatDescription **_formatDescriptionsForInputs;
    struct OpaqueFigSimpleMutex { } *_stateMutex;
    unsigned long long _numInputs;
    unsigned long long _numOutputs;
    unsigned long long _numVideoInputs;
    unsigned long long _numAudioInputs;
    unsigned long long _numMetadataInputs;
    unsigned long long _numActionOnlyOutputs;
    unsigned long long _masterInputIndex;
    NSMutableArray *_idleInputIndicesWaitingForFlush;
    BOOL _lowLatencyModeEnabled;
    BOOL _flagsLastFrameForVideoCompressor;
    BOOL _overCaptureEnabled;
    BOOL _overCaptureIsRequested;
    BOOL _overCaptureActiveSlaveStreamForcedOff;
    BOOL _attachOverCaptureActiveSlaveStreamForcedOffMarkerBuffer;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _firstAudioPTSReadyForRecording;
    id<BWAudioSourceRecordingReadinessDelegate> _audioSourceDelegate;
    id<BWNodeFileCoordinatorStatusDelegate> _fileCoordiatorStatusDelegate;
    BWPhotoDecompressor *_thumbnailDecompressor;
    BWMotionDataTimeMachine *_motionDataTimeMachine;
    NSMutableArray *_videoSampleBuffersWaitingForMetadata;
    unsigned long long _cinematicLookAheadFrameCount;
    unsigned long long _pendingMotionDataSerialNumber;
    unsigned long long _largestEmittedLookAheadMotionDataSerialNumber;
    BOOL _lookAheadMotionDataPreloadHasBeenAttached;
    BOOL _receivedFinalEnqueuedIrisReferenceRequest;
}

+ (void)initialize;

- (void)handleDroppedSample:(id)a0 forInput:(id)a1;
- (void)didSelectFormat:(id)a0 forInput:(id)a1;
- (void)configurationWithID:(long long)a0 updatedFormat:(id)a1 didBecomeLiveForInput:(id)a2;
- (void)_prepareToResumeRecording;
- (id)nodeType;
- (int)cinematicLookAheadFrameCount;
- (void)pauseRecording;
- (id)init;
- (id)nodeSubType;
- (void)stopRecordingWithErrorCode:(int)a0;
- (void)didReachEndOfDataForInput:(id)a0;
- (void)renderSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0 forInput:(id)a1;
- (void)setFileCoordiatorStatusDelegate:(id)a0;
- (id)fileCoordiatorStatusDelegate;
- (void)dealloc;
- (void)recordingTerminated:(long long)a0;
- (void)_setRecordingState:(int)a0;
- (BOOL)_isPixelTransferSupportedForBuffer:(struct __CVBuffer { } *)a0;
- (struct opaqueCMSampleBuffer { } *)_copyFirstValidLowLatencyAudioBuffer:(struct opaqueCMSampleBuffer { } *)a0 inputIndex:(unsigned long long)a1 sbufPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; })a2;
- (BOOL)flagsLastFrameForVideoCompressor;
- (void)cancelStartRecordingWithSettings:(id)a0;
- (void)_attachFileCompletionThumbnailSourcePixelBufferAttachmentsToSettingsBuffer:(struct opaqueCMSampleBuffer { } *)a0 forSourceBuffer:(struct opaqueCMSampleBuffer { } *)a1;
- (void)resumeRecording;
- (id)_irisMovieInfosFromPendingIrisRequestMarkerBuffers;
- (struct opaqueCMSampleBuffer { } *)_createEmptyMetadataSBufWithPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0 forInputIndex:(unsigned long long)a1;
- (id)initWithNumberOfVideoInputs:(unsigned long long)a0 numberOfAudioInputs:(unsigned long long)a1 numberOfMetadataInputs:(unsigned long long)a2 numberOfActionOnlyOutputs:(unsigned long long)a3 overCaptureEnabled:(BOOL)a4 allowLowLatencyWhenPossible:(BOOL)a5 motionDataTimeMachine:(id)a6;
- (void)_emitStagedBufferForIndex:(unsigned long long)a0 stoppingOrPausing:(BOOL)a1;
- (void)setFlagsLastFrameForVideoCompressor:(BOOL)a0;
- (void)_addLookAheadMotionDataToMetadataForSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0 lookAheadMotionData:(id)a1;
- (void)_emitOrQueueSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0 forInput:(id)a1 toOutput:(id)a2 stoppingOrPausing:(BOOL)a3;
- (void)_stopRecordingWithErrorCode:(int)a0;
- (void)setAudioSourceDelegate:(id)a0;
- (id)audioSourceDelegate;
- (void)_doStartingToRecordWithSBuf:(struct opaqueCMSampleBuffer { } *)a0 inputIndex:(unsigned long long)a1 sbufPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; })a2;
- (void)_releaseSettings;
- (void)_emitSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0 forInput:(id)a1 toOutput:(id)a2;
- (BOOL)updateStopPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; })a0 audioOffset:(struct { long long x0; int x1; unsigned int x2; long long x3; })a1 previousStopPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; } *)a2 previousAudioOffset:(struct { long long x0; int x1; unsigned int x2; long long x3; } *)a3;
- (id)_cinematicFutureMetadataForFlushingSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0;
- (void)_emitMarkerBufferForFileWriterAction:(struct __CFString { } *)a0 withPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; })a1 settings:(id)a2 settingsID:(unsigned long long)a3 errorCode:(int)a4;
- (void)_completeTransitionToNotRecording;
- (void)_finishStoppingOrPausing:(BOOL)a0 withErrorCode:(int)a1;
- (void)_addFlushingFutureCinematicMetadataToSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0;
- (void)_handleIrisMovieRequest:(id)a0 input:(id)a1 sbuf:(struct opaqueCMSampleBuffer { } *)a2;
- (void)tryToEmitFramesWaitingForMotion;
- (void)_emitSampleBuffersWaitingForMotionData;
- (int)startRecordingWithSettings:(id)a0 videoSettings:(id)a1 maxFrameRate:(float)a2 stopAtPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; })a3;
- (void)_flushPendingIrisRequestMarkerBuffers;
- (void)_clearPendingIrisRequestMarkerBuffers;
- (void)_doStoppingOrPausingWithSBuf:(struct opaqueCMSampleBuffer { } *)a0 inputIndex:(unsigned long long)a1 sbufPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; })a2;
- (void)_flushSampleBuffersWaitingForMotionData;
- (void)_prepareToPauseOrStopRecording;
- (void)_sendPrefersNoInterruptionsByRingtonesAndAlertsNotificationWithState:(BOOL)a0;
- (void)_prepareToStartRecordingWithSettings:(id)a0 videoSettings:(id)a1 maxFrameRate:(float)a2;
- (void)setCinematicLookAheadFrameCount:(int)a0;
- (void)_prepareOverCaptureVideoBufferForEmission:(struct opaqueCMSampleBuffer { } *)a0 emissionTimeStamp:(id)a1;
- (void)_performFlushAction;

@end
