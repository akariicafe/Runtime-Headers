@class NSMutableDictionary, NWUsageTargetSelector, CellThroughputAdviser, NSDate, NSObject, NSDictionary, CoreTelephonyShim, RepeatedConnFailureDetector, NWUsageManager, NSString, AppAnalytics, ProcessAnalytics, ObjectAnalytics, CellularStateRelay, ProxyAnalytics, NetworkAnalyticsStateRelay, UsageAnalytics;
@protocol OS_dispatch_source;

@interface FlowAnalyticsEngine : AnalyticsEngineCore <ProxyAnalyticsDelegate, NWUsageManagerDelegate, CellThroughputAdviserDelegate, ManagedEventInfoProtocol> {
    UsageAnalytics *uspace;
    ProcessAnalytics *pspace;
    AppAnalytics *aspace;
    ObjectAnalytics *calspace;
    NSMutableDictionary *processCache;
    NSMutableDictionary *appState;
    NSMutableDictionary *appCompactState;
    BOOL trackingRequiredForBaseband;
    NSMutableDictionary *pluginToBundleCache;
    NSMutableDictionary *audioBundleCache;
    NWUsageManager *nstatUsageManager;
    BOOL nstatUsageManagerConfigured;
    int cellularInterfaceIndex;
    NSDate *lastCellularThresholdRefreshTime;
    NWUsageTargetSelector *cellThresholdTargetSelector;
    NWUsageTargetSelector *cellRNFPeriodEndTargetSelector;
    NSString *networkUsageTraceFileRootName;
    int networkUsageTraceFileFD;
    struct ct_green_tea_logger_s { } *_greenTeaLogger;
    unsigned long long logStateHandle;
    NSObject<OS_dispatch_source> *siginfo;
    unsigned int pdpBitmap;
    id /* block */ dataUsageRefreshCompletionBlock;
    int dataUsageRefreshCompletionNumWaiting;
    NSDate *lastFullRefreshTime;
    id tetherObserver;
    BOOL isTetherActive;
    id algosScoreObserver;
    id appStateChangeObserver;
    id cellTCCapabilityObserver;
    id transferSizeObserver;
    id assetDownloadObserver;
    id cellThroughputAdvisoryReqObserver;
    CellThroughputAdviser *cellThroughputAdviser;
    NSString *throughputAdviserTraceFileRootName;
    NSDictionary *throughputAdviserConfigurationParameters;
    NSObject<OS_dispatch_source> *throughputAdvicePollingTimer;
    NWUsageTargetSelector *throughputAdviceTargetSelector;
    double throughputAdvicePollingInterval;
    unsigned long long assetDownloadProcessId;
    RepeatedConnFailureDetector *repeatedConnFailureDetector;
    NSMutableDictionary *flowCache;
    NSMutableDictionary *flowInstant;
    id flowObserver;
    id relayReadyObserver;
    ObjectAnalytics *fspace;
    ObjectAnalytics *lfpspace;
    ObjectAnalytics *domspace;
    ObjectAnalytics *expspace;
    NSObject<OS_dispatch_source> *flushOldFlowRecordsTimer;
    BOOL isScreenDark;
    NSDate *screenDarkTimestamp;
    BOOL isScreenLocked;
    char _nrFrequencyBand;
    id userSwitchObserver;
    unsigned long long usageCoalescingSpanSecs;
    unsigned long long usageWindowUnitsCount;
    unsigned long long outcomeArrayLogEntryCount;
    BOOL flowCountExceededThreshold;
    BOOL thunderingHerdFlowCountExceededThreshold;
    NSMutableDictionary *estAwdMetricsDict;
    unsigned long long trackedFlowCountSincePrimaryInterfaceChanged;
    CoreTelephonyShim *ctShim;
}

@property (retain) CellularStateRelay *cellRelay;
@property (retain) NetworkAnalyticsStateRelay *wifiRelay;
@property (retain) NetworkAnalyticsStateRelay *mostRecentPrimaryRelay;
@property (nonatomic) BOOL delegateToProxyAnalytics;
@property (retain, nonatomic) ProxyAnalytics *proxyAnalytics;
@property BOOL haveCalendar;
@property BOOL haveTypicalUsage;
@property (readonly, nonatomic) NSMutableDictionary *flowWatchers;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (void)performAppExperiencePeriodicActivityWithReply:(id /* block */)a0;
+ (id)appBundleIdentifierFromAuditToken:(struct { unsigned int x0[8]; })a0;
+ (void)refreshDataUsageFor:(id)a0 withCallback:(id /* block */)a1;
+ (void)recentUsageForApps:(id)a0 replyQueue:(id)a1 reply:(id /* block */)a2;
+ (void)endRNFPeriod;
+ (void)appsWithFlowsPassingTest:(id /* block */)a0 replyQueue:(id)a1 reply:(id /* block */)a2;
+ (id)foregroundAppKeys;
+ (void)checkForegroundStateForProcessWithUUID:(id)a0 replyQueue:(id)a1 reply:(id /* block */)a2;
+ (id)appBundleIdentifierFromBundleIdentifier:(id)a0;
+ (id)queue;
+ (id)_appBundleIdentifierFromBundleRecord:(id)a0;
+ (BOOL)hasAnyForegroundApp;
+ (void)identifierForUUID:(id)a0 replyQueue:(id)a1 reply:(id /* block */)a2;
+ (void)performAppPeriodicActivityWithReply:(id /* block */)a0;
+ (void)workspaceSaveWithCallback:(id /* block */)a0;

- (void)_changedForegroundState:(BOOL)a0 forBundle:(id)a1;
- (void)_insertProcCache:(id)a0 underName:(id)a1;
- (void)generateInfoForId:(unsigned long long)a0 context:(const char *)a1 uuid:(id)a2 completionBlock:(id /* block */)a3;
- (void)_performAppExperiencePeriodicTasksWithReply:(id /* block */)a0;
- (void)usageManager:(id)a0 didReceiveSnapshot:(id)a1;
- (BOOL)_processNameIsValid:(id)a0;
- (void)_handleApplicationNotificationStateChangedForBundleName:(id)a0 edgeMode:(BOOL)a1 intervalType:(int)a2;
- (void)logOutcomeArray:(id)a0;
- (void).cxx_destruct;
- (id)_fetchFromProcCacheWithName:(id)a0;
- (void)relayCellThroughputAdvice:(unsigned int)a0 at:(double)a1;
- (id)_trafficEnvelopeToTier:(double)a0;
- (void)_removeInfoFromWorkspaceForProcess:(id)a0;
- (void)identifierForUUID:(id)a0 reply:(id /* block */)a1;
- (void)usageManager:(id)a0 thresholdReachedOn:(unsigned int)a1;
- (void)_newFlowData:(id)a0;
- (void)_dumpState;
- (void)dealloc;
- (void)_recentUsageForApps:(id)a0 replyQueue:(id)a1 reply:(id /* block */)a2;
- (id)setOption:(id)a0;
- (id)_fetchFromFlowCacheWithName:(id)a0;
- (void)_checkForegroundStateForProcessWithUUID:(id)a0 replyQueue:(id)a1 reply:(id /* block */)a2;
- (void)_saveAndUnloadSelectState;
- (unsigned long long)_pruneAppExperienceRecords;
- (void)_stopMonitoringNetworkInterface:(int)a0;
- (void)createSnapshotFor:(id)a0 pred:(id)a1 actions:(id)a2 reply:(id /* block */)a3;
- (void)_generateFlowAnomalySymptom:(unsigned int)a0 currentUsage:(unsigned long long)a1 snapshot:(id)a2;
- (BOOL)_isLiveUsageInRollingWindow:(id)a0 forTime:(id)a1;
- (void)performQueryOnEntity:(id)a0 pred:(id)a1 sort:(id)a2 actions:(id)a3 service:(id)a4 connection:(id)a5 reply:(id /* block */)a6;
- (id)_appExperienceForApp:(id)a0 forTime:(id)a1;
- (void)_compactUsageForApp:(id)a0 intervalType:(int)a1 givenLastRun:(id)a2;
- (void)_newCoreMediaAssetDownloadEvent:(id)a0;
- (void)_newExpectedTransfer:(id)a0;
- (void)_calendarUsageForApp:(id)a0 givenLastRun:(id)a1;
- (id)_processFetchForName:(id)a0 bundle:(id)a1 shouldFillMiss:(BOOL)a2;
- (id)initWithWorkspace:(id)a0 params:(id)a1 queue:(id)a2;
- (BOOL)_hasAnyForegroundApp;
- (void)performAppPeriodicTasksComplete:(id)a0 error:(id)a1;
- (void)_pruneFlowHistory;
- (BOOL)_handlesFlowEntity:(id)a0;
- (void)_reportThresholdedFlowCount:(unsigned long long)a0 threshold:(unsigned long long)a1;
- (void)performAppExperiencePeriodicTasksComplete:(id)a0 error:(id)a1;
- (void)_algosScoreFor:(id)a0 score:(double)a1;
- (int)_performQueryOnEntityFromProcCache:(id)a0 target:(id)a1 pred:(id)a2 found:(id *)a3;
- (double)_usageFingerprintForBundleName:(id)a0;
- (void)_logExcessCellUsage:(long long)a0 snapshot:(id)a1;
- (void)resetDataFor:(id)a0 nameKind:(id)a1;
- (void)_removeFromProcCache:(id)a0;
- (void)_refreshFullDataUsageWithCallback:(id /* block */)a0;
- (BOOL)_requiresUserValidationPredicateForEntity:(id)a0;
- (void)_refreshFullDataUsageComplete;
- (void)_archiveRecord:(id)a0;
- (void)identifierForUUID:(id)a0 queue:(id)a1 reply:(id /* block */)a2;
- (void)_removeAllInfoForProcess:(id)a0 withUUID:(id)a1;
- (void)_endRNFPeriod;
- (BOOL)_isLiveFlowPerfinScope:(id)a0 forTime:(id)a1 andTag:(id)a2;
- (void)_didReceiveSnapshot:(id)a0;
- (void)_handleSnapshot:(id)a0;
- (int)_performQueryOnEntityFromInstantFlowCache:(id)a0 target:(id)a1 pred:(id)a2 found:(id *)a3;
- (unsigned long long)_liveUsageCountForProcess:(id)a0 subscriberTag:(id)a1;
- (void)performQueryPostProcessing:(id)a0 actions:(id)a1 processOutcome:(id)a2;
- (void)_startMonitoringNetworkInterface:(int)a0 usingThreshold:(unsigned long long)a1;
- (id)_attemptConvertingPluginNameToContainingAppName:(id)a0;
- (id)_parseEvent:(id)a0 withGeneration:(id *)a1;
- (BOOL)_handlesProcEntity:(id)a0;
- (void)sendPowerLogReport:(id)a0 isStart:(BOOL)a1;
- (BOOL)_initializeLocalCache;
- (void)_refreshDataUsageFor:(id)a0 withCallback:(id /* block */)a1;
- (int)performQueryOnEntityFromCache:(id)a0 pred:(id)a1 altpred:(id *)a2 actions:(id)a3 found:(id *)a4;
- (unsigned long long)_clearUninstalledAppEntries;
- (BOOL)_isLiveUsageinScope:(id)a0 forTime:(id)a1;
- (void)performThresholdingOn:(id)a0 forKey:(id)a1 andValue:(id)a2 connection:(id)a3 createdBlock:(id /* block */ *)a4 hitBlock:(id /* block */)a5 errorBlock:(id /* block */)a6;
- (id)_foregroundAppKeys;
- (id)getOption:(id)a0;
- (void)_checkCellExcessUsageActions:(unsigned long long)a0 previous:(unsigned long long)a1 snapshot:(id)a2;
- (void)setTimerCallbackWithDelay:(double)a0 context:(id)a1;
- (void)observeValueForKeyPath:(id)a0 ofObject:(id)a1 change:(id)a2 context:(void *)a3;
- (id)_has1stPartyImpliedBundleNameBehavior:(id)a0;
- (void)setPollingRate:(double)a0;
- (void)_removeOldFlowRecords;
- (void)_updateLiveUsage:(id)a0 wifiIn:(long long)a1 wifiOut:(long long)a2 cellIn:(long long)a3 cellOut:(long long)a4 wiredIn:(long long)a5 wiredOut:(long long)a6 xIn:(long long)a7 xOut:(long long)a8 isJumboFlow:(BOOL)a9 closing:(BOOL)a10;
- (id)_liveUsageFetchForProcess:(id)a0;
- (void)postAWDMetric:(id)a0 withIdentifier:(unsigned int)a1;
- (void)_startFlowMonitoring;
- (id)_safePredFrom:(id)a0 forEntity:(id)a1;
- (void)_refreshFullDataUsage;
- (void)getNetworkBitmapsWithNames:(id)a0 startTime:(unsigned long long)a1 endTime:(unsigned long long)a2 reply:(id /* block */)a3;
- (void)_liveUsagePackForProcess:(id)a0 subscriberTag:(id)a1;
- (void)_updateTetheringUsage:(BOOL)a0;
- (id)_flowFetchForName:(id)a0;
- (void)_applyCountsTo:(id)a0 fromLiveUsage:(id)a1 mustReset:(BOOL)a2;
- (void)_generateInfoForId:(unsigned long long)a0 context:(const char *)a1 uuid:(id)a2 completionBlock:(id /* block */)a3;
- (void)_appsWithFlowsPassingTest:(id /* block */)a0 replyQueue:(id)a1 reply:(id /* block */)a2;
- (void)_handleApplicationNotificationCompactForBundleName:(id)a0 edgeMode:(BOOL)a1;
- (void)workspaceSaveWithCallback:(id /* block */)a0;
- (BOOL)_bundleBackgroundAudioCapable:(id)a0;
- (BOOL)handlesEntity:(id)a0;
- (void)_performAppPeriodicTasksWithReply:(id /* block */)a0;

@end
