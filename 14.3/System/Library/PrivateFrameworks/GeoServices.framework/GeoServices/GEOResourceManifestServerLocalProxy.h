@class GEOActiveTileGroup, NSObject, GEOResourceManifestDownloadTask, _GEOResourceManifestServerLocalProxyMigrationState, GEOResourceFiltersManager, NSMutableArray, GEOResourceManifestDownload, NSString, GEOResourceManifestConfiguration, NSOperationQueue, NSArray, NSError, NSProgress;
@protocol GEOResourceManifestServerProxyDelegate, OS_dispatch_source, OS_dispatch_queue, NSObject;

@interface GEOResourceManifestServerLocalProxy : NSObject <GEOResourceFiltersManagerDelegate, GEODataStateCapturing, GEOKeyBagProtectedDataDidBecomeAvailableObserver, GEOConfigChangeListenerDelegate, GEOResourceManifestServerProxy> {
    GEOResourceManifestDownloadTask *_manifestDownloadTask;
    NSObject<OS_dispatch_queue> *_workQueue;
    NSOperationQueue *_workOperationQueue;
    GEOResourceManifestConfiguration *_configuration;
    BOOL _wantsManifestUpdateOnReachabilityChange;
    NSObject<OS_dispatch_source> *_manifestUpdateTimer;
    BOOL _wantsTileGroupUpdateOnReachabilityChange;
    NSObject<OS_dispatch_source> *_tileGroupUpdateTimer;
    GEOResourceManifestDownload *_resourceManifest;
    GEOActiveTileGroup *_activeTileGroup;
    id<NSObject> _newActiveTileGroupTransaction;
    BOOL _started;
    unsigned long long _manifestRetryCount;
    double _lastManifestRetryTimestamp;
    unsigned long long _tileGroupRetryCount;
    double _lastTileGroupRetryTimestamp;
    NSString *_authToken;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _authTokenLock;
    NSError *_lastResourceManifestLoadError;
    NSMutableArray *_manifestUpdateCompletionHandlers;
    NSMutableArray *_opportunisticManifestUpdateCompletionHandlers;
    long long _currentManifestUpdateType;
    GEOResourceFiltersManager *_filtersManager;
    NSArray *_tileGroupMigrators;
    unsigned long long _stateCaptureHandle;
    _GEOResourceManifestServerLocalProxyMigrationState *_tileGroupMigrationState;
    NSProgress *_updateProgress;
    NSProgress *_currentUpdateProgress;
}

@property (retain, nonatomic) GEOActiveTileGroup *activeTileGroup;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;
@property (weak, nonatomic) id<GEOResourceManifestServerProxyDelegate> delegate;

- (void)_updateTimerFired;
- (void)_reachabilityChanged:(id)a0;
- (id)serverQueue;
- (void)closeConnection;
- (void)_changeActiveTileGroupIfNeededForManifestURL:(id)a0 oldURL:(id)a1;
- (id)serverOperationQueue;
- (void)_startServer;
- (void)openConnection;
- (void)_createMigrators;
- (void)_tileGroupTimerFired;
- (void)protectedDataDidBecomeAvailable:(id)a0;
- (void)_loadFromDisk;
- (void)_forceChangeActiveTileGroup:(id)a0 flushTileCache:(BOOL)a1;
- (void).cxx_destruct;
- (void)cancelCurrentManifestUpdate;
- (void)valueChangedForGEOConfigKey:(struct { unsigned int x0; void *x1; })a0;
- (id)authToken;
- (void)setManifestToken:(id)a0 completionHandler:(id /* block */)a1;
- (id)initWithDelegate:(id)a0 configuration:(id)a1;
- (void)dealloc;
- (void)_considerChangingActiveTileGroup;
- (void)activateResourceScale:(int)a0;
- (void)_cancelMigrationTasks;
- (id)configuration;
- (void)_changeActiveTileGroup:(id)a0 activeScales:(id)a1 activeScenarios:(id)a2 dataSet:(id)a3 migrationTasks:(id)a4 flushTileCache:(BOOL)a5 completionHandler:(id /* block */)a6;
- (BOOL)_writeActiveTileGroupToDisk:(id)a0 error:(id *)a1;
- (void)_notifyImmediateManifestUpdateCompletionHandlers:(id)a0;
- (void)_resetCurrentUpdateState;
- (void)_setCurrentUpdateType:(long long)a0 completionBlock:(id /* block */)a1;
- (id)updateProgress;
- (void)deactivateResourceScale:(int)a0;
- (void)_countryProvidersDidChange:(id)a0;
- (void)_manifestURLDidChange:(id)a0;
- (void)_addOpportunisticManifestUpdateCompletionHandler:(id /* block */)a0;
- (void)forceUpdate:(long long)a0 completionHandler:(id /* block */)a1;
- (void)_notifyManifestUpdateCompletionHandlers:(id)a0;
- (unsigned long long)maximumZoomLevelForStyle:(int)a0 scale:(int)a1;
- (void)_networkDefaultsDidChange:(id)a0;
- (id)migrationTaskOptions;
- (oneway void)setActiveTileGroupIdentifier:(id)a0;
- (void)_addManifestUpdateCompletionHandler:(id /* block */)a0;
- (BOOL)_writeManifestToDisk:(id)a0 error:(id *)a1;
- (void)filtersManagerDidChangeActiveFilters:(id)a0;
- (void)getResourceManifestWithHandler:(id /* block */)a0;
- (id)captureStateDataWithHints:(struct os_state_hints_s { unsigned int x0; char *x1; unsigned int x2; unsigned int x3; } *)a0;
- (oneway void)resetActiveTileGroup;
- (void)_scheduleUpdateTimerWithTimeInterval:(double)a0;
- (void)_updateManifest;
- (id)_manifestURL;
- (void)_cancelManifestUpdate;
- (void)_terminationRequested:(id)a0;
- (void)_updateManifest:(id /* block */)a0;
- (void)_handleManifestUpdateError:(id)a0;
- (BOOL)_writeManifestToDiskWithUpdatedMetadataForURL:(id)a0 eTag:(id)a1 error:(id *)a2;
- (void)_startOpportunisticMigrationToTileGroup:(id)a0 inResourceManifest:(id)a1 activeScales:(id)a2 activeScenarios:(id)a3 dataSet:(id)a4;
- (void)performOpportunisticResourceLoading;
- (void)_notifyOpportunisticManifestUpdateCompletionHandlers:(id)a0;
- (BOOL)_updateManifestIfNecessary:(id /* block */)a0;
- (void)_scheduleTileGroupUpdateTimerWithTimeInterval:(double)a0;
- (id)_idealTileGroupToUse;
- (void)activateResourceScenario:(int)a0;
- (void)deactivateResourceScenario:(int)a0;
- (void)updateIfNecessary:(id /* block */)a0;
- (void)_activeTileGroupOverridesChanged:(id)a0;
- (void)setActiveTileGroupIdentifier:(id)a0 updateType:(long long)a1 completionHandler:(id /* block */)a2;

@end
