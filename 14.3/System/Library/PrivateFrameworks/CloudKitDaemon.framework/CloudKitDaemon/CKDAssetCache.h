@class CKSQLitePool, NSString, NSMutableDictionary, NSOperationQueue, NSMutableSet, NSObject, CKDMMCS;
@protocol OS_dispatch_queue, NSObject;

@interface CKDAssetCache : NSObject

@property (retain, nonatomic) NSString *applicationBundleID;
@property (retain, nonatomic) NSString *dbPath;
@property (retain, nonatomic) NSString *fileStagingPath;
@property (retain, nonatomic) NSString *fileDownloadPath;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *queue;
@property (retain, nonatomic) NSOperationQueue *opQueue;
@property (nonatomic) int fileDownloadPathFd;
@property BOOL isEvictionScheduled;
@property (nonatomic) BOOL hasMigrated;
@property (nonatomic) BOOL didDrop;
@property (nonatomic) long long checkoutCount;
@property (retain, nonatomic) id<NSObject> assetHandleExpirationNotificationObserver;
@property (retain, nonatomic) NSMutableDictionary *volumeUUIDByVolumeIndex;
@property (retain, nonatomic) NSMutableDictionary *volumeIndexByVolumeUUID;
@property (retain, nonatomic) NSMutableSet *deferredDeletedAssetHandles;
@property (retain, nonatomic) NSMutableDictionary *deferredLastUsedTimeByTrackingUUID;
@property (weak, nonatomic) CKDMMCS *MMCS;
@property (readonly, nonatomic) CKSQLitePool *dbPool;
@property (nonatomic) BOOL isUnitTestingAccount;

+ (id)assetCacheWithApplicationBundleID:(id)a0 assetDirectoryContext:(id)a1 didInit:(BOOL *)a2 error:(id *)a3;
+ (id)_sharedCachesQueue;
+ (id)_sharedCachesByPath;
+ (int)openFdForDownloadPath:(id)a0 error:(id *)a1;
+ (void)registerExpirationForAssetHandles;

- (void)drop;
- (void).cxx_destruct;
- (void)showAssetCache;
- (void)cleanup;
- (void)dealloc;
- (unsigned long long)countAssetCacheItems;
- (void)clearAssetCache;
- (void)cancelExpiryTimer;
- (unsigned long long)evictAllFilesForced:(BOOL)a0;
- (id)trackDownloadedData:(id)a0 signature:(id)a1 error:(id *)a2;
- (id)trackCachedButNotRegisteredMMCSItems:(id)a0 error:(id *)a1;
- (void)stopTrackingAssetHandlesByItemIDs:(id)a0;
- (void)setupPersistentStateAtStartup;
- (void)checkAssetHandlesForRegisteredMMCSItems:(id)a0;
- (void)unregisterItemIDs:(id)a0 completionBlock:(id /* block */)a1;
- (id)updateAssetHandlesForRegisteredMMCSItems:(id)a0 error:(id *)a1;
- (id)_initWithApplicationBundleID:(id)a0 assetDirectoryContext:(id)a1 error:(id *)a2;
- (BOOL)initDatabaseWithError:(id *)a0;
- (void)_setVolumeIndex:(id)a0 forVolumeUUID:(id)a1;
- (id)existingOrNewVolumeIndexForVolumeUUID:(id)a0 usingDB:(id)a1;
- (id)volumeUUIDWithVolumeIndex:(id)a0;
- (id)existingOrNewVolumeIndexForVolumeUUID:(id)a0;
- (void)expireAssetHandlesIfNecessaryWithGroup:(id)a0;
- (unsigned long long)_clearForced:(BOOL)a0 group:(id)a1;
- (unsigned long long)_evictWithEvictionInfo:(id)a0;
- (void)scheduleUnregisterItemIDsAndDeleteAssetHandlesWithEvictionInfo:(id)a0 completionBlock:(id /* block */)a1;
- (id)deviceIDForVolumeIndex:(id)a0;
- (id)assetHandleWithCachedPath:(id)a0;
- (void)scheduleUnregisterItemsAndDeleteUnregisteredAssetHandlesWithIDs:(id)a0 deleteUnregisteredAssetHandlesWithIDs:(id)a1 completionBlock:(id /* block */)a2;
- (id)_saveData:(id)a0 error:(id *)a1;
- (id)existingOrNewVolumeIndexForDeviceID:(id)a0;
- (id)existingOrNewVolumeIndexForDeviceID:(id)a0 usingDB:(id)a1;
- (void)unregisterDeferredItemIDs:(id)a0 andDeleteAssetHandles:(id)a1 usingDB:(id)a2;
- (void)updateDeferredLastAccessTimeForUUIDsUsingDB:(id)a0;
- (void)_scheduleEvictionForDownloadedFiles;
- (void)_scheduleExpirationForAssetHandles;
- (id)_getAssetHandlesForDownloadedMMCSItems:(id)a0 error:(id *)a1;
- (id)_getAssetHandlesForCachedButNotRegisteredMMCSItems:(id)a0 error:(id *)a1;
- (BOOL)parseCachedPath:(id)a0 assetHandleUUIDString:(id *)a1 assetSignatureString:(id *)a2;
- (BOOL)parseCachedPath:(id)a0 assetHandleUUID:(id *)a1 assetSignature:(id *)a2;
- (unsigned long long)_evictDownloadedFilesEvictionInfo:(id)a0;
- (unsigned long long)_evictDownloadedFilesWithDatabase:(id)a0 evictionInfo:(id)a1;
- (void)_expireAssetHandlesWithExpiryDate:(id)a0 group:(id)a1;
- (void)_expireAssetHandlesWithGroup:(id)a0;
- (void)_deleteAssetHandlesAndUnregisterItemsForUnmountedAssetVolumesWithDB:(id)a0;
- (void)_resetAssetInflightUsingDB:(id)a0;
- (void)forgetVolumeUUID:(id)a0;
- (unsigned long long)clearForced:(BOOL)a0;
- (void)scheduleUnregisterItemsAndDeleteUnregisteredAssetHandlesWithIDs:(id)a0;
- (id)updateAssetHandlesForChunkedMMCSItems:(id)a0 error:(id *)a1;
- (BOOL)updateAssetHandlesForGetMMCSItems:(id)a0 error:(id *)a1;
- (BOOL)updateAssetHandlesForPutMMCSItems:(id)a0 error:(id *)a1;
- (id)trackDownloadedMMCSItems:(id)a0 error:(id *)a1;
- (BOOL)startTrackingRegisterOrPutAssetHandles:(id)a0 operationType:(long long)a1 error:(id *)a2;
- (BOOL)startTrackingGetAssetHandles:(id)a0 operationType:(long long)a1 error:(id *)a2;
- (void)deferredStopTrackingAssetHandlesByItemIDs:(id)a0;
- (id)findAssetHandleForItemID:(unsigned long long)a0 error:(id *)a1;
- (void)deferredUpdateLastTimeUsedForUUID:(id)a0;
- (unsigned long long)predictedEvictedSizeForAllFilesForced:(BOOL)a0;

@end
