@class HKDataFlowLink, HDProfile, BKSProcessAssertion, NSDate, HDWorkoutSessionTaskServer, NSObject, HKSource, HDWorkoutManager, HDWorkoutSessionEntity, HKStateMachine, HDHealthStoreClient, _HKCurrentWorkoutSnapshot, NSString, HKWorkoutConfiguration, _HKExpiringCompletionTimer, HKObserverSet, NSUUID;
@protocol HDWorkoutDataAccumulator, HDWorkoutSessionController, OS_dispatch_source, OS_dispatch_queue;

@interface HDWorkoutSessionServer : NSObject <HKDataFlowLinkProcessor, HKStateMachineDelegate, HDWorkoutSessionStateController, HDWorkoutDataSource> {
    HDProfile *_profile;
    HDWorkoutManager *_workoutManager;
    NSObject<OS_dispatch_queue> *_queue;
    NSObject<OS_dispatch_queue> *_persistenceQueue;
    HKDataFlowLink *_workoutDataFlowLink;
    HKObserverSet *_observers;
    id<HDWorkoutSessionController> _sessionController;
    _HKExpiringCompletionTimer *_invalidationTimer;
    BKSProcessAssertion *_invalidationAssertion;
    HDWorkoutSessionEntity *_persistentEntity;
    double _stopEventGenerationWaitInterval;
    HKStateMachine *_stateMachine;
    HKStateMachine *_targetStateMachine;
    BOOL _hasFailed;
    _HKCurrentWorkoutSnapshot *_currentWorkoutSnapshot;
    NSObject<OS_dispatch_source> *_latestActivityUpdateTimer;
}

@property (readonly, copy, nonatomic) NSUUID *identifier;
@property (readonly, copy, nonatomic) HKWorkoutConfiguration *workoutConfiguration;
@property (readonly, copy, nonatomic) NSString *applicationIdentifier;
@property (readonly, nonatomic) BOOL isActive;
@property (readonly, nonatomic) BOOL canBePaused;
@property (readonly, nonatomic) BOOL isFirstParty;
@property (readonly, nonatomic) BOOL shouldStopPreviousSession;
@property (weak, nonatomic) HDWorkoutSessionTaskServer *taskServer;
@property (retain, nonatomic) HDHealthStoreClient *client;
@property (readonly, copy, nonatomic) NSString *clientProcessBundleIdentifier;
@property (readonly, copy, nonatomic) HKSource *clientSource;
@property (readonly, nonatomic) long long state;
@property (readonly, copy, nonatomic) NSDate *startDate;
@property (readonly, copy, nonatomic) NSDate *stopDate;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;
@property (readonly, nonatomic) id<HDWorkoutDataAccumulator> workoutDataAccumulator;
@property (readonly) HKDataFlowLink *workoutDataFlowLink;
@property (readonly, copy) NSUUID *workoutDataProcessorUUID;

+ (id)recoveredSessionServerWithProfile:(id)a0 sessionUUID:(id)a1 workoutManager:(id)a2 error:(id *)a3;
+ (BOOL)finishAllWorkoutSessionsForClient:(id)a0 profile:(id)a1 error:(id *)a2;
+ (id)sessionIdentifierForRecoveryInProfile:(id)a0 error:(id *)a1;
+ (BOOL)finishAllWorkoutsExcludingSessions:(id)a0 profile:(id)a1 error:(id *)a2;
+ (BOOL)_finishSessionControllerForSessionEntity:(id)a0 profile:(id)a1 transaction:(id)a2 error:(id *)a3;
+ (Class)_sessionControllerClassFromWorkoutConfiguration:(id)a0 clientApplicationIdentifier:(id)a1;
+ (id)workoutSessionServerStateMachineForConfiguration:(id)a0 sessionUUID:(id)a1;
+ (id)clientTargetStateMachineForConfiguration:(id)a0 sessionUUID:(id)a1;
+ (void)unitTest_setDefaultStopEventGenerationWaitInterval:(double)a0;

- (void)finish;
- (void)endHeartRateRecovery;
- (void).cxx_destruct;
- (void)removeObserver:(id)a0;
- (void)dealloc;
- (void)stateMachine:(id)a0 persistTransition:(id)a1;
- (void)stateMachine:(id)a0 didTransition:(id)a1 fromState:(id)a2 toState:(id)a3 date:(id)a4 error:(id)a5;
- (void)stateMachine:(id)a0 willEnterState:(id)a1 date:(id)a2 error:(id)a3;
- (void)stateMachine:(id)a0 didEnterState:(id)a1 date:(id)a2 error:(id)a3;
- (BOOL)resumeWithError:(id *)a0;
- (void)addObserver:(id)a0 queue:(id)a1;
- (void)generateError:(id)a0;
- (BOOL)pauseWithError:(id *)a0;
- (void)unitTest_setCMWorkoutManager:(id)a0;
- (void)workoutDataDestination:(id)a0 requestsDataFrom:(id)a1 to:(id)a2;
- (void)workoutDataDestination:(id)a0 didChangeFromState:(unsigned long long)a1 toState:(unsigned long long)a2;
- (void)workoutDataDestination:(id)a0 requestsFinalDataFrom:(id)a1 to:(id)a2 completion:(id /* block */)a3;
- (void)workoutDataDestination:(id)a0 didUpdateConfiguration:(id)a1;
- (void)setAssociatedWorkoutBuilderEntity:(id)a0;
- (void)setWorkoutDataAccumulator:(id)a0;
- (BOOL)setTargetState:(long long)a0 date:(id)a1 error:(id *)a2;
- (void)generateMetadata:(id)a0;
- (void)finishAggregationWithDate:(id)a0;
- (void)generateConfigurationUpdate:(id)a0;
- (void)generateEvent:(id)a0;
- (void)autoPauseWithDate:(id)a0;
- (void)autoResumeWithDate:(id)a0;
- (id)currentWorkoutSnapshot;
- (BOOL)storeSessionControllerState:(id)a0 forRecoveryIdentifier:(id)a1 error:(id *)a2;
- (BOOL)prepareWithError:(id *)a0;
- (BOOL)startActivityWithDate:(id)a0 error:(id *)a1;
- (BOOL)stopActivityWithDate:(id)a0 error:(id *)a1;
- (BOOL)endWithError:(id *)a0;
- (void)_loadOrCreatePersistentEntity;
- (id)initWithProfile:(id)a0 configuration:(id)a1 sessionUUID:(id)a2 workoutManager:(id)a3;
- (void)didBecomeCurrent;
- (void)didResignCurrentWithError:(id)a0;
- (id)taskServerConfigurationForRecoveryWithError:(id *)a0;
- (id)_detailedDescriptionString;
- (void)_queue_startInvalidationTimer;
- (id)_detailedDescriptionComponents;
- (void)_queue_cacheClientIdentifiers;
- (void)_queue_stopInvalidationTimer;
- (void)_queue_setupSessionController;
- (void)_queue_startLatestActivityUpdateTimer;
- (BOOL)_recoverPersistedState;
- (BOOL)_persistenceQueue_resendWorkoutEventsToDataDestination:(id)a0 error:(id *)a1;
- (void)_queue_deleteSessionAndFinishAssociatedBuilderAtDate:(id)a0;
- (void)_queue_evaluateRequestedTargetStateAtDate:(id)a0;
- (void)_queue_generateEventWithType:(long long)a0 date:(id)a1;
- (void)_queue_generateError:(id)a0;
- (void)_queue_setTargetState:(long long)a0 date:(id)a1 completion:(id /* block */)a2;
- (void)_queue_generateEvent:(id)a0;
- (void)_queue_generateMetadata:(id)a0;
- (void)_queue_generateConfigurationUpdate:(id)a0;
- (BOOL)_persistenceQueue_storeSessionControllerState:(id)a0 forRecoveryIdentifier:(id)a1 error:(id *)a2;
- (void)_queue_stopLatestActivityUpdateTimer;
- (void)_queue_processStopEvent:(id)a0;
- (void)_queue_invalidationTimerDidFire;
- (id)_queue_currentWorkoutSessionConfiguration;
- (id)_retrieveSessionControllerStateForRecoveryIdentifier:(id)a0 error:(id *)a1;
- (void)_queue_latestActivityUpdateTimerDidFire;
- (BOOL)_enqueueEvent:(long long)a0 stateMachine:(id)a1 date:(id)a2 error:(id *)a3;
- (void)unitTest_setSessionController:(id)a0;
- (void)unitTest_setStopEventGenerationWaitInterval:(double)a0;
- (void)unitTest_generateStopEvent;
- (void)unitTest_generateWorkoutConfigurationUpdate:(id)a0;
- (BOOL)unitTest_updateLatestActivityDate:(id)a0;

@end
