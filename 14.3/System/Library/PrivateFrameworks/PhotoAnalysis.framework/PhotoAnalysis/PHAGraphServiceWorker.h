@class NSHashTable, NSDate, PGManager, PHAPredicateValidator, NSString, NSMutableDictionary, NSDictionary, NSObject, NSProgress;
@protocol OS_dispatch_queue, OS_os_transaction, PGGraphHealthRecording;

@interface PHAGraphServiceWorker : PHAWorker <PHAGraphRegistration, PGGraphDataModelEnrichmentManagerDelegate, PLPhotoAnalysisGraphServiceProtocol> {
    unsigned long long _inq_state;
    BOOL _serviceEnabled;
    NSDate *_lastTodayWidgetMemoryCreationDate;
    NSDictionary *_snapshotFilenameLookup;
    unsigned long long _pendingGraphRequests;
    id<PGGraphHealthRecording> _graphHealthRecorder;
}

@property (nonatomic) unsigned long long state;
@property (retain, nonatomic) NSProgress *currentGraphRebuildProgress;
@property (retain, nonatomic) PGManager *graphManager;
@property (retain, nonatomic) NSMutableDictionary *pendingGraphReadyCallbacks;
@property (retain, nonatomic) PHAPredicateValidator *relatedRequestPredicateValidator;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *backgroundTaskQueue;
@property (retain, nonatomic) NSDate *lastLibraryChangeGraphUpdateJobCompletionDate;
@property (retain, nonatomic) NSHashTable *pendingRequestReferences;
@property (nonatomic) long long pendingRequestReferenceCount;
@property (retain, nonatomic) NSObject<OS_os_transaction> *graphWorkerWarmedUpTransaction;
@property (readonly, nonatomic) NSDate *dateOfLastGraphRebuild;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (void)initialize;
+ (id)facesAndScenesProcessingProgressPercentageDataForPhotoLibrary:(id)a0;
+ (short)workerType;
+ (id)stringFromGraphServiceState:(unsigned long long)a0;
+ (void)configureXPCConnection:(id)a0;
+ (long long)applicationDataFolderIdentifier;

- (BOOL)stopAnalysisJob:(id)a0 error:(id *)a1;
- (void)cooldown;
- (void)requestInferredContactIdentifierByPersonLocalIdentifierForPersonLocalIdentifiers:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (id)initWithPhotoAnalysisManager:(id)a0 dataLoader:(id)a1;
- (void)requestTitleForPersonIdentifiers:(id)a0 format:(long long)a1 context:(id)a2 reply:(id /* block */)a3;
- (BOOL)checkForWritablePersistentStorageDirectoryURL;
- (id)memoryBlacklistedFeatureTypeValueToDataAggregationKeyLookup;
- (void)simulateMemoriesNotificationWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)shutdown;
- (void)requestContactInferencesForPersonLocalIdentifiers:(id)a0 options:(id)a1 context:(id)a2 reply:(id /* block */)a3;
- (id)_infoForNotificationQualityOfMemory:(id)a0;
- (void)stopProcessingGraphUpdateJob:(id)a0;
- (BOOL)shouldAllowBackgroundActivityWithDescription:(id)a0;
- (void)enrichmentManager:(id)a0 didFinishEnrichmentSuccessfully:(BOOL)a1;
- (void)rebuildGraphWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestSuggestedPersonsWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)startProcessingGraphUpdateJob:(id)a0;
- (void)requestAssetCollectionsRelatedToMomentWithLocalIdentifier:(id)a0 options:(id)a1 context:(id)a2 reply:(id /* block */)a3;
- (id)aggregatedStatsForMiroMoodCountVector:(id)a0;
- (void)requestGenerateQuestionsWithOptions:(id)a0 context:(id)a1 progressHandler:(id /* block */)a2 completionHandler:(id /* block */)a3;
- (void)requestRelationshipInferencesForPersonLocalIdentifiers:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)markLastBackgroundGraphRebuildJobDate;
- (id)_memoryInfoFromMemory:(id)a0 options:(id)a1;
- (void)requestSnapshotServiceForRelatedDebugInfoBetweenAssetForLocalIdentifier:(id)a0 andRelatedResultsForLocalIdentifiers:(id)a1 precision:(unsigned long long)a2 relatedType:(unsigned long long)a3 context:(id)a4 reply:(id /* block */)a5;
- (void).cxx_destruct;
- (void)requestTextFeaturesForMomentLocalIdentifiers:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestGraphRebuildFractionCompletedWithContext:(id)a0 reply:(id /* block */)a1;
- (id)_basicPropertiesFromMemory:(id)a0;
- (void)requestGraphServicePerformsQueryWithContext:(id)a0 query:(id)a1 reply:(id /* block */)a2;
- (void)requestSnapshotServiceForRelatedWithMomentLocalIdentifier:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestSharingMessageSuggestionDebugInformationForAssetCollectionLocalIdentifier:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (id)_infoForMemory:(id)a0 representativeAssetCount:(unsigned long long)a1 isTransientMemory:(BOOL)a2;
- (id)_minimalLegacyFeatureVectorWithMemory:(id)a0;
- (id)_featureVectorWithMemory:(id)a0;
- (void)rebuildGraphWithOptions:(id)a0 context:(id)a1 isRequestedRebuild:(BOOL)a2 progressHandler:(id /* block */)a3 completionHandler:(id /* block */)a4;
- (void)reportMetricsWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestInferredContactIdentifierForPersonLocalIdentifier:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (BOOL)didExceedTimeInterval:(double)a0 forBackgroundJobUserDefaultsKey:(id)a1;
- (void)requestGraphServiceStatusWithContext:(id)a0 reply:(id /* block */)a1;
- (void)enrichmentManager:(id)a0 didRunProcessor:(id)a1;
- (void)requestHighlightEstimatesWithContext:(id)a0 reply:(id /* block */)a1;
- (id)_diagnosticsLogsRootFolderPath;
- (void)requestSharingSuggestionDebugInformationForAssetCollectionLocalIdentifier:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)notifyWhenGraphReadyWithCoalescingIdentifier:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (id)aggregatedStatsForMoodKeywordCountedSet:(id)a0;
- (id)_infoForGraphCollectionBasedMemory:(id)a0;
- (void)enrichDataModelWithOptions:(id)a0 isEnrichmentJob:(BOOL)a1 context:(id)a2 progressHandler:(id /* block */)a3 completionHandler:(id /* block */)a4;
- (long long)_miroMoodForMemoryMood:(unsigned long long)a0;
- (void)requestTransientMemoryPropertiesWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)warmupWithProgressBlock:(id /* block */)a0;
- (void)requestSortedArrayOfPersonIdentifiers:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (id)_assetCollectionForRelatedIdentifier:(id)a0;
- (void)requestUtilityAssetInformationWithContext:(id)a0 reply:(id /* block */)a1;
- (void)requestTitleForMemoryWithLocalIdentifier:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)generateMemoriesRelatedDiagnosticsLogsWithContext:(id)a0 reply:(id /* block */)a1;
- (void)requestSnapshotServiceForRelatedWithAssetLocalIdentifier:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (id)nextAdditionalJobWithScenario:(unsigned long long)a0 requestReason:(unsigned long long)a1;
- (void)requestTitleForCollectionMomentListWithLocalIdentifier:(id)a0 format:(long long)a1 context:(id)a2 reply:(id /* block */)a3;
- (id)graphProcessHistoricalChangeJobWithScenario:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (unsigned long long)synchronousOffQueueState;
- (void)requestSharingSuggestionsFromMessageStrings:(id)a0 participantPHIdentifiers:(id)a1 options:(id)a2 context:(id)a3 reply:(id /* block */)a4;
- (void)requestCuratedAssetForAssetCollectionWithLocalIdentifier:(id)a0 referenceAssetLocalIdentifier:(id)a1 precision:(unsigned long long)a2 options:(id)a3 context:(id)a4 reply:(id /* block */)a5;
- (BOOL)hasAdditionalJobForDataModelEnrichmentInScenario:(unsigned long long)a0;
- (void)requestAssetRevGeocodingWithContext:(id)a0 reply:(id /* block */)a1;
- (void)requestMemoryDebugInformationForMemoryWithLocalIdentifier:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestLastQuestionGenerationJobDateWithContext:(id)a0 reply:(id /* block */)a1;
- (void)markLastBackgroundGraphConsistencyUpdateJobDate;
- (BOOL)shouldStopOperationInProgress;
- (void)requestInvalidateServicePersistentCachesWithContext:(id)a0 reply:(id /* block */)a1;
- (void)requestRepresentativeAssetsForAssetCollectionWithLocalIdentifier:(id)a0 options:(id)a1 context:(id)a2 reply:(id /* block */)a3;
- (BOOL)hasAdditionalJobForGraphRebuildInScenario:(unsigned long long)a0;
- (void)graphUpdateDidStop;
- (void)requestAssetCollectionsForPersonIdentifiers:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestBatchSuggestedRecipientsForMomentUUIDByAssetUUID:(id)a0 options:(id)a1 context:(id)a2 reply:(id /* block */)a3;
- (void)requestSuggestedRecipientsForAssetLocalIdentifiers:(id)a0 momentLocalIdentifiers:(id)a1 options:(id)a2 context:(id)a3 reply:(id /* block */)a4;
- (void)requestMetadataSnapshotFolderCreationWithContext:(id)a0 reply:(id /* block */)a1;
- (void)graphUpdateIsConsistent;
- (BOOL)completedJobTodayForBackgroundJobUserDefaultsKey:(id)a0;
- (void)requestHighlightEnrichmentWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestSnapshotServiceForRelatedDebugInfoBetweenMomentForLocalIdentifier:(id)a0 andRelatedResultsForLocalIdentifiers:(id)a1 precision:(unsigned long long)a2 relatedType:(unsigned long long)a3 additionalSnapshotSummaryInfo:(id)a4 context:(id)a5 reply:(id /* block */)a6;
- (long long)_titleTupleFormatForPhotoAnalysisTitleFormat:(long long)a0;
- (void)generateMemoriesWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)invalidateGraphWithContext:(id)a0 reply:(id /* block */)a1;
- (void)requestDefaultsObjectForKey:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestRelatedMomentsForPersonIdentifiers:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestAllSocialGroupsForPersonIdentifier:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (id)dataAggregationKeyForCategory:(unsigned long long)a0 subCategory:(unsigned long long)a1 lookupTable:(id)a2;
- (id)backgroundMemoryGenerationJobWithScenario:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (BOOL)isQuiescent;
- (void)requestCurationDebugInformationForAsset:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)handleOperation:(id)a0;
- (void)reportMetricsWithOptions:(id)a0 context:(id)a1 progressHandler:(id /* block */)a2 completionHandler:(id /* block */)a3;
- (BOOL)shouldAggregateDataForReporting:(unsigned long long)a0;
- (void)requestRelatedDebugInformationBetweenReferenceAssetCollectionForLocalIdentifier:(id)a0 andRelatedAssetCollectionForLocalIdentifier:(id)a1 options:(id)a2 precision:(unsigned long long)a3 relatedType:(unsigned long long)a4 context:(id)a5 reply:(id /* block */)a6;
- (void)requestSuggestionInfosWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (BOOL)canRunWhenGraphIsLoaded;
- (void)requestSetDefaultsObject:(id)a0 forKey:(id)a1 context:(id)a2 reply:(id /* block */)a3;
- (BOOL)hasAdditionalJobForQuestionGenerationInScenario:(unsigned long long)a0;
- (void)requestAssetRevGeocodingForAssetLocalIdentifiers:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (id)memoryBlacklistableFeatureTypeValueToDataAggregationKeyLookup;
- (BOOL)canServiceGraphRequestsInCurrentStateLoadingGraphIfNeeded;
- (void)requestSuggestedContributionsForAssetsMetadata:(id)a0 options:(id)a1 context:(id)a2 reply:(id /* block */)a3;
- (void)requestTitleForAssetCollectionWithLocalIdentifier:(id)a0 format:(long long)a1 context:(id)a2 reply:(id /* block */)a3;
- (BOOL)retryStartup;
- (id)_assetCollectionForLocalIdentifier:(id)a0;
- (void)requestSuggestedContactIdentifiersForPersonLocalIdentifier:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestPeopleSuggestionLearningWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestGenerateQuestionsWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (id)graphRebuildJobWithScenario:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (unsigned long long)_validatedMemoryNotificationState:(int)a0;
- (void)requestM5CompatibleMemoriesWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestMemoryInfosWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (BOOL)wantsGraphUpdateNotifications;
- (id)metricReportingJobWithScenario:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (void)requestAssetsForPersonIdentifiers:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestCurationDebugInformationForAssetCollectionWithLocalIdentifier:(id)a0 options:(id)a1 context:(id)a2 reply:(id /* block */)a3;
- (void)_markEnrichmentNeededFollowingBackgroundRebuild:(BOOL)a0;
- (void)requestAvailableSuggestionTypeInfosWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (id)questionGenerationJobWithScenario:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (void)requestCuratedAssetsForAssetCollectionWithLocalIdentifier:(id)a0 duration:(unsigned long long)a1 precision:(unsigned long long)a2 options:(id)a3 context:(id)a4 reply:(id /* block */)a5;
- (id)assetCollectionForLocalIdentifier:(id)a0 options:(id)a1;
- (void)requestSnapshotServiceForPeopleCurationResultsWithGraphOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (BOOL)wantsLiveGraphUpdates;
- (void)requestAssetCollectionsRelatedToAssetCollectionWithLocalIdentifier:(id)a0 options:(id)a1 context:(id)a2 reply:(id /* block */)a3;
- (void)requestMemoryTreeDebugInformationWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (BOOL)hasAdditionalJobForMetricsReportingInScenario:(unsigned long long)a0;
- (BOOL)startAnalysisJob:(id)a0 error:(id *)a1;
- (void)requestPerformUpdatesForMomentLocalIdentifiersToInsert:(id)a0 momentLocalIdentifiersToDelete:(id)a1 momentLocalIdentifiersToReload:(id)a2 context:(id)a3 reply:(id /* block */)a4;
- (id)_collectionListForLocalIdentifier:(id)a0;
- (long long)_phTitleCategoryForPGTitleCategory:(long long)a0;
- (BOOL)_graphShouldBeConnected;
- (void)requestSnapshotServiceForRelatedResultsWithGraphOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (id)_propertiesFromMemory:(id)a0;
- (void)setupGraphManagerWithProgressBlock:(id /* block */)a0;
- (void)setupPredicateValidator;
- (id)aggregatedStatsForSuggestedMoodCountVector:(id)a0;
- (id)aggregatedStatsForPossibleMoodCountVector:(id)a0;
- (BOOL)hasAdditionalJobForBackgroundMemoryGenerationInScenario:(unsigned long long)a0;
- (void)requestGraphServiceStatisticsWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)generateMemoriesWithOptions:(id)a0 context:(id)a1 progressHandler:(id /* block */)a2 completionHandler:(id /* block */)a3;
- (void)requestInvalidateServiceTransientCachesWithContext:(id)a0 reply:(id /* block */)a1;
- (id)statusAsDictionary;
- (void)requestRelatedDebugInformationBetweenAssetForLocalIdentifier:(id)a0 andRelatedAssetCollectionForLocalIdentifier:(id)a1 options:(id)a2 precision:(unsigned long long)a3 relatedType:(unsigned long long)a4 context:(id)a5 reply:(id /* block */)a6;
- (void)requestAssetCollectionsRelatedToPersonIdentifiers:(id)a0 options:(id)a1 context:(id)a2 reply:(id /* block */)a3;
- (void)requestHighlightCollectionEnrichmentWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (BOOL)enrichmentManager:(id)a0 shouldRunProcessor:(id)a1;
- (long long)unavailableErrorCodeForCurrentState;
- (void)enrichmentManager:(id)a0 didCancelProcessor:(id)a1;
- (id)pendingRequestReferenceForLabel:(id)a0;
- (id)dataModelEnrichmentJobWithScenario:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (void)shutdownAndWaitForGraphManager;
- (void)callAndClearPendingReadyCallbacksWithResult:(BOOL)a0 error:(id)a1;
- (BOOL)hasAdditionalJobForGraphConsistencyUpdateInScenario:(unsigned long long)a0 requestReason:(unsigned long long)a1;
- (void)startup;
- (long long)enrichmentContextToUseForEnrichmentJob;
- (id)_infoForMomentsBackingMemory:(id)a0;
- (void)pendingRequestReferenceDidDeallocateForAddress:(void *)a0;
- (BOOL)canServiceGraphCurationRequestsInCurrentStateLoadingGraphIfNeeded;
- (id)currentlyUnavailableError;
- (BOOL)canServiceGraphStatusRequestsInCurrentStateLoadingGraphIfNeeded;
- (BOOL)isEnabled;
- (void)graphUpdateMadeProgress:(double)a0;
- (void)requestWriteAdditionalDataToSnapshotResults:(id)a0 forFilenameKey:(id)a1 context:(id)a2 reply:(id /* block */)a3;
- (id)informationDictionaryForAsset:(id)a0;
- (unsigned long long)_memoryMoodForMiroMood:(long long)a0;
- (void)_processMoodForMemory:(id)a0 withMoodHistory:(id)a1 moodGenerationContext:(id)a2;
- (void)requestEnrichmentWithOptions:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestHighlightDebugInformationForHighlightWithLocalIdentifier:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestSocialGroupsForPersonIdentifiers:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (void)requestRunPFLWithAttachments:(id)a0 recipeUserInfo:(id)a1 context:(id)a2 resultBlock:(id /* block */)a3;
- (BOOL)hasAdditionalJobsForScenario:(unsigned long long)a0 requestReason:(unsigned long long)a1;
- (void)requestExportGraphServiceForPurpose:(id)a0 context:(id)a1 reply:(id /* block */)a2;
- (id)memoryCategoryValueToDataAggregationKeyLookup;

@end
