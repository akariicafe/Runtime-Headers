@class NSMutableArray, NSString, NSMapTable, NSMutableSet, SPCoreSpotlightIndexer, NSObject;
@protocol OS_dispatch_queue, OS_dispatch_source, OS_os_transaction;

@interface SPConcreteCoreSpotlightIndexer : NSObject {
    _Atomic unsigned int _maintenanceOperations;
    int *_cancelPtr;
    BOOL _suspended;
    BOOL _softSuspended;
    BOOL _suspending;
    BOOL _scheduledStringsCleanup;
    NSMutableSet *_reindexAllDelegateBundleIDs;
    double _lastPreheat;
    double _lastTTLPass;
    unsigned long long _createCount;
    NSMutableArray *_blocksToRunWhenFinishedDraining;
}

@property (weak, nonatomic) SPCoreSpotlightIndexer *owner;
@property (nonatomic) struct __SI { } *index;
@property (nonatomic) struct __SIResultQueue { } *resultQueue;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *indexQueue;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *firstUnlockQueue;
@property (retain, nonatomic) NSString *dataclass;
@property (readonly, nonatomic) NSObject<OS_dispatch_source> *indexIdleTimer;
@property (readonly, nonatomic) double idleStartTime;
@property (retain, nonatomic) NSMutableArray *outstandingMaintenance;
@property (readonly, nonatomic) NSMutableSet *knownClients;
@property (readonly, nonatomic) NSMapTable *checkedInClients;
@property unsigned long long dirtyTimeout;
@property (retain, nonatomic) NSObject<OS_os_transaction> *dirtyTransaction;
@property (nonatomic) BOOL finishedDrainingJournal;

+ (id)_getBundleIndexesFrom:(id)a0;
+ (void)initialize;
+ (id)_stringWithRewriteType:(long long)a0;
+ (id)_stateInfoAttributeNameWithClientStateName:(id)a0;
+ (id)_indexDependentTokenRewritesWithMatchInfo:(id)a0 topK:(id)a1 setOfTokensToCorrect:(id)a2 queryID:(long long)a3 bundleIds:(id)a4 clientBundleId:(id)a5;
+ (id)_sharedSynonyms;
+ (id)_lastTokenWithQueryString:(id)a0 tokenMatchInfo:(id)a1;
+ (id)fetchParentsForItemID:(id)a0 recursively:(BOOL)a1 timeout:(unsigned long long)a2;
+ (BOOL)_spellingCorrectionConditional:(int)a0 isSingleToken:(BOOL)a1 isPreviousTokenCorrected:(BOOL)a2 isLastToken:(BOOL)a3 tokenLength:(unsigned long long)a4;
+ (id)_tokensMaxCountFromMatchInfo:(id)a0;
+ (id)_descriptionWithTokenRewrites:(id)a0;
+ (id)_indexIndependentTokenRewritesWithMatchInfo:(id)a0 queryID:(long long)a1 setOfTokensToCorrect:(id)a2;
+ (BOOL)dumpCrashStates:(const char *)a0 toFile:(id)a1;
+ (id)_setOfTokensToCorrect:(id)a0 tokenMatchInfo:(id)a1;
+ (id)fetchItemForURL:(id)a0;

- (void)deleteAllUserActivities:(id)a0 completionHandler:(id /* block */)a1;
- (void)shrink:(unsigned long long)a0;
- (void)dirty;
- (BOOL)writeDiagnostic:(id)a0 bundleID:(id)a1 identifier:(id)a2;
- (void)deleteSearchableItemsWithFileProviderDomains:(id)a0 completionHandler:(id /* block */)a1;
- (void)indexSearchableItems:(id)a0 deleteSearchableItemsWithIdentifiers:(id)a1 clientState:(id)a2 forBundleID:(id)a3 options:(long long)a4 completionHandler:(id /* block */)a5;
- (int)openIndexForUpgradeSynchronous;
- (void)deleteActionsWithIdentifiers:(id)a0 completionHandler:(id /* block */)a1;
- (void)_saveCorruptIndexWithPath:(id)a0;
- (void)updateItems:(id)a0 forBundleId:(id)a1;
- (void)dealloc;
- (void)preheat;
- (void)transferDeleteJournalsToDirectory:(int)a0 completionHandler:(id /* block */)a1;
- (id)_cancelIdleTimer;
- (void)issueDuplicateOidCheck;
- (void)_deleteSearchableItemsMatchingQuery:(id)a0 forBundleIds:(id)a1 completionHandler:(id /* block */)a2;
- (void)fetchLastClientStateForBundleID:(id)a0 clientStateName:(id)a1 completionHandler:(id /* block */)a2;
- (void)fetchAttributes:(id)a0 bundleID:(id)a1 identifiers:(id)a2 includeParents:(BOOL)a3 completion:(id /* block */)a4;
- (void)_performXPCActivity:(id)a0 name:(id)a1;
- (void)indexFinishedDrainingJournal:(id)a0;
- (id)initWithQueue:(id)a0 protectionClass:(id)a1 cancelPtr:(int *)a2;
- (void)deleteItemsForQuery:(id)a0 bundleID:(id)a1 completionHandler:(id /* block */)a2;
- (void)requestRequiresImportWithoutSandboxExtension:(id)a0 maxCount:(unsigned long long)a1;
- (void)issueConsistencyCheck;
- (void)removeExpiredItemsForBundleId:(id)a0 group:(id)a1;
- (int)openIndex:(BOOL)a0 shouldReindexAll:(BOOL)a1;
- (void)issueDumpReverse:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (void)startQueryWithQueryTask:(id)a0 startHandler:(id /* block */)a1 eventHandler:(id /* block */)a2 resultsHandler:(id /* block */)a3;
- (void)powerStateChanged;
- (void)reindexAttributes:(id)a0 ofItemsMatchingQuery:(id)a1 indexAttrName:(id)a2 withVersion:(unsigned long long)a3 perItemCompletionAttribute:(id)a4 force:(BOOL)a5 postFilter:(id)a6;
- (void)_setClientState:(id)a0 clientStateName:(id)a1 forBundleID:(id)a2 completionHandler:(id /* block */)a3;
- (void)mergeWithCompletionHandler:(id /* block */)a0;
- (BOOL)reindexAllStarted;
- (void)issueMessagesFixup:(id /* block */)a0;
- (BOOL)_startInternalQueryWithIndex:(struct __SI { } *)a0 query:(id)a1 fetchAttributes:(id)a2 forBundleIds:(id)a3 resultsHandler:(id /* block */)a4;
- (void)performIndexerTask:(id)a0 completionHandler:(id /* block */)a1;
- (void)restartAttachmentImport:(id)a0 maxCount:(unsigned long long)a1;
- (void)addCompletedBundleIDs:(id)a0 forIndexerTask:(id)a1;
- (void)removeSandboxExtensions:(id)a0;
- (void)completeIndexingItemFor:(id)a0 delegate:(id)a1 didBeginThrottle:(BOOL)a2 didEndThrottle:(BOOL)a3 error:(id)a4 live:(BOOL)a5 queue:(id)a6 slow:(BOOL)a7 startTime:(double)a8 completionHandler:(id /* block */)a9;
- (void)deleteSearchableItemsSinceDate:(id)a0 forBundleID:(id)a1 completionHandler:(id /* block */)a2;
- (void)zombifyAllContactItems:(id)a0;
- (BOOL)_startInternalQueryWithIndex:(struct __SI { } *)a0 query:(id)a1 fetchAttributes:(id)a2 resultsHandler:(id /* block */)a3;
- (void)issuePriorityIndexFixupOff;
- (BOOL)_startInternalQueryWithIndex:(struct __SI { } *)a0 query:(id)a1 fetchAttributes:(id)a2 forBundleIds:(id)a3 maxCount:(unsigned long long)a4 resultsHandler:(id /* block */)a5;
- (void)fixupPathTimeouts;
- (void)attributesForBundleId:(id)a0 identifier:(id)a1 completion:(id /* block */)a2;
- (void)updateContainersAndScores:(BOOL)a0;
- (void)updateGroups:(BOOL)a0;
- (void)deleteSearchableItemsWithPersonaIds:(id)a0 completionHandler:(id /* block */)a1;
- (void)_expireCorruptIndexFilesWithPath:(id)a0 keepLatest:(BOOL)a1;
- (void)performQueryForCountOfItemsInCategory:(id)a0 completion:(id /* block */)a1;
- (void)cleanupStringsWithActivity:(id)a0 group:(id)a1 shouldDefer:(BOOL *)a2 flags:(int)a3;
- (void)deleteAllSearchableItemsForBundleID:(id)a0 shouldGC:(BOOL)a1 completionHandler:(id /* block */)a2;
- (void)indexFromBundle:(id)a0 personaID:(id)a1 options:(long long)a2 items:(id)a3 itemsText:(id)a4 clientState:(id)a5 expectedClientState:(id)a6 clientStateName:(id)a7 deletes:(id)a8 completionHandler:(id /* block */)a9;
- (void)_appendRervseInfo:(id)a0 dictionary:(id)a1 key:(id)a2 level:(unsigned long long)a3;
- (void)indexSearchableItems:(id)a0 deleteSearchableItemsWithIdentifiers:(id)a1 clientState:(id)a2 expectedClientState:(id)a3 clientStateName:(id)a4 forBundleID:(id)a5 options:(long long)a6 completionHandler:(id /* block */)a7;
- (void)coolDown:(id)a0;
- (void)processImportForBundleID:(id)a0 withURLs:(id)a1 contentTypes:(id)a2 sandboxExtensions:(id)a3 andIdentifiers:(id)a4 inGroup:(id)a5;
- (void)updateEmailLocalParts:(BOOL)a0;
- (void)readyIndex:(BOOL)a0;
- (void)clientDidCheckin:(id)a0 service:(id)a1 completionHandler:(id /* block */)a2;
- (void)deleteItemsForEnumerator:(id)a0 traceID:(long long)a1 bundleID:(id)a2 completionHandler:(id /* block */)a3;
- (BOOL)issuePriorityIndexFixup;
- (void)resumeIndex;
- (void)issueRepair;
- (void)suspendIndexForDeviceLock:(id)a0;
- (void)issueDefrag:(id)a0;
- (void).cxx_destruct;
- (void)addClients:(id)a0;
- (void)willModifySearchableItemsWithIdentifiers:(id)a0 forBundleID:(id)a1 completionHandler:(id /* block */)a2;
- (void)closeIndex;
- (id)_indexPath;
- (int)openIndex:(BOOL)a0;
- (void)fetchAttributes:(id)a0 bundleID:(id)a1 identifiers:(id)a2 includeParents:(BOOL)a3 completionHandler:(id /* block */)a4;
- (void)issueDumpForward:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (void)processDecryptsForBundleID:(id)a0 persona:(id)a1 infos:(id)a2 group:(id)a3;
- (BOOL)_startInternalQueryWithIndex:(struct __SI { } *)a0 query:(id)a1 fetchAttributes:(id)a2 forBundleIds:(id)a3 maxCount:(unsigned long long)a4 resultsHandler:(id /* block */)a5 resultQueue:(id)a6 postFilter:(id)a7;
- (void)mergeWithGroup:(id)a0;
- (id)getPropertyForKey:(id)a0;
- (void)performIndexerTask:(id)a0 withIndexDelegatesAndCompletionHandler:(id /* block */)a1;
- (void)issuePriorityIndexFixupOn;
- (void)indexFinishedDrainingJournal;
- (void)dumpAllRankingDiagnosticInformationForQuery:(id)a0 withCompletionHandler:(id /* block */)a1;
- (void)revokeExpiredItems:(id)a0;
- (void)_fetchAccumulatedStorageSizeForBundleId:(id)a0 completionHandler:(id /* block */)a1;
- (id)_indexMaintenanceActivityName;
- (id)_startQueryWithQueryTask:(id)a0 eventHandler:(id /* block */)a1 resultsHandler:(id /* block */)a2;
- (void)commitUpdates:(id)a0;
- (void)finishReindexAll;
- (void)deleteAllInteractionsWithBundleID:(id)a0 completionHandler:(id /* block */)a1;
- (void)_scheduleStringsCleanupForBundleID:(id)a0;
- (void)issueSplit;
- (void)whenFinishedDraining:(id /* block */)a0;
- (void)deleteActionsBeforeTime:(double)a0 completionHandler:(id /* block */)a1;
- (void)fetchAllCompletedBundleIDsForIndexerTask:(id)a0 completionHandler:(id /* block */)a1;
- (void)startReindexAll;
- (void)checkInWithBundleID:(id)a0 completionHandler:(id /* block */)a1;
- (void)deleteSearchableItemsWithDomainIdentifiers:(id)a0 forBundleID:(id)a1 completionHandler:(id /* block */)a2;
- (void)_backgroundDeleteItems:(id)a0 bundleID:(id)a1 completionHandler:(id /* block */)a2;
- (void)ensureOpenIndexFiles:(id)a0;
- (void)checkAdmission:(id)a0 background:(BOOL)a1 didBeginThrottle:(BOOL *)a2 didEndThrottle:(BOOL *)a3 live:(BOOL *)a4 slow:(BOOL *)a5;
- (void)scheduleMaintenance:(id /* block */)a0 description:(id)a1 forDarkWake:(BOOL)a2;
- (void)_addNewClientWithBundleID:(id)a0;
- (void)cleanupStringsWithCompletionHandler:(id /* block */)a0;
- (void)indexDependentTokenRewritesWithQueryString:(id)a0 context:(id)a1 matchInfo:(id)a2 setOfTokensToCorrect:(id)a3 tokenRewritesHandler:(id /* block */)a4;
- (void)updateRankingDates:(BOOL)a0;
- (void)setProperty:(id)a0 forKey:(id)a1 sync:(BOOL)a2;
- (void)fixupMessageAttachmentsWithCompletionHandler:(id /* block */)a0;
- (void)changeStateOfSearchableItemsWithUIDs:(id)a0 toState:(long long)a1 forBundleID:(id)a2;
- (long long)getIntegerPropertyForKey:(id)a0;
- (BOOL)_startInternalQueryWithIndex:(struct __SI { } *)a0 query:(id)a1 fetchAttributes:(id)a2 forBundleIds:(id)a3 maxCount:(unsigned long long)a4 resultsHandler:(id /* block */)a5 resultQueue:(id)a6;
- (void)updateEmailContentURLAttr:(BOOL)a0;
- (void)dirty:(BOOL)a0;

@end
