@class DRSDampeningManager, NSPersistentContainer, DRSTaskingManager, NSMutableDictionary, DRSCloudKitHelper, NSObject, DRSCKConfigStore, DRSCKConfig;
@protocol OS_dispatch_queue, OS_xpc_object, OS_dispatch_semaphore;

@interface DRSService : NSObject

@property (readonly, nonatomic) NSObject<OS_dispatch_queue> *messageQueue;
@property (readonly, nonatomic) NSObject<OS_dispatch_queue> *cloudKitQueue;
@property (readonly, nonatomic) NSObject<OS_dispatch_queue> *postReceiptWorkQueue;
@property (readonly, nonatomic) NSObject<OS_xpc_object> *serviceConnection;
@property (readonly, nonatomic) NSObject<OS_dispatch_semaphore> *serviceDeactivatedSem;
@property (readonly, nonatomic) unsigned char state;
@property (readonly, nonatomic) NSMutableDictionary *connectionToState;
@property (readonly, nonatomic) NSPersistentContainer *serviceContainer;
@property (readonly, nonatomic) DRSDampeningManager *dampeningManager;
@property (readonly, nonatomic) DRSTaskingManager *taskingManager;
@property (readonly, nonatomic) DRSCloudKitHelper *ckHelper;
@property (readonly, nonatomic) DRSCKConfigStore *ckConfigStore;
@property (readonly, nonatomic) DRSCKConfig *ckConfig;
@property (readonly, nonatomic) BOOL isEnabled;
@property (readonly, nonatomic) unsigned long long maxSingleSessionUploadSizeInBytes;
@property (readonly, nonatomic) unsigned long long monthlyUploadQuotaBytes;

+ (id)sharedInstance;
+ (BOOL)serviceIsEnabled;
+ (id)previousUploadSessionDateFromContainer:(id)a0 errorOut:(id *)a1;
+ (BOOL)shouldRunBackstopUpload:(id)a0 currentDate:(id)a1 errorOut:(id *)a2;
+ (id)_currentUploadSession_ON_MOC_QUEUE:(id)a0 errorOut:(id *)a1;
+ (id)fileDirectory;
+ (id)configurationDirectory;
+ (BOOL)updateUploadSessionDateFromContainer:(id)a0 toDate:(id)a1 errorOut:(id *)a2;
+ (unsigned long long)uploadSessionUploadCapBytes;
+ (id)teamConfigurationDirectory;
+ (double)backstopInterval;
+ (id)databaseDirectory;

- (void)deactivateService;
- (void)_configureUploadXPCActivity;
- (void)_configureExpeditedUploadXPCActivity;
- (void)_runCloudKitUploadWorkSessionWithTransaction:(id)a0 xpcActivity:(id)a1 isExpedited:(BOOL)a2 completionBlock:(id /* block */)a3;
- (void)_finishReportingStatsSessionWithActivity:(id)a0 withState:(long long)a1 transaction:(id)a2 endResultString:(id)a3;
- (id)init;
- (void)_postReceiptProcessingWork:(id)a0;
- (void)_handleGetCKConfig:(id)a0 state:(id)a1;
- (void)dealloc;
- (void)_addRequestToDAFileList:(id)a0;
- (unsigned long long)_remainingMonthlyUploadQuotaBytesWithContext:(id)a0;
- (BOOL)shouldRunBackstopUpload:(id *)a0;
- (void)_handleEnableLogGatheringRequest:(id)a0 state:(id)a1 transaction:(id)a2;
- (void)_configurePermissiveActivityCriteria:(id)a0 delaySeconds:(unsigned int)a1;
- (void)_configureXPCActivities;
- (BOOL)updateUploadSessionDate:(id *)a0;
- (void)_addCKConfigSettingsToReplyMessage:(id)a0;
- (void)_initializeServiceContainer;
- (BOOL)_enableDataGatheringQueryPassesRandomRejection;
- (void)_handleDampeningConfigurationGlobalEnablementMessage:(id)a0 state:(id)a1 transaction:(id)a2;
- (void)_configureReportStatsXPCActivity;
- (void)_handleCKWorkTriggerRequest:(id)a0 state:(id)a1 transaction:(id)a2;
- (void)_rejectInjectRequest:(id)a0 state:(id)a1 reason:(const char *)a2;
- (void)_handleResetCKConfig:(id)a0 state:(id)a1;
- (void)_ckQueueOnly_submitOutstandingEnableDataGatheringQueriesWithTransaction:(id)a0 xpcActivity:(id)a1 ckHelper:(id)a2 followupWorkBlock:(id /* block */)a3;
- (void)_handleRequestCleanTrigger:(id)a0 state:(id)a1;
- (void)_waitForDeviceUnlockAndInitializeServiceState;
- (id)_cachedMatchingQuery:(id)a0 workingContext:(id)a1;
- (void)_replyToCKConfigMessageWithCurrentCKConfig:(id)a0;
- (unsigned int)_randomDelaySecWithCap:(unsigned int)a0;
- (void)_handleDampeningConfigurationReset:(id)a0 state:(id)a1 transaction:(id)a2;
- (BOOL)clearUploadSessionDate:(id *)a0;
- (id)_permissiveXPCActivitCriteriaDict:(unsigned int)a0;
- (void)_sendCurrentConfigurationToConnection:(id)a0;
- (double)_resolvedEnableDataGatheringQueryAcceptanceRate;
- (void)_ckQueueDownstreamOnly_uploadInFlightWithTransaction:(id)a0 xpcActivity:(id)a1 ckHelper:(id)a2 isExpedited:(BOOL)a3 completionBlock:(id /* block */)a4;
- (void)_sendRejectionMessage:(id)a0 rejectionReason:(unsigned long long)a1 state:(id)a2;
- (void)_configureBackstopUploadXPCActivity;
- (void)_unregisterPermissiveExpeditedUploadXPCActivity;
- (void)handleRequest:(id)a0 state:(id)a1;
- (unsigned long long)_remainingSessionUploadQuotaBytesWithContext:(id)a0;
- (void)_runReportingSessionWithTransaction:(id)a0 xpcActivity:(id)a1;
- (BOOL)_connectionHasEntitlement:(id)a0;
- (BOOL)activateService;
- (void)_handleCancelScheduledUploadRequest:(id)a0 state:(id)a1;
- (void).cxx_destruct;
- (void)_finishUploadSessionWithActivity:(id)a0 withState:(long long)a1 isExpedited:(BOOL)a2 transaction:(id)a3 completedSuccessfully:(BOOL)a4 endResultString:(id)a5 completionBlock:(id /* block */)a6;
- (void)_registerPermissiveExpeditedUploadXPCActivity:(unsigned int)a0;
- (void)_sendAdminRequestReply:(BOOL)a0 rejectionReason:(const char *)a1 requestMessage:(id)a2;
- (void)_handleDRSRequestMessage:(id)a0 state:(id)a1 transaction:(id)a2;
- (void)_handleInjectEnableLogGatheringRequestResult:(id)a0 state:(id)a1;
- (void)_handleUploadSchedulingRequest:(id)a0 state:(id)a1;
- (id)_updateCKConfig:(id)a0;
- (BOOL)_saveDampeningManagerErrorOut:(id *)a0;
- (void)_handleNewEntitledConnection:(id)a0 state:(id)a1;
- (void)_handleRefreshDampeningConfigMessage:(id)a0 state:(id)a1 transaction:(id)a2;
- (BOOL)_persistEnableLogGatheringResult:(id)a0 workingContext:(id)a1;
- (void)_updateUploadDate;
- (void)_handleDampeningConfigurationDictMessage:(id)a0 state:(id)a1 transaction:(id)a2;
- (void)_handleCKConfigUpdate:(id)a0 state:(id)a1;

@end
