@class NSMutableDictionary, RTDataProtectionManager, NSObject, RTDefaultsManager, RTPlatform, RTDarwinNotificationHelper, RTTimerManager, NSString, RTKeychainManager, RTPersistenceManager, RTLifeCycleManager, RTPersistenceResetSyncContext, RTTimer, RTAccount, RTAccountManager;
@protocol OS_os_transaction, RTPersistenceMetricsDelegate;

@interface RTPersistenceDriver : RTService <RTPersistenceMetricsDelegate, RTPersistenceDelegate, RTPurgable>

@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;
@property (retain) NSObject<OS_os_transaction> *setupTransaction;
@property BOOL requiresDirtyTransaction;
@property BOOL requiresSetupTransaction;
@property long long cloudSyncAuthorization;
@property long long encryptedDataAvailability;
@property (retain) RTAccount *currentAccount;
@property (weak) id<RTPersistenceMetricsDelegate> metricsDelegate;
@property (retain) RTPersistenceResetSyncContext *resetSyncContext;
@property (retain) RTDarwinNotificationHelper *notificationHelper;
@property (retain, nonatomic) RTTimerManager *timerManager;
@property (retain, nonatomic) RTTimer *backgroundProcessingAssertionDeferralTimer;
@property (retain, nonatomic) RTTimer *backgroundProcessingAssertionAcquireRetryTimer;
@property unsigned long long backgroundAssertionRetryCount;
@property (retain, nonatomic) NSMutableDictionary *fileDescriptorsForPersistenceStoreDict;
@property (readonly) RTPersistenceManager *persistenceManager;
@property (readonly) RTDataProtectionManager *dataProtectionManager;
@property (readonly) RTAccountManager *accountManager;
@property (readonly) RTPlatform *currentPlatform;
@property (readonly) RTKeychainManager *keychainManager;
@property (retain) RTDefaultsManager *defaultsManager;
@property (retain) RTLifeCycleManager *lifecycleManager;
@property (nonatomic) BOOL shouldResetCloudStore;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (long long)periodicPurgePolicy;

- (void)performPurgeOfType:(long long)a0 referenceDate:(id)a1 completion:(id /* block */)a2;
- (id)init;
- (void)onDailyMetricsNotification:(id)a0;
- (void)dealloc;
- (void)_shutdownWithHandler:(id /* block */)a0;
- (void)start;
- (void)_onCloudSyncAuthorizationChange:(id)a0;
- (void)onDataProtectionNotification:(id)a0;
- (void).cxx_destruct;
- (void)onCloudSyncAuthorizationChange:(id)a0;
- (void)_evaluateBackgroundProcessingAfterAssertionConfigurationChange:(long long)a0;
- (BOOL)prepareStore:(id)a0 withContext:(id)a1 error:(id *)a2;
- (int)_acquireBackgroundAssertionForFileDescriptor:(int)a0;
- (BOOL)_acquireBackgroundProcessingPermissionForStoreURL:(id)a0 cacheFileExtension:(id)a1 isRetry:(BOOL)a2;
- (BOOL)_acquireBackgroundProcessingPermissionsForStoreType:(unsigned long long)a0 isRetry:(BOOL)a1;
- (BOOL)_didPersistenceStoreBackgroundProcessingAssertionsSucceedWithRetry:(BOOL)a0;
- (BOOL)_evaluatePersistentHistoryForDeletedDeviceDuringResetSync:(BOOL *)a0 resetSyncContext:(id)a1 managedObjectContext:(id)a2 error:(id *)a3;
- (void)_evaluteDirtyTransactionAfterConfigurationChange:(long long)a0;
- (int)_getFileDescriptorForPersistenceStoreFile:(id)a0;
- (BOOL)_isBackgroundProcessingAssertionActive;
- (void)_onAccountChange:(id)a0;
- (void)_onBackgroundProcessingAssertionAcquireRetryExpiry;
- (void)_onBackgroundProcessingAssertionTimerExpiry;
- (void)_onDataProtectionChange:(id)a0;
- (void)_prepareFileDescriptorsForPersistenceStore;
- (BOOL)_purgeLocalEntityRowsUsingModel:(id)a0 managedObjectContext:(id)a1 persistenceManager:(id)a2 error:(id *)a3;
- (int)_releaseBackgroundAssertionForFileDescriptor:(int)a0;
- (BOOL)_releaseBackgroundProcessingPermissionForStoreURL:(id)a0 cacheFileExtension:(id)a1;
- (BOOL)_releaseBackgroundProcessingPermissionsForStoreType:(unsigned long long)a0;
- (BOOL)_releasePersistenceStoreBackgroundProcessingAssertions;
- (id)_repersistPreviousDeviceWithResetSyncContext:(id)a0 persistenceManager:(id)a1 managedObjectContext:(id)a2;
- (void)_setupPersistenceAfterConfigurationChange:(long long)a0 cloudSyncAuthorization:(long long)a1 account:(id)a2;
- (BOOL)_shouldAttemptSetupAccordingToDeviceConfiguration:(long long)a0;
- (void)_startBackgroundProcessingAssertionAcquireRetryWithLatency:(double)a0;
- (void)_startBackgroundProcessingAssertionBufferTimerWithLatency:(double)a0;
- (void)_updatePersistenceContexts:(id)a0 deviceObjectID:(id)a1;
- (void)_updatePersistenceStoresWithDeviceObjectID:(id)a0;
- (id)appleIDsForStore:(id)a0;
- (BOOL)backupPersistenceStore:(id)a0 error:(id *)a1;
- (void)cleanupOlderPersistentStores;
- (id)cloudManagedObjectWithEntityDescription:(id)a0 predicate:(id)a1 sortDescriptors:(id)a2 context:(id)a3 error:(id *)a4;
- (unsigned long long)countOfCloudManagedObjectWithEntityDescription:(id)a0 predicate:(id)a1 context:(id)a2 error:(id *)a3;
- (id)earliestCloudManagedObjectWithEntityDescription:(id)a0 predicate:(id)a1 context:(id)a2 error:(id *)a3;
- (void)evaluateTransactions;
- (BOOL)importSourceStore:(id)a0 sourceCoordinator:(id)a1 destinationStore:(id)a2 destinationCoordinator:(id)a3 managedObjectModel:(id)a4 configuration:(id)a5 error:(id *)a6;
- (id)initWithAccountManager:(id)a0 dataProtectionManager:(id)a1 defaultsManager:(id)a2 keychainManager:(id)a3 lifecycleManager:(id)a4 persistenceManager:(id)a5 platform:(id)a6 timerManager:(id)a7;
- (id)initWithPersistenceManager:(id)a0 dataProtectionManager:(id)a1 accountManager:(id)a2 platform:(id)a3 keychainManager:(id)a4 defaultsManager:(id)a5 lifecycleManager:(id)a6;
- (id)latestCloudManagedObjectWithEntityDescription:(id)a0 predicate:(id)a1 context:(id)a2 error:(id *)a3;
- (id)mirroringOptionsForStoreWithType:(unsigned long long)a0;
- (void)onAccountChange:(id)a0;
- (void)onDataProtectionChange:(id)a0;
- (id)optionsForStoreWithType:(unsigned long long)a0 error:(id *)a1;
- (BOOL)persistCurrentDeviceRecordInStore:(id)a0 context:(id)a1 error:(id *)a2;
- (id)persistCurrentDeviceWithIdentifier:(id)a0 inStore:(id)a1 context:(id)a2 error:(id *)a3;
- (unsigned long long)persistenceDeviceClassForPlatform;
- (void)persistenceDriver:(id)a0 persistenceMigrator:(id)a1 didFinishMigratingStore:(id)a2 withModelProvider:(id)a3;
- (void)persistenceDriver:(id)a0 persistenceMigrator:(id)a1 didStartMigratingStore:(id)a2 withModelProvider:(id)a3;
- (void)persistenceManager:(id)a0 didFinishSetup:(BOOL)a1;
- (void)persistenceManagerDidFinishResetSync:(id)a0 userInfo:(id)a1;
- (void)persistenceManagerWillStartResetSync:(id)a0 userInfo:(id)a1 context:(id)a2;
- (void)persistenceMigrator:(id)a0 didFinishMigratingStore:(id)a1 withModelProvider:(id)a2;
- (void)persistenceMigrator:(id)a0 didStartMigratingStore:(id)a1 withModelProvider:(id)a2;
- (BOOL)persistenceMirroringManagerDidFinishZonePurge:(id)a0 store:(id)a1 context:(id)a2 error:(id *)a3;
- (void)persistenceStore:(id)a0 didPrepareWithContext:(id)a1;
- (void)persistenceStore:(id)a0 encounteredCriticalError:(id)a1;
- (void)persistenceStore:(id)a0 failedWithError:(id)a1;
- (void)persistenceStoreFailedWithError:(id)a0;
- (void)persistenceStoreResetSyncWithUserInfo:(id)a0;
- (id)prepareForDatabaseRekey:(id *)a0;
- (id)remoteServerOptionsForStoreWithType:(unsigned long long)a0;
- (BOOL)store:(id)a0 validateAppleIDs:(id)a1;

@end
