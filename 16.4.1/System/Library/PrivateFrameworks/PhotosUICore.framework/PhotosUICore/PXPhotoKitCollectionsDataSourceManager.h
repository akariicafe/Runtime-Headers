@class NSMutableDictionary, PXPhotoKitCollectionsDataSourceManagerConfiguration, PHCollectionList, NSObject, NSDate, NSMutableArray, PHFetchResult, NSString, NSMutableSet, NSOperationQueue, NSArray, PXPhotoKitCollectionsDataSource, PHPhotoLibrary, PXLibraryFilterState, NSUserDefaults;
@protocol OS_dispatch_queue, OS_os_log;

@interface PXPhotoKitCollectionsDataSourceManager : PXCollectionsDataSourceManager <PXCollectionFetchOperationDelegate, PXChangeObserver, PXPhotoLibraryUIChangeObserver> {
    PHPhotoLibrary *_photoLibrary;
    NSMutableDictionary *_subCollectionFetchResultsCache;
    NSMutableDictionary *_subCollectionKeyAssetFetchResultsCache;
    NSMutableDictionary *_collectionIndexPathByCollection;
    NSOperationQueue *_subCollectionFetchOperationQueue;
    NSOperationQueue *_subCollectionKeyAssetsFetchOperationQueue;
    BOOL _preparedBackgroundFetching;
    BOOL _publishChangesScheduledOnRunLoop;
    double _lastPublishChangesTime;
    NSMutableSet *_pendingChangedCollections;
    NSMutableSet *_changedSubCollections;
    BOOL _simulateNonIncrementalChanges;
    NSMutableSet *_changeProcessingPausedReasons;
    BOOL _changesOccurredWhilePaused;
    NSMutableArray *_changesDetailsWhilePaused;
    long long _pausedChangeDetailsBufferLength;
    BOOL _isPhotoLibraryEmpty;
    NSDate *_lastDuplicatesProcessingCheckDate;
}

@property (class, readonly, nonatomic) NSObject<OS_dispatch_queue> *sharedSubCollectionsFetchQueue;
@property (class, readonly, nonatomic) NSObject<OS_dispatch_queue> *sharedKeyAssetsFetchQueue;

@property (readonly, nonatomic) NSMutableDictionary *_subCollectionActiveCountFetchOperations;
@property (readonly, nonatomic) NSMutableDictionary *_subCollectionActiveKeyAssetsFetchOperations;
@property (retain, nonatomic, setter=_setCollectionListBySection:) NSArray *_collectionListBySection;
@property (retain, nonatomic, setter=_setCollectionsFetchResultBySection:) NSArray *_collectionsFetchResultBySection;
@property (retain, nonatomic) NSArray *_virtualCollections;
@property (readonly) NSObject<OS_os_log> *dataSourceManagerLog;
@property (nonatomic) BOOL isChangeProcessingPaused;
@property (readonly, nonatomic) PXLibraryFilterState *libraryFilterState;
@property (readonly, nonatomic) NSUserDefaults *userDefaults;
@property (nonatomic) BOOL isInitialDuplicateDetectorProcessingCompleted;
@property (readonly, nonatomic) long long numberOfPendingKeyAssetFetches;
@property (readonly, nonatomic) PHCollectionList *collectionList;
@property (readonly, nonatomic) PHFetchResult *collectionsFetchResult;
@property (readonly, nonatomic) PXPhotoKitCollectionsDataSourceManagerConfiguration *configuration;
@property (readonly, nonatomic) PXPhotoKitCollectionsDataSource *dataSource;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)standardDataSourceManagerForCollectionList:(id)a0;

- (BOOL)_isEmpty;
- (id)createInitialDataSource;
- (BOOL)containsAnyAssets:(id)a0;
- (void)photoLibraryDidChangeOnMainQueue:(id)a0;
- (BOOL)isBackgroundFetching;
- (void)setChangeProcessingPaused:(BOOL)a0 forReason:(id)a1;
- (BOOL)_containsAnyAlbumsWithAssets:(id)a0;
- (id)keyAssetsFetchResultForCollection:(id)a0;
- (BOOL)hasAssetsFetchResultForCollection:(id)a0;
- (void)_enumerateAllPhotoKitCollectionsUsingBlock:(id /* block */)a0;
- (void)_updateDataSourceForChangeOnCollection:(id)a0;
- (id)customFetchOptionsForCollection:(id)a0;
- (id)_newDataSource;
- (void)_reloadAndRestartBackgroundFetchesIfNeeded;
- (void)_cancelAllBackgroundFetches;
- (unsigned long long)_fixedOrderPriorityForVirtualCollection:(id)a0;
- (void)collectionFetchOperationDidBegin:(id)a0;
- (void)_prepareBackgroundFetchingIfNeededForCollection:(id)a0;
- (void)_updateKeyAssetsCacheForCollection:(id)a0 withFetchResult:(id)a1 otherFetchResultsByAssetCollection:(id)a2;
- (id)displayableAssetsForCollectionList:(id)a0 maximumCount:(long long)a1 useCache:(BOOL)a2 correspondingCollections:(out id *)a3;
- (BOOL)_needsKeyAssetsFetchResultForCollection:(id)a0;
- (long long)estimatedCountForAssetCollection:(id)a0;
- (void)_publishPendingCollectionChanges;
- (void)observable:(id)a0 didChange:(unsigned long long)a1 context:(void *)a2;
- (void)collectionFetchOperationDidComplete:(id)a0;
- (id)assetsFetchResultForCollection:(id)a0 fetchIfNeeded:(BOOL)a1;
- (id)keyAssetsFetchResultForCollection:(id)a0 fetchIfNeeded:(BOOL)a1;
- (BOOL)canDeleteCollection:(id)a0;
- (id)indexPathForCollection:(id)a0;
- (BOOL)_isPlacesAlbumAssetCollection:(id)a0;
- (void)collectionFetchOperationDidCancel:(id)a0;
- (id)_keyAssetFetchResultForSubCollection:(id)a0 fetchIfNeeded:(BOOL)a1;
- (BOOL)_needsFetchResultForCollection:(id)a0;
- (void)_endSignpostForFetchOperation:(id)a0;
- (id)_filterFetchResult:(id)a0;
- (id)uncachedKeyAssetFetchResultForSubCollection:(id)a0;
- (void)dealloc;
- (id)assetsFetchResultForCollection:(id)a0;
- (BOOL)canRenameCollection:(id)a0;
- (BOOL)canReorderCollection:(id)a0;
- (BOOL)_shouldIncludeCollection:(id)a0;
- (void)_updateVisibleCountsForCollection:(id)a0 withWithFetchResult:(id)a1;
- (void)_updateFilteredCollectionsFetchResults;
- (id)_getSectionedCollectionListAndFetchResultsFromFetchResult:(id)a0;
- (void)_prepareBackgroundFetchingIfNeeded;
- (void)observeValueForKeyPath:(id)a0 ofObject:(id)a1 change:(id)a2 context:(void *)a3;
- (id)fetchResultForSubCollection:(id)a0;
- (void)stopCoalescingAndPublishFetchResultChanges;
- (void)startBackgroundFetchingIfNeeded;
- (void)pauseBackgroundFetching;
- (void)startCoalescingFetchResultChanges;
- (void)setDataSource:(id)a0 changeDetailsArray:(id)a1;
- (BOOL)_updateCachedSubCollectionFetchResultsForChange:(id)a0 fetchResultChangeDetails:(id)a1;
- (void)_enqueueFetchKeyAssetsOperationForCollection:(id)a0;
- (id)prepareForPhotoLibraryChange:(id)a0;
- (void)getDisplayableAssets:(id *)a0 indexes:(id *)a1 forCollection:(id)a2 maximumCount:(long long)a3 useCache:(BOOL)a4;
- (id)_changedSubCollectionIndexesBySections;
- (id)_subitemChangeDetailsByItemBySection;
- (void)prepareBackgroundFetchingIfNeeded;
- (id)initWithConfiguration:(id)a0;
- (void)_recursivelyCollectCollectionsIn:(id)a0 fetchResult:(id)a1;
- (unsigned long long)indexOfFirstReorderableCollection;
- (BOOL)_isImportsAssetCollection:(id)a0;
- (BOOL)canEditAlbums;
- (void)_enqueueFetchCountsOperationForCollection:(id)a0;
- (void)_recursivelyEnumerateAssetCollectionsInFetchResult:(id)a0 block:(id /* block */)a1;
- (void).cxx_destruct;
- (BOOL)_containsAnyAssets:(id)a0;
- (id)uncachedFetchResultForSubCollection:(id)a0;
- (BOOL)isCachedFetchResultOutdatedForCollection:(id)a0;
- (void)_updateCollectionIndexMappingForFilteredFetchResults;
- (void)waitUntilBackgroundFetchingFinishedWithCompletionBlock:(id /* block */)a0;

@end
