@class NSDate, NSObject, NSString, HMDBackgroundOperationManager, HMDHomeData, NSMutableSet, HMDHH2MigratorRecord, HMDCoreData, HMDCoreDataCloudTransform, HMDHH2FrameworkSwitch;
@protocol OS_dispatch_queue, HMDDatabase;

@interface HMDHH2Migrator : HMFObject <HMFLogging>

@property (readonly, nonatomic) HMDHH2MigratorRecord *migratorRecord;
@property (readonly, nonatomic) HMDHH2FrameworkSwitch *hh2FrameworkSwitch;
@property (readonly, nonatomic) NSMutableSet *scheduledKeyRollOperationsDuringMigration;
@property (readonly, nonatomic) NSMutableSet *v5ModelUpdateFutures;
@property (readonly, nonatomic) NSMutableSet *openedZones;
@property (readonly, nonatomic) HMDCoreData *coreData;
@property (readonly, nonatomic) HMDCoreDataCloudTransform *cloudTransform;
@property (readonly, nonatomic) HMDBackgroundOperationManager *backgroundOpsManager;
@property (readonly, nonatomic) id<HMDDatabase> defaultDatabase;
@property (readonly, nonatomic) id<HMDDatabase> cameraClipsDatabase;
@property (readonly, nonatomic) NSDate *migrationStartTime;
@property (readonly, nonatomic) NSObject<OS_dispatch_queue> *queue;
@property (retain, nonatomic) HMDHomeData *homeData;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (BOOL)shouldIgnoreModel:(id)a0;
+ (id)userAccessCodeFromModel:(id)a0;
+ (long long)compareUserAccessCodeInModel:(id)a0 withModel:(id)a1;
+ (id)auditedUserAccessCodeModelsAndInvitesFromModels:(id)a0;
+ (id)arrayByRemovingElementsInArray:(id)a0 fromArray:(id)a1;
+ (id)modelsByDroppingEmptyStringAccessCodesOnModels:(id)a0;
+ (id)logCategory;
+ (id)auditedHomeAccessCodeModelsFromModels:(id)a0 userAccessCodeModelsAndInvites:(id)a1;

- (void)_fixupAccessoryWithNoRoom:(id)a0 coreDataModelObject:(id)a1;
- (id)privateZoneForOwnerUser:(id)a0;
- (BOOL)didCoreDataPushAllModelsToCloudKit:(id)a0 previousToken:(id)a1 cloudStore:(id)a2;
- (void)_fixupUserAuthorizationDataForUserModel:(id)a0;
- (BOOL)migrateHomeManager:(id)a0 managedObjectContext:(id)a1 hh2ControllerKey:(id)a2;
- (BOOL)fetchAndMigrateCompositeSettingsFromAccessory:(id)a0 fromLocalZone:(id)a1 managedObjectContext:(id)a2;
- (BOOL)migrateHomeToCoreData:(id)a0 primaryHomeUUID:(id)a1 managedObjectContext:(id)a2 hh2ControllerKey:(id)a3;
- (id)makeListOfArchivesToMigrate:(id)a0;
- (BOOL)makeSureToCreateHH2SentinelZone;
- (void)_fixUpHomeWithoutOwner:(id)a0 withHH2ControllerKey:(id)a1 context:(id)a2;
- (void)_fixupAccessoryWithNoInitialValues:(id)a0;
- (BOOL)saveUserSettingsToCoreData:(id)a0 forUser:(id)a1 privateSettingsMap:(id)a2;
- (id)allObjectIDsFromTransactions:(id)a0 cloudStoreIdentifier:(id)a1;
- (BOOL)startMigrationIfNeeded;
- (BOOL)rollAccessoryKeysToHH2:(id)a0 hh2ControllerKey:(id)a1;
- (void)fixupModelForMigration:(id)a0 backingStoreModelObject:(id)a1 hh2ControllerKey:(id)a2;
- (id)findAndRemoveAllModelsWithInvalidAccessCodes:(id)a0;
- (void)_updatePairingIdentityForHome:(id)a0 withHH2ControllerKey:(id)a1 context:(id)a2;
- (void)_createResidentModelsDuringMigrationForAppleMediaAccessory:(id)a0 context:(id)a1;
- (BOOL)_performMigrationFromTestDirectoryUsingHH2ControllerKey:(id)a0;
- (void)revertChangesPerformedDuringMigration;
- (void)_fixupCharacteristicEventTriggerInvalidService:(id)a0 context:(id)a1;
- (BOOL)migrateCameraProfileSettingModel:(id)a0 accessory:(id)a1 managedObjectContext:(id)a2;
- (BOOL)fetchAndMigrateCameraSettingsFromAccessory:(id)a0 fromLocalZone:(id)a1 managedObjectContext:(id)a2;
- (void)_fixupActionSetInvalidName:(id)a0 context:(id)a1;
- (BOOL)migrateUserSettingsToCoreData:(id)a0 forUser:(id)a1 fromLocalZone:(id)a2;
- (BOOL)migrateUserListeningHistoryControl:(id)a0 forOwnerUser:(id)a1 fromLocalZone:(id)a2;
- (BOOL)waitForV5UpdatesToSyncToCloudKit;
- (void)_fixupInvalidCharacteristicFormat:(id)a0 context:(id)a1;
- (id)openZoneWithName:(id)a0 inDatabase:(id)a1;
- (BOOL)migrateV5PersonDataForHome:(id)a0 managedObjectContext:(id)a1;
- (BOOL)scheduleAccessoryKeyMigration:(id)a0 oldPairingIdentity:(id)a1 hh2PairingIdentity:(id)a2;
- (id)sharedZoneForOwnerUser:(id)a0;
- (void)_fixupHomeInvalidName:(id)a0 context:(id)a1;
- (BOOL)migrateAccessoryV5Models:(id)a0 fromLocalZone:(id)a1 forHome:(id)a2 owner:(id)a3;
- (void)dealloc;
- (void)_fixupHomeManagerPairingIdentity:(id)a0 withHH2ControllerKey:(id)a1 context:(id)a2;
- (BOOL)waitForStartupForCloudZone:(id)a0;
- (void)_fixupCharacteristicWriteActionWithInvalidService:(id)a0 context:(id)a1;
- (BOOL)populateAndSaveCDModelsFrom:(id)a0 managedObjectContext:(id)a1 hh2ControllerKey:(id)a2 tag:(id)a3;
- (BOOL)migrateHomeData:(id)a0 managedObjectContext:(id)a1 hh2ControllerKey:(id)a2;
- (BOOL)migratePersonFaceCropModelsForLocalZone:(id)a0;
- (id)initWithMigratorRecord:(id)a0 hh2FrameworkSwitch:(id)a1 coreData:(id)a2 cloudTransform:(id)a3 backgroundOperationManager:(id)a4 defaultDatabase:(id)a5 cameraClipsDatabase:(id)a6;
- (void)_fixupAppleMediaAccessory:(id)a0 context:(id)a1;
- (void)_fixupUserPairingIdentity:(id)a0 withHH2ControllerKey:(id)a1 context:(id)a2;
- (BOOL)waitForCloudKitSyncForProcessingResult:(id)a0 error:(id *)a1;
- (BOOL)waitForFirstImportToFinish;
- (BOOL)handlePostMigration;
- (id)init;
- (BOOL)migratePhotosPersonManagerSettingsFromLocalZone:(id)a0 owner:(id)a1 managedObjectContext:(id)a2;
- (BOOL)migrateMediaContentProfileAccessControl:(id)a0 forOwnerUser:(id)a1 fromLocalZone:(id)a2;
- (void)_fixupSoftwareUpdateModelWithNoAccessory:(id)a0 coreDataModelObject:(id)a1;
- (void)_fixupActionSetUnlocalizedName:(id)a0;
- (void)submitABCEventForFailedMigrationWithReason:(unsigned long long)a0 withError:(id)a1;
- (void)_fixupTriggerInvalidName:(id)a0 context:(id)a1;
- (BOOL)migrateCompositeAccessorySettingModel:(id)a0 accessory:(id)a1 managedObjectContext:(id)a2;
- (void)fixupAssistantAccessControlForUserModel:(id)a0;
- (BOOL)migrateV5Models:(id)a0 forHome:(id)a1;
- (BOOL)migrateHomePersonModelsForHomeUUID:(id)a0 localZone:(id)a1 managedObjectContext:(id)a2;
- (BOOL)_startMigratingHomeDataFromLocation:(id)a0 usingHH2PairingKey:(id)a1;
- (BOOL)migrateHome:(id)a0 primaryHomeUUID:(id)a1 managedObjectContext:(id)a2 hh2ControllerKey:(id)a3;
- (BOOL)waitForCloudTransformToRun;
- (void)_fixupUserAccessCodeWithInvalidValue:(id)a0 context:(id)a1;
- (BOOL)waitForCDToExportModelsToCloudKit:(id)a0;
- (void).cxx_destruct;
- (BOOL)_saveAndResetWithContext:(id)a0 errorMessage:(id)a1;
- (id)_auditAccessCodesByRemovingIllegalDuplicatesFromModels:(id)a0;
- (BOOL)startMigrationFromLocation:(id)a0;
- (id)backingStoreObjectsForAccountsAndDevices:(id)a0;
- (BOOL)startMigratingHomeDataFromLocation:(id)a0;

@end
